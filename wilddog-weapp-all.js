!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.eio=e():t.eio=e()}(global,function(){return function(t){function e(n){if(r[n])return r[n].exports;var o=r[n]={exports:{},id:n,loaded:!1};return t[n].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var r={};return e.m=t,e.c=r,e.p="",e(0)}([function(t,e,r){"use strict";t.exports=r(1),global.eio=t.exports},function(t,e,r){"use strict";t.exports=r(2),t.exports.parser=r(6)},function(t,e,r){"use strict";function n(t,e){if(!(this instanceof n))return new n(t,e);e=e||{},t&&"object"===("undefined"==typeof t?"undefined":s(t))&&(e=t,t=null),t?(t=p(t),e.hostname=t.host,e.secure="https"===t.protocol||"wss"===t.protocol,e.port=t.port,t.query&&(e.query=t.query)):e.host&&(e.hostname=p(e.host).host),this.secure=null!=e.secure?e.secure:global.location&&"https:"===location.protocol,e.hostname&&!e.port&&(e.port=this.secure?"443":"80"),this.agent=e.agent||!1,this.hostname=e.hostname||(global.location?location.hostname:"localhost"),this.port=e.port||(global.location&&location.port?location.port:this.secure?443:80),this.query=e.query||{},"string"==typeof this.query&&(this.query=f.decode(this.query)),this.upgrade=!1!==e.upgrade,this.path=(e.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!e.forceJSONP,this.jsonp=!1!==e.jsonp,this.forceBase64=!!e.forceBase64,this.enablesXDR=!!e.enablesXDR,this.timestampParam=e.timestampParam||"t",this.timestampRequests=e.timestampRequests,this.transports=e.transports||["websocket"],this.readyState="",this.writeBuffer=[],this.policyPort=e.policyPort||843,this.rememberUpgrade=e.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=e.onlyBinaryUpgrades,this.perMessageDeflate=!1!==e.perMessageDeflate&&(e.perMessageDeflate||{}),!0===this.perMessageDeflate&&(this.perMessageDeflate={}),this.perMessageDeflate&&null==this.perMessageDeflate.threshold&&(this.perMessageDeflate.threshold=1024),this.pfx=e.pfx||null,this.key=e.key||null,this.passphrase=e.passphrase||null,this.cert=e.cert||null,this.ca=e.ca||null,this.ciphers=e.ciphers||null,this.rejectUnauthorized=void 0===e.rejectUnauthorized||e.rejectUnauthorized;var r="object"===("undefined"==typeof global?"undefined":s(global))&&global;r.global===r&&e.extraHeaders&&Object.keys(e.extraHeaders).length>0&&(this.extraHeaders=e.extraHeaders),this.open()}function o(t){var e={};for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);return e}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=r(3),a=r(17),c=r(21)("engine.io-client:socket"),u=r(32),h=r(6),p=r(33),f=r(18);t.exports=n,n.priorWebsocketSuccess=!1,a(n.prototype),n.protocol=h.protocol,n.Socket=n,n.Transport=r(5),n.transports=r(3),n.parser=r(6),n.prototype.createTransport=function(t){c('creating transport "%s"',t);var e=o(this.query);e.EIO=h.protocol,e.transport=t,this.id&&(e.sid=this.id);var r=new i[t]({agent:this.agent,hostname:this.hostname,port:this.port,secure:this.secure,path:this.path,query:e,forceJSONP:this.forceJSONP,jsonp:this.jsonp,forceBase64:this.forceBase64,enablesXDR:this.enablesXDR,timestampRequests:this.timestampRequests,timestampParam:this.timestampParam,policyPort:this.policyPort,socket:this,pfx:this.pfx,key:this.key,passphrase:this.passphrase,cert:this.cert,ca:this.ca,ciphers:this.ciphers,rejectUnauthorized:this.rejectUnauthorized,perMessageDeflate:this.perMessageDeflate,extraHeaders:this.extraHeaders});return r},n.prototype.open=function(){var t;if(this.rememberUpgrade&&n.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1)t="websocket";else{if(0===this.transports.length){var e=this;return void setTimeout(function(){e.emit("error","No transports available")},0)}t=this.transports[0]}this.readyState="opening";try{t=this.createTransport(t)}catch(r){return this.transports.shift(),void this.open()}t.open(),this.setTransport(t)},n.prototype.setTransport=function(t){c("setting transport %s",t.name);var e=this;this.transport&&(c("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=t,t.on("drain",function(){e.onDrain()}).on("packet",function(t){e.onPacket(t)}).on("error",function(t){e.onError(t)}).on("close",function(){e.onClose("transport close")})},n.prototype.probe=function(t){function e(){if(f.onlyBinaryUpgrades){var e=!this.supportsBinary&&f.transport.supportsBinary;p=p||e}p||(c('probe transport "%s" opened',t),h.send([{type:"ping",data:"probe"}]),h.once("packet",function(e){if(!p)if("pong"===e.type&&"probe"===e.data){if(c('probe transport "%s" pong',t),f.upgrading=!0,f.emit("upgrading",h),!h)return;n.priorWebsocketSuccess="websocket"===h.name,c('pausing current transport "%s"',f.transport.name),f.transport.pause(function(){p||"closed"!==f.readyState&&(c("changing transport and sending upgrade packet"),u(),f.setTransport(h),h.send([{type:"upgrade"}]),f.emit("upgrade",h),h=null,f.upgrading=!1,f.flush())})}else{c('probe transport "%s" failed',t);var r=new Error("probe error");r.transport=h.name,f.emit("upgradeError",r)}}))}function r(){p||(p=!0,u(),h.close(),h=null)}function o(e){var n=new Error("probe error: "+e);n.transport=h.name,r(),c('probe transport "%s" failed because of error: %s',t,e),f.emit("upgradeError",n)}function s(){o("transport closed")}function i(){o("socket closed")}function a(t){h&&t.name!==h.name&&(c('"%s" works - aborting "%s"',t.name,h.name),r())}function u(){h.removeListener("open",e),h.removeListener("error",o),h.removeListener("close",s),f.removeListener("close",i),f.removeListener("upgrading",a)}c('probing transport "%s"',t);var h=this.createTransport(t,{probe:1}),p=!1,f=this;n.priorWebsocketSuccess=!1,h.once("open",e),h.once("error",o),h.once("close",s),this.once("close",i),this.once("upgrading",a),h.open()},n.prototype.onOpen=function(){if(c("socket open"),this.readyState="open",n.priorWebsocketSuccess="websocket"===this.transport.name,this.emit("open"),this.flush(),"open"===this.readyState&&this.upgrade&&this.transport.pause){c("starting upgrade probes");for(var t=0,e=this.upgrades.length;t<e;t++)this.probe(this.upgrades[t])}},n.prototype.onPacket=function(t){if("opening"===this.readyState||"open"===this.readyState)switch(c('socket receive: type "%s", data "%s"',t.type,t.data),this.emit("packet",t),this.emit("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"pong":this.setPing(),this.emit("pong");break;case"error":var e=new Error("server error");e.code=t.data,this.onError(e);break;case"message":this.emit("data",t.data),this.emit("message",t.data)}else c('packet received with socket readyState "%s"',this.readyState)},n.prototype.onHandshake=function(t){this.emit("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this.upgrades=this.filterUpgrades(t.upgrades),this.pingInterval=t.pingInterval,this.pingTimeout=t.pingTimeout,this.onOpen(),"closed"!==this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},n.prototype.onHeartbeat=function(t){clearTimeout(this.pingTimeoutTimer);var e=this;e.pingTimeoutTimer=setTimeout(function(){"closed"!==e.readyState&&e.onClose("ping timeout")},t||e.pingInterval+e.pingTimeout)},n.prototype.setPing=function(){var t=this;clearTimeout(t.pingIntervalTimer),t.pingIntervalTimer=setTimeout(function(){c("writing ping packet - expecting pong within %sms",t.pingTimeout),t.ping(),t.onHeartbeat(t.pingTimeout)},t.pingInterval)},n.prototype.ping=function(){var t=this;this.sendPacket("ping",function(){t.emit("ping")})},n.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emit("drain"):this.flush()},n.prototype.flush=function(){"closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(c("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},n.prototype.write=n.prototype.send=function(t,e,r){return this.sendPacket("message",t,e,r),this},n.prototype.sendPacket=function(t,e,r,n){if("function"==typeof e&&(n=e,e=void 0),"function"==typeof r&&(n=r,r=null),"closing"!==this.readyState&&"closed"!==this.readyState){r=r||{},r.compress=!1!==r.compress;var o={type:t,data:e,options:r};this.emit("packetCreate",o),this.writeBuffer.push(o),n&&this.once("flush",n),this.flush()}},n.prototype.close=function(){function t(){n.onClose("forced close"),c("socket closing - telling transport to close"),n.transport.close()}function e(){n.removeListener("upgrade",e),n.removeListener("upgradeError",e),t()}function r(){n.once("upgrade",e),n.once("upgradeError",e)}if("opening"===this.readyState||"open"===this.readyState){this.readyState="closing";var n=this;this.writeBuffer.length?this.once("drain",function(){this.upgrading?r():t()}):this.upgrading?r():t()}return this},n.prototype.onError=function(t){c("socket error %j",t),n.priorWebsocketSuccess=!1,this.emit("error",t),this.onClose("transport error",t)},n.prototype.onClose=function(t,e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState){c('socket close with reason: "%s"',t);var r=this;clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",t,e),r.writeBuffer=[],r.prevBufferLen=0}},n.prototype.filterUpgrades=function(t){for(var e=[],r=0,n=t.length;r<n;r++)~u(this.transports,t[r])&&e.push(t[r]);return e}},function(t,e,r){"use strict";function n(t){var e,r=!1,n=!1,o=!1!==t.jsonp;if(global.location){var s="https:"===location.protocol,i=location.port;i||(i=s?443:80),r=t.hostname!==location.hostname||i!==t.port,n=t.secure!==s}if(t.xdomain=r,t.xscheme=n,e=new XMLHttpRequest(t),"open"in e&&!t.forceJSONP)return new XHR(t);if(!o)throw new Error("JSONP disabled");return new JSONP(t)}var o=r(4);e.polling=n,e.websocket=o},function(t,e,r){"use strict";function n(t){var e=t&&t.forceBase64;e&&(this.supportsBinary=!1),this.perMessageDeflate=t.perMessageDeflate,o.call(this,t)}var o=r(5),s=r(6),i=r(18),a=r(19),c=r(20),u=r(21)("engine.io-client:websocket"),h=r(24).WebSocket;t.exports=n,a(n,o),n.prototype.name="websocket",n.prototype.supportsBinary=!0,n.prototype.doOpen=function(){if(this.check()){var t=this.uri(),e={agent:this.agent,perMessageDeflate:this.perMessageDeflate};e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized,this.extraHeaders&&(e.headers=this.extraHeaders),this.ws=new h(t),void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType="nodebuffer"):this.ws.binaryType="arraybuffer",this.addEventListeners()}},n.prototype.addEventListeners=function(){var t=this;this.ws.onopen=function(){t.onOpen()},this.ws.onclose=function(){t.onClose()},this.ws.onmessage=function(e){t.onData(e.data)},this.ws.onerror=function(e){t.onError("websocket error",e)}},"undefined"!=typeof navigator&&/iPad|iPhone|iPod/i.test(navigator.userAgent)&&(n.prototype.onData=function(t){var e=this;setTimeout(function(){o.prototype.onData.call(e,t)},0)}),n.prototype.write=function(t){function e(){r.emit("flush"),setTimeout(function(){r.writable=!0,r.emit("drain")},0)}var r=this;this.writable=!1;for(var n=t.length,o=0,i=n;o<i;o++)!function(t){s.encodePacket(t,r.supportsBinary,function(t){try{r.ws.send(t)}catch(o){u("websocket closed before onclose event")}--n||e()})}(t[o])},n.prototype.onClose=function(){o.prototype.onClose.call(this)},n.prototype.doClose=function(){"undefined"!=typeof this.ws&&this.ws.close()},n.prototype.uri=function(){var t=this.query||{},e=this.secure?"wss":"ws",r="";this.port&&("wss"===e&&443!==this.port||"ws"===e&&80!==this.port)&&(r=":"+this.port),this.timestampRequests&&(t[this.timestampParam]=c()),this.supportsBinary||(t.b64=1),t=i.encode(t),t.length&&(t="?"+t);var n=this.hostname.indexOf(":")!==-1;return e+"://"+(n?"["+this.hostname+"]":this.hostname)+r+this.path+t},n.prototype.check=function(){return!(!h||"__initialize"in h&&this.name===n.prototype.name)}},function(t,e,r){"use strict";function n(t){this.path=t.path,this.hostname=t.hostname,this.port=t.port,this.secure=t.secure,this.query=t.query,this.timestampParam=t.timestampParam,this.timestampRequests=t.timestampRequests,this.readyState="",this.agent=t.agent||!1,this.socket=t.socket,this.enablesXDR=t.enablesXDR,this.pfx=t.pfx,this.key=t.key,this.passphrase=t.passphrase,this.cert=t.cert,this.ca=t.ca,this.ciphers=t.ciphers,this.rejectUnauthorized=t.rejectUnauthorized,this.extraHeaders=t.extraHeaders}var o=r(6),s=r(17);t.exports=n,s(n.prototype),n.prototype.onError=function(t,e){var r=new Error(t);return r.type="TransportError",r.description=e,this.emit("error",r),this},n.prototype.open=function(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this},n.prototype.close=function(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this},n.prototype.send=function(t){if("open"!==this.readyState)throw new Error("Transport not open");this.write(t)},n.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},n.prototype.onData=function(t){var e=o.decodePacket(t,this.socket.binaryType);this.onPacket(e)},n.prototype.onPacket=function(t){this.emit("packet",t)},n.prototype.onClose=function(){this.readyState="closed",this.emit("close")}},function(t,e,r){"use strict";function n(t,r){var n="b"+e.packets[t.type]+t.data.data;return r(n)}function o(t,r,n){if(!r)return e.encodeBase64Packet(t,n);var o=t.data,s=new Uint8Array(o),i=new Uint8Array(1+o.byteLength);i[0]=v[t.type];for(var a=0;a<s.length;a++)i[a+1]=s[a];return n(i.buffer)}function s(t,r,n){if(!r)return e.encodeBase64Packet(t,n);var o=new FileReader;return o.onload=function(){t.data=o.result,e.encodePacket(t,r,!0,n)},o.readAsArrayBuffer(t.data)}function i(t,r,n){if(!r)return e.encodeBase64Packet(t,n);if(m)return s(t,r,n);var o=new Uint8Array(1);o[0]=v[t.type];var i=new k([o.buffer,t.data]);return n(i)}function a(t){try{t=d.decode(t)}catch(e){return!1}return t}function c(t,e,r){for(var n=new Array(t.length),o=l(t.length,r),s=function(t,r,o){e(r,function(e,r){n[t]=r,o(e,n)})},i=0;i<t.length;i++)s(i,t[i],o)}var u,h=r(7),p=r(8),f=r(10),l=r(11),d=r(12);global&&global.ArrayBuffer&&(u=r(15));var y="undefined"!=typeof navigator&&/Android/i.test(navigator.userAgent),g="undefined"!=typeof navigator&&/PhantomJS/i.test(navigator.userAgent),m=y||g;e.protocol=3;var v=e.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},b=h(v),w={type:"error",data:"parser error"},k=r(16);e.encodePacket=function(t,e,r,s){"function"==typeof e&&(s=e,e=!1),"function"==typeof r&&(s=r,r=null);var a=void 0===t.data?void 0:t.data.buffer||t.data;if(global.ArrayBuffer&&a instanceof ArrayBuffer)return o(t,e,s);if(k&&a instanceof global.Blob)return i(t,e,s);if(a&&a.base64)return n(t,s);var c=v[t.type];return void 0!==t.data&&(c+=r?d.encode(String(t.data)):String(t.data)),s(""+c)},e.encodeBase64Packet=function(t,r){var n="b"+e.packets[t.type];if(k&&t.data instanceof global.Blob){var o=new FileReader;return o.onload=function(){var t=o.result.split(",")[1];r(n+t)},o.readAsDataURL(t.data)}var s;try{s=String.fromCharCode.apply(null,new Uint8Array(t.data))}catch(i){for(var a=new Uint8Array(t.data),c=new Array(a.length),u=0;u<a.length;u++)c[u]=a[u];s=String.fromCharCode.apply(null,c)}return n+=global.btoa(s),r(n)},e.decodePacket=function(t,r,n){if("string"==typeof t||void 0===t){if("b"==t.charAt(0))return e.decodeBase64Packet(t.substr(1),r);if(n&&(t=a(t),t===!1))return w;var o=t.charAt(0);return Number(o)==o&&b[o]?t.length>1?{type:b[o],data:t.substring(1)}:{type:b[o]}:w}var s=new Uint8Array(t),o=s[0],i=f(t,1);return k&&"blob"===r&&(i=new k([i])),{type:b[o],data:i}},e.decodeBase64Packet=function(t,e){var r=b[t.charAt(0)];if(!u)return{type:r,data:{base64:!0,data:t.substr(1)}};var n=u.decode(t.substr(1));return"blob"===e&&k&&(n=new k([n])),{type:r,data:n}},e.encodePayload=function(t,r,n){function o(t){return t.length+":"+t}function s(t,n){e.encodePacket(t,!!i&&r,!0,function(t){n(null,o(t))})}"function"==typeof r&&(n=r,r=null);var i=p(t);return r&&i?k&&!m?e.encodePayloadAsBlob(t,n):e.encodePayloadAsArrayBuffer(t,n):t.length?void c(t,s,function(t,e){return n(e.join(""))}):n("0:")},e.decodePayload=function(t,r,n){if("string"!=typeof t)return e.decodePayloadAsBinary(t,r,n);"function"==typeof r&&(n=r,r=null);var o;if(""==t)return n(w,0,1);for(var s,i,a="",c=0,u=t.length;c<u;c++){var h=t.charAt(c);if(":"!=h)a+=h;else{if(""==a||a!=(s=Number(a)))return n(w,0,1);if(i=t.substr(c+1,s),a!=i.length)return n(w,0,1);if(i.length){if(o=e.decodePacket(i,r,!0),w.type==o.type&&w.data==o.data)return n(w,0,1);var p=n(o,c+s,u);if(!1===p)return}c+=s,a=""}}return""!=a?n(w,0,1):void 0},e.encodePayloadAsArrayBuffer=function(t,r){function n(t,r){e.encodePacket(t,!0,!0,function(t){return r(null,t)})}return t.length?void c(t,n,function(t,e){var n=e.reduce(function(t,e){var r;return r="string"==typeof e?e.length:e.byteLength,t+r.toString().length+r+2},0),o=new Uint8Array(n),s=0;return e.forEach(function(t){var e="string"==typeof t,r=t;if(e){for(var n=new Uint8Array(t.length),i=0;i<t.length;i++)n[i]=t.charCodeAt(i);r=n.buffer}e?o[s++]=0:o[s++]=1;for(var a=r.byteLength.toString(),i=0;i<a.length;i++)o[s++]=parseInt(a[i]);o[s++]=255;for(var n=new Uint8Array(r),i=0;i<n.length;i++)o[s++]=n[i]}),r(o.buffer)}):r(new ArrayBuffer(0))},e.encodePayloadAsBlob=function(t,r){function n(t,r){e.encodePacket(t,!0,!0,function(t){var e=new Uint8Array(1);if(e[0]=1,"string"==typeof t){for(var n=new Uint8Array(t.length),o=0;o<t.length;o++)n[o]=t.charCodeAt(o);t=n.buffer,e[0]=0}for(var s=t instanceof ArrayBuffer?t.byteLength:t.size,i=s.toString(),a=new Uint8Array(i.length+1),o=0;o<i.length;o++)a[o]=parseInt(i[o]);if(a[i.length]=255,k){var c=new k([e.buffer,a.buffer,t]);r(null,c)}})}c(t,n,function(t,e){return r(new k(e))})},e.decodePayloadAsBinary=function(t,r,n){"function"==typeof r&&(n=r,r=null);for(var o=t,s=[],i=!1;o.byteLength>0;){for(var a=new Uint8Array(o),c=0===a[0],u="",h=1;255!=a[h];h++){if(u.length>310){i=!0;break}u+=a[h]}if(i)return n(w,0,1);o=f(o,2+u.length),u=parseInt(u);var p=f(o,0,u);if(c)try{p=String.fromCharCode.apply(null,new Uint8Array(p))}catch(l){var d=new Uint8Array(p);p="";for(var h=0;h<d.length;h++)p+=String.fromCharCode(d[h])}s.push(p),o=f(o,u)}var y=s.length;s.forEach(function(t,o){n(e.decodePacket(t,r,!0),o,y)})}},function(t,e){"use strict";t.exports=Object.keys||function(t){var e=[],r=Object.prototype.hasOwnProperty;for(var n in t)r.call(t,n)&&e.push(n);return e}},function(t,e,r){"use strict";function n(t){function e(t){if(!t)return!1;if(global.Buffer&&global.Buffer.isBuffer(t)||global.ArrayBuffer&&t instanceof ArrayBuffer||global.Blob&&t instanceof Blob||global.File&&t instanceof File)return!0;if(s(t)){for(var r=0;r<t.length;r++)if(e(t[r]))return!0}else if(t&&"object"==("undefined"==typeof t?"undefined":o(t))){t.toJSON&&(t=t.toJSON());for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return!0}return!1}return e(t)}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s=r(9);t.exports=n},function(t,e){"use strict";t.exports=Array.isArray||function(t){return"[object Array]"==Object.prototype.toString.call(t)}},function(t,e){"use strict";t.exports=function(t,e,r){var n=t.byteLength;if(e=e||0,r=r||n,t.slice)return t.slice(e,r);if(e<0&&(e+=n),r<0&&(r+=n),r>n&&(r=n),e>=n||e>=r||0===n)return new ArrayBuffer(0);for(var o=new Uint8Array(t),s=new Uint8Array(r-e),i=e,a=0;i<r;i++,a++)s[a]=o[i];return s.buffer}},function(t,e){"use strict";function r(t,e,r){function o(t,n){if(o.count<=0)throw new Error("after called too many times");--o.count,t?(s=!0,e(t),e=r):0!==o.count||s||e(null,n)}var s=!1;return r=r||n,o.count=t,0===t?e():o}function n(){}t.exports=r},function(t,e,r){var n;(function(t){"use strict";var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(s){function i(t){for(var e,r,n=[],o=0,s=t.length;o<s;)e=t.charCodeAt(o++),e>=55296&&e<=56319&&o<s?(r=t.charCodeAt(o++),56320==(64512&r)?n.push(((1023&e)<<10)+(1023&r)+65536):(n.push(e),o--)):n.push(e);return n}function a(t){for(var e,r=t.length,n=-1,o="";++n<r;)e=t[n],e>65535&&(e-=65536,o+=w(e>>>10&1023|55296),e=56320|1023&e),o+=w(e);return o}function c(t,e){return w(t>>e&63|128)}function u(t){if(0==(4294967168&t))return w(t);var e="";return 0==(4294965248&t)?e=w(t>>6&31|192):0==(4294901760&t)?(e=w(t>>12&15|224),e+=c(t,6)):0==(4292870144&t)&&(e=w(t>>18&7|240),e+=c(t,12),e+=c(t,6)),e+=w(63&t|128)}function h(t){for(var e,r=i(t),n=r.length,o=-1,s="";++o<n;)e=r[o],s+=u(e);return s}function p(){if(b>=v)throw Error("Invalid byte index");var t=255&m[b];if(b++,128==(192&t))return 63&t;throw Error("Invalid continuation byte")}function f(){var t,e,r,n,o;if(b>v)throw Error("Invalid byte index");if(b==v)return!1;if(t=255&m[b],b++,0==(128&t))return t;if(192==(224&t)){var e=p();if(o=(31&t)<<6|e,o>=128)return o;throw Error("Invalid continuation byte")}if(224==(240&t)){if(e=p(),r=p(),o=(15&t)<<12|e<<6|r,o>=2048)return o;throw Error("Invalid continuation byte")}if(240==(248&t)&&(e=p(),r=p(),n=p(),o=(15&t)<<18|e<<12|r<<6|n,o>=65536&&o<=1114111))return o;throw Error("Invalid WTF-8 detected")}function l(t){m=i(t),v=m.length,b=0;for(var e,r=[];(e=f())!==!1;)r.push(e);return a(r)}var d="object"==o(e)&&e,y="object"==o(t)&&t&&t.exports==d&&t,g="object"==("undefined"==typeof global?"undefined":o(global))&&global;g.global!==g&&g.window!==g||(s=g);var m,v,b,w=String.fromCharCode,k={version:"1.0.0",encode:h,decode:l};if("object"==o(r(14))&&r(14))n=function(){return k}.call(e,r,e,t),!(void 0!==n&&(t.exports=n));else if(d&&!d.nodeType)if(y)y.exports=k;else{var S={},x=S.hasOwnProperty;for(var A in k)x.call(k,A)&&(d[A]=k[A])}else s.wtf8=k}(void 0)}).call(e,r(13)(t))},function(t,e){"use strict";t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children=[],t.webpackPolyfill=1),t}},function(t,e){(function(e){t.exports=e}).call(e,{})},function(t,e){"use strict";!function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=new Uint8Array(256),n=0;n<t.length;n++)r[t.charCodeAt(n)]=n;e.encode=function(e){var r,n=new Uint8Array(e),o=n.length,s="";for(r=0;r<o;r+=3)s+=t[n[r]>>2],s+=t[(3&n[r])<<4|n[r+1]>>4],s+=t[(15&n[r+1])<<2|n[r+2]>>6],s+=t[63&n[r+2]];return o%3===2?s=s.substring(0,s.length-1)+"=":o%3===1&&(s=s.substring(0,s.length-2)+"=="),s},e.decode=function(t){var e,n,o,s,i,a=.75*t.length,c=t.length,u=0;"="===t[t.length-1]&&(a--,"="===t[t.length-2]&&a--);var h=new ArrayBuffer(a),p=new Uint8Array(h);for(e=0;e<c;e+=4)n=r[t.charCodeAt(e)],o=r[t.charCodeAt(e+1)],s=r[t.charCodeAt(e+2)],i=r[t.charCodeAt(e+3)],p[u++]=n<<2|o>>4,p[u++]=(15&o)<<4|s>>2,p[u++]=(3&s)<<6|63&i;return h}}()},function(t,e){"use strict";function r(t){for(var e=0;e<t.length;e++){var r=t[e];if(r.buffer instanceof ArrayBuffer){var n=r.buffer;if(r.byteLength!==n.byteLength){var o=new Uint8Array(r.byteLength);o.set(new Uint8Array(n,r.byteOffset,r.byteLength)),n=o.buffer}t[e]=n}}}function n(t,e){e=e||{};var n=new s;r(t);for(var o=0;o<t.length;o++)n.append(t[o]);return e.type?n.getBlob(e.type):n.getBlob()}function o(t,e){return r(t),new Blob(t,e||{})}var s=global.BlobBuilder||global.WebKitBlobBuilder||global.MSBlobBuilder||global.MozBlobBuilder,i=function(){try{var t=new Blob(["hi"]);return 2===t.size}catch(e){return!1}}(),a=i&&function(){try{var t=new Blob([new Uint8Array([1,2])]);return 2===t.size}catch(e){return!1}}(),c=s&&s.prototype.append&&s.prototype.getBlob;t.exports=function(){return i?a?global.Blob:o:c?n:void 0}()},function(t,e){"use strict";function r(t){if(t)return n(t)}function n(t){for(var e in r.prototype)t[e]=r.prototype[e];return t}t.exports=r,r.prototype.on=r.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks[t]=this._callbacks[t]||[]).push(e),this},r.prototype.once=function(t,e){function r(){n.off(t,r),e.apply(this,arguments)}var n=this;return this._callbacks=this._callbacks||{},r.fn=e,this.on(t,r),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var r=this._callbacks[t];if(!r)return this;if(1==arguments.length)return delete this._callbacks[t],this;for(var n,o=0;o<r.length;o++)if(n=r[o],n===e||n.fn===e){r.splice(o,1);break}return this},r.prototype.emit=function(t){this._callbacks=this._callbacks||{};var e=[].slice.call(arguments,1),r=this._callbacks[t];if(r){r=r.slice(0);for(var n=0,o=r.length;n<o;++n)r[n].apply(this,e)}return this},r.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks[t]||[]},r.prototype.hasListeners=function(t){return!!this.listeners(t).length}},function(t,e){"use strict";e.encode=function(t){var e="";for(var r in t)t.hasOwnProperty(r)&&(e.length&&(e+="&"),e+=encodeURIComponent(r)+"="+encodeURIComponent(t[r]));return e},e.decode=function(t){for(var e={},r=t.split("&"),n=0,o=r.length;n<o;n++){var s=r[n].split("=");e[decodeURIComponent(s[0])]=decodeURIComponent(s[1])}return e}},function(t,e){"use strict";t.exports=function(t,e){var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}},function(t,e){"use strict";function r(t){var e="";do e=i[t%a]+e,t=Math.floor(t/a);while(t>0);return e}function n(t){var e=0;for(h=0;h<t.length;h++)e=e*a+c[t.charAt(h)];return e}function o(){var t=r(+new Date);return t!==s?(u=0,s=t):t+"."+r(u++)}for(var s,i="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),a=64,c={},u=0,h=0;h<a;h++)c[i[h]]=h;o.encode=r,o.decode=n,t.exports=o},function(t,e,r){"use strict";function n(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}function o(){var t=arguments,r=this.useColors;if(t[0]=(r?"%c":"")+this.namespace+(r?" %c":" ")+t[0]+(r?"%c ":" ")+"+"+e.humanize(this.diff),!r)return t;var n="color: "+this.color;t=[t[0],n,"color: inherit"].concat(Array.prototype.slice.call(t,1));var o=0,s=0;return t[0].replace(/%[a-z%]/g,function(t){"%%"!==t&&(o++,"%c"===t&&(s=o))}),t.splice(s,0,n),t}function s(){return"object"===("undefined"==typeof console?"undefined":u(console))&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function i(t){try{null==t?e.storage.removeItem("debug"):e.storage.debug=t}catch(r){}}function a(){var t;try{t=e.storage.debug}catch(r){}return t}function c(){try{return window.localStorage}catch(t){}}var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e=t.exports=r(22),e.log=s,e.formatArgs=o,e.save=i,e.load=a,e.useColors=n,e.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:c(),e.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],e.formatters.j=function(t){return JSON.stringify(t)},e.enable(a())},function(t,e,r){"use strict";function n(){return e.colors[h++%e.colors.length]}function o(t){function r(){}function o(){var t=o,r=+new Date,s=r-(u||r);t.diff=s,t.prev=u,t.curr=r,u=r,null==t.useColors&&(t.useColors=e.useColors()),null==t.color&&t.useColors&&(t.color=n());var i=Array.prototype.slice.call(arguments);i[0]=e.coerce(i[0]),"string"!=typeof i[0]&&(i=["%o"].concat(i));var a=0;i[0]=i[0].replace(/%([a-z%])/g,function(r,n){if("%%"===r)return r;a++;var o=e.formatters[n];if("function"==typeof o){var s=i[a];r=o.call(t,s),i.splice(a,1),a--}return r}),"function"==typeof e.formatArgs&&(i=e.formatArgs.apply(t,i));var c=o.log||e.log||console.log.bind(console);c.apply(t,i)}r.enabled=!1,o.enabled=!0;var s=e.enabled(t)?o:r;return s.namespace=t,s}function s(t){e.save(t);for(var r=(t||"").split(/[\s,]+/),n=r.length,o=0;o<n;o++)r[o]&&(t=r[o].replace(/\*/g,".*?"),"-"===t[0]?e.skips.push(new RegExp("^"+t.substr(1)+"$")):e.names.push(new RegExp("^"+t+"$")))}function i(){e.enable("")}function a(t){var r,n;for(r=0,n=e.skips.length;r<n;r++)if(e.skips[r].test(t))return!1;for(r=0,n=e.names.length;r<n;r++)if(e.names[r].test(t))return!0;return!1}function c(t){return t instanceof Error?t.stack||t.message:t}e=t.exports=o,e.coerce=c,e.disable=i,e.enable=s,e.enabled=a,e.humanize=r(23),e.names=[],e.skips=[],e.formatters={};var u,h=0},function(t,e){"use strict";function r(t){if(t=""+t,!(t.length>1e4)){var e=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(t);if(e){var r=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*h;case"days":case"day":case"d":return r*u;case"hours":case"hour":case"hrs":case"hr":case"h":return r*c;case"minutes":case"minute":case"mins":case"min":case"m":return r*a;case"seconds":case"second":case"secs":case"sec":case"s":return r*i;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r}}}}function n(t){return t>=u?Math.round(t/u)+"d":t>=c?Math.round(t/c)+"h":t>=a?Math.round(t/a)+"m":t>=i?Math.round(t/i)+"s":t+"ms"}function o(t){return s(t,u,"day")||s(t,c,"hour")||s(t,a,"minute")||s(t,i,"second")||t+" ms"}function s(t,e,r){if(!(t<e))return t<1.5*e?Math.floor(t/e)+" "+r:Math.ceil(t/e)+" "+r+"s"}var i=1e3,a=60*i,c=60*a,u=24*c,h=365.25*u;t.exports=function(t,e){return e=e||{},"string"==typeof t?r(t):e["long"]?o(t):n(t)}},function(t,e,r){"use strict";var n=r(25);t.exports={WebSocket:n},null==navigator&&(navigator={},navigator.userAgent="WeApp")},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),s=r(26),i=r(27),a=function(){function t(e){var r=this;if(n(this,t),null==e)throw new TypeError("1 argument needed");try{var o=i.parse(e);if("wss:"!=o.protocol)throw new Error("protocol must be wss")}catch(s){throw new SyntaxError("url in wrong format,protocol must be wss")}null!=t.instance&&t.instance.close(),t.instance=this,this.url=e,this.readyState=0,this.onopen=null,this.onclose=null,this.onerror=null,this.onmessage=null,wx.connectSocket({url:e}),wx.onSocketOpen(function(){r.readyState=t.OPEN,r.onopen&&r.onopen.call(r),r.dispatchEvent({type:"open"})}),wx.onSocketError(function(t){var e={type:"error",data:t};r.onerror&&r.onerror.call(r,e),r.dispatchEvent(e)}),wx.onSocketMessage(function(e){if(r.readyState===t.OPEN||r.readyState===t.CLOSING){var n={type:"message",data:e.data};r.onmessage&&r.onmessage.call(r,n),r.dispatchEvent(n)}}),wx.onSocketClose(function(){if(r.readyState=t.CLOSED,r.onclose){var e={type:"close",wasClean:!0,code:0,reason:""};r.onclose.call(r,e)}})}return o(t,[{key:"close",value:function(){wx.closeSocket()}},{key:"send",value:function(t){wx.sendSocketMessage({data:t})}}]),
t}();a.prototype.addEventListener=s.addEventListener,a.prototype.removeEventListener=s.removeEventListener,a.prototype.dispatchEvent=s.dispatchEvent,a.CONNECTING=0,a.OPEN=1,a.CLOSING=2,a.CLOSED=3,a.instance=null,t.exports=a},function(t,e){"use strict";t.exports=function(){function t(t,e,r){i.value=r,a(t,e,i),i.value=null}function e(e,r,n){var o;u.call(e,r)?o=e[r]:t(e,r,o=[]),c.call(o,n)<0&&o.push(n)}function r(t,e,r){var n,o,s;if(u.call(t,e))for(r.target=t,n=t[e].slice(0),s=0;s<n.length;s++)o=n[s],"function"==typeof o?o.call(t,r):"function"==typeof o.handleEvent&&o.handleEvent(r)}function n(t,e,r){var n,o;u.call(t,e)&&(n=t[e],o=c.call(n,r),-1<o&&(n.splice(o,1),n.length||delete t[e]))}var o="@@",s={},i={configurable:!0,value:null},a=Object.defineProperty||function(t,e,r){t[e]=r.value},c=[].indexOf||function(t){for(var e=this.length;e--&&this[e]!==t;);return e},u=s.hasOwnProperty;return t(s,"addEventListener",function(t,r){e(this,o+t,r)}),t(s,"dispatchEvent",function(t){r(this,o+t.type,t)}),t(s,"removeEventListener",function(t,e){n(this,o+t,e)}),s}()},function(t,e,r){"use strict";function n(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function o(t,e,r){if(t&&u(t)&&t instanceof n)return t;var o=new n;return o.parse(t,e,r),o}function s(t){return c(t)&&(t=o(t)),t instanceof n?t.format():n.prototype.format.call(t)}function i(t,e){return o(t,!1,!0).resolve(e)}function a(t,e){return t?o(t,!1,!0).resolveObject(e):e}function c(t){return"string"==typeof t}function u(t){return"object"===("undefined"==typeof t?"undefined":f(t))&&null!==t}function h(t){return null===t}function p(t){return null==t}var f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l=r(28);e.parse=o,e.resolve=i,e.resolveObject=a,e.format=s,e.Url=n;var d=/^([a-z0-9.+-]+:)/i,y=/:[0-9]*$/,g=["<",">",'"',"`"," ","\r","\n","\t"],m=["{","}","|","\\","^","`"].concat(g),v=["'"].concat(m),b=["%","/","?",";","#"].concat(v),w=["/","?","#"],k=255,S=/^[a-z0-9A-Z_-]{0,63}$/,x=/^([a-z0-9A-Z_-]{0,63})(.*)$/,A={javascript:!0,"javascript:":!0},C={javascript:!0,"javascript:":!0},B={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},O=r(29);n.prototype.parse=function(t,e,r){if(!c(t))throw new TypeError("Parameter 'url' must be a string, not "+("undefined"==typeof t?"undefined":f(t)));var n=t;n=n.trim();var o=d.exec(n);if(o){o=o[0];var s=o.toLowerCase();this.protocol=s,n=n.substr(o.length)}if(r||o||n.match(/^\/\/[^@\/]+@[^@\/]+/)){var i="//"===n.substr(0,2);!i||o&&C[o]||(n=n.substr(2),this.slashes=!0)}if(!C[o]&&(i||o&&!B[o])){for(var a=-1,u=0;u<w.length;u++){var h=n.indexOf(w[u]);h!==-1&&(a===-1||h<a)&&(a=h)}var p,y;y=a===-1?n.lastIndexOf("@"):n.lastIndexOf("@",a),y!==-1&&(p=n.slice(0,y),n=n.slice(y+1),this.auth=decodeURIComponent(p)),a=-1;for(var u=0;u<b.length;u++){var h=n.indexOf(b[u]);h!==-1&&(a===-1||h<a)&&(a=h)}a===-1&&(a=n.length),this.host=n.slice(0,a),n=n.slice(a),this.parseHost(),this.hostname=this.hostname||"";var g="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!g)for(var m=this.hostname.split(/\./),u=0,P=m.length;u<P;u++){var j=m[u];if(j&&!j.match(S)){for(var E="",U=0,L=j.length;U<L;U++)E+=j.charCodeAt(U)>127?"x":j[U];if(!E.match(S)){var I=m.slice(0,u),T=m.slice(u+1),q=j.match(x);q&&(I.push(q[1]),T.unshift(q[2])),T.length&&(n="/"+T.join(".")+n),this.hostname=I.join(".");break}}}if(this.hostname.length>k?this.hostname="":this.hostname=this.hostname.toLowerCase(),!g){for(var R=this.hostname.split("."),D=[],u=0;u<R.length;++u){var M=R[u];D.push(M.match(/[^A-Za-z0-9_-]/)?"xn--"+l.encode(M):M)}this.hostname=D.join(".")}var z=this.port?":"+this.port:"",N=this.hostname||"";this.host=N+z,this.href+=this.host,g&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==n[0]&&(n="/"+n))}if(!A[s])for(var u=0,P=v.length;u<P;u++){var _=v[u],H=encodeURIComponent(_);H===_&&(H=escape(_)),n=n.split(_).join(H)}var F=n.indexOf("#");F!==-1&&(this.hash=n.substr(F),n=n.slice(0,F));var J=n.indexOf("?");if(J!==-1?(this.search=n.substr(J),this.query=n.substr(J+1),e&&(this.query=O.parse(this.query)),n=n.slice(0,J)):e&&(this.search="",this.query={}),n&&(this.pathname=n),B[s]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var z=this.pathname||"",M=this.search||"";this.path=z+M}return this.href=this.format(),this},n.prototype.format=function(){var t=this.auth||"";t&&(t=encodeURIComponent(t),t=t.replace(/%3A/i,":"),t+="@");var e=this.protocol||"",r=this.pathname||"",n=this.hash||"",o=!1,s="";this.host?o=t+this.host:this.hostname&&(o=t+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&u(this.query)&&Object.keys(this.query).length&&(s=O.stringify(this.query));var i=this.search||s&&"?"+s||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||B[e])&&o!==!1?(o="//"+(o||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):o||(o=""),n&&"#"!==n.charAt(0)&&(n="#"+n),i&&"?"!==i.charAt(0)&&(i="?"+i),r=r.replace(/[?#]/g,function(t){return encodeURIComponent(t)}),i=i.replace("#","%23"),e+o+r+i+n},n.prototype.resolve=function(t){return this.resolveObject(o(t,!1,!0)).format()},n.prototype.resolveObject=function(t){if(c(t)){var e=new n;e.parse(t,!1,!0),t=e}var r=new n;if(Object.keys(this).forEach(function(t){r[t]=this[t]},this),r.hash=t.hash,""===t.href)return r.href=r.format(),r;if(t.slashes&&!t.protocol)return Object.keys(t).forEach(function(e){"protocol"!==e&&(r[e]=t[e])}),B[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r;if(t.protocol&&t.protocol!==r.protocol){if(!B[t.protocol])return Object.keys(t).forEach(function(e){r[e]=t[e]}),r.href=r.format(),r;if(r.protocol=t.protocol,t.host||C[t.protocol])r.pathname=t.pathname;else{for(var o=(t.pathname||"").split("/");o.length&&!(t.host=o.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==o[0]&&o.unshift(""),o.length<2&&o.unshift(""),r.pathname=o.join("/")}if(r.search=t.search,r.query=t.query,r.host=t.host||"",r.auth=t.auth,r.hostname=t.hostname||t.host,r.port=t.port,r.pathname||r.search){var s=r.pathname||"",i=r.search||"";r.path=s+i}return r.slashes=r.slashes||t.slashes,r.href=r.format(),r}var a=r.pathname&&"/"===r.pathname.charAt(0),u=t.host||t.pathname&&"/"===t.pathname.charAt(0),f=u||a||r.host&&t.pathname,l=f,d=r.pathname&&r.pathname.split("/")||[],o=t.pathname&&t.pathname.split("/")||[],y=r.protocol&&!B[r.protocol];if(y&&(r.hostname="",r.port=null,r.host&&(""===d[0]?d[0]=r.host:d.unshift(r.host)),r.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===o[0]?o[0]=t.host:o.unshift(t.host)),t.host=null),f=f&&(""===o[0]||""===d[0])),u)r.host=t.host||""===t.host?t.host:r.host,r.hostname=t.hostname||""===t.hostname?t.hostname:r.hostname,r.search=t.search,r.query=t.query,d=o;else if(o.length)d||(d=[]),d.pop(),d=d.concat(o),r.search=t.search,r.query=t.query;else if(!p(t.search)){if(y){r.hostname=r.host=d.shift();var g=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@");g&&(r.auth=g.shift(),r.host=r.hostname=g.shift())}return r.search=t.search,r.query=t.query,h(r.pathname)&&h(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!d.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var m=d.slice(-1)[0],v=(r.host||t.host)&&("."===m||".."===m)||""===m,b=0,w=d.length;w>=0;w--)m=d[w],"."==m?d.splice(w,1):".."===m?(d.splice(w,1),b++):b&&(d.splice(w,1),b--);if(!f&&!l)for(;b--;b)d.unshift("..");!f||""===d[0]||d[0]&&"/"===d[0].charAt(0)||d.unshift(""),v&&"/"!==d.join("/").substr(-1)&&d.push("");var k=""===d[0]||d[0]&&"/"===d[0].charAt(0);if(y){r.hostname=r.host=k?"":d.length?d.shift():"";var g=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@");g&&(r.auth=g.shift(),r.host=r.hostname=g.shift())}return f=f||r.host&&d.length,f&&!k&&d.unshift(""),d.length?r.pathname=d.join("/"):(r.pathname=null,r.path=null),h(r.pathname)&&h(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=t.auth||r.auth,r.slashes=r.slashes||t.slashes,r.href=r.format(),r},n.prototype.parseHost=function(){var t=this.host,e=y.exec(t);e&&(e=e[0],":"!==e&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},function(t,e,r){var n;(function(t){"use strict";var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(s){function i(t){throw RangeError(q[t])}function a(t,e){for(var r=t.length,n=[];r--;)n[r]=e(t[r]);return n}function c(t,e){var r=t.split("@"),n="";r.length>1&&(n=r[0]+"@",t=r[1]),t=t.replace(T,".");var o=t.split("."),s=a(o,e).join(".");return n+s}function u(t){for(var e,r,n=[],o=0,s=t.length;o<s;)e=t.charCodeAt(o++),e>=55296&&e<=56319&&o<s?(r=t.charCodeAt(o++),56320==(64512&r)?n.push(((1023&e)<<10)+(1023&r)+65536):(n.push(e),o--)):n.push(e);return n}function h(t){return a(t,function(t){var e="";return t>65535&&(t-=65536,e+=M(t>>>10&1023|55296),t=56320|1023&t),e+=M(t)}).join("")}function p(t){return t-48<10?t-22:t-65<26?t-65:t-97<26?t-97:A}function f(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function l(t,e,r){var n=0;for(t=r?D(t/P):t>>1,t+=D(t/e);t>R*B>>1;n+=A)t=D(t/R);return D(n+(R+1)*t/(t+O))}function d(t){var e,r,n,o,s,a,c,u,f,d,y=[],g=t.length,m=0,v=E,b=j;for(r=t.lastIndexOf(U),r<0&&(r=0),n=0;n<r;++n)t.charCodeAt(n)>=128&&i("not-basic"),y.push(t.charCodeAt(n));for(o=r>0?r+1:0;o<g;){for(s=m,a=1,c=A;o>=g&&i("invalid-input"),u=p(t.charCodeAt(o++)),(u>=A||u>D((x-m)/a))&&i("overflow"),m+=u*a,f=c<=b?C:c>=b+B?B:c-b,!(u<f);c+=A)d=A-f,a>D(x/d)&&i("overflow"),a*=d;e=y.length+1,b=l(m-s,e,0==s),D(m/e)>x-v&&i("overflow"),v+=D(m/e),m%=e,y.splice(m++,0,v)}return h(y)}function y(t){var e,r,n,o,s,a,c,h,p,d,y,g,m,v,b,w=[];for(t=u(t),g=t.length,e=E,r=0,s=j,a=0;a<g;++a)y=t[a],y<128&&w.push(M(y));for(n=o=w.length,o&&w.push(U);n<g;){for(c=x,a=0;a<g;++a)y=t[a],y>=e&&y<c&&(c=y);for(m=n+1,c-e>D((x-r)/m)&&i("overflow"),r+=(c-e)*m,e=c,a=0;a<g;++a)if(y=t[a],y<e&&++r>x&&i("overflow"),y==e){for(h=r,p=A;d=p<=s?C:p>=s+B?B:p-s,!(h<d);p+=A)b=h-d,v=A-d,w.push(M(f(d+b%v,0))),h=D(b/v);w.push(M(f(h,0))),s=l(r,m,n==o),r=0,++n}++r,++e}return w.join("")}function g(t){return c(t,function(t){return L.test(t)?d(t.slice(4).toLowerCase()):t})}function m(t){return c(t,function(t){return I.test(t)?"xn--"+y(t):t})}var v="object"==o(e)&&e&&!e.nodeType&&e,b="object"==o(t)&&t&&!t.nodeType&&t,w="object"==("undefined"==typeof global?"undefined":o(global))&&global;w.global!==w&&w.window!==w&&w.self!==w||(s=w);var k,S,x=2147483647,A=36,C=1,B=26,O=38,P=700,j=72,E=128,U="-",L=/^xn--/,I=/[^\x20-\x7E]/,T=/[\x2E\u3002\uFF0E\uFF61]/g,q={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},R=A-C,D=Math.floor,M=String.fromCharCode;if(k={version:"1.3.2",ucs2:{decode:u,encode:h},decode:d,encode:y,toASCII:m,toUnicode:g},"object"==o(r(14))&&r(14))n=function(){return k}.call(e,r,e,t),!(void 0!==n&&(t.exports=n));else if(v&&b)if(t.exports==v)b.exports=k;else for(S in k)k.hasOwnProperty(S)&&(v[S]=k[S]);else s.punycode=k}(void 0)}).call(e,r(13)(t))},function(t,e,r){"use strict";e.decode=e.parse=r(30),e.encode=e.stringify=r(31)},function(t,e){"use strict";function r(t,e){return Object.prototype.hasOwnProperty.call(t,e)}t.exports=function(t,e,n,o){e=e||"&",n=n||"=";var s={};if("string"!=typeof t||0===t.length)return s;var i=/\+/g;t=t.split(e);var a=1e3;o&&"number"==typeof o.maxKeys&&(a=o.maxKeys);var c=t.length;a>0&&c>a&&(c=a);for(var u=0;u<c;++u){var h,p,f,l,d=t[u].replace(i,"%20"),y=d.indexOf(n);y>=0?(h=d.substr(0,y),p=d.substr(y+1)):(h=d,p=""),f=decodeURIComponent(h),l=decodeURIComponent(p),r(s,f)?Array.isArray(s[f])?s[f].push(l):s[f]=[s[f],l]:s[f]=l}return s}},function(t,e){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n=function(t){switch("undefined"==typeof t?"undefined":r(t)){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};t.exports=function(t,e,o,s){return e=e||"&",o=o||"=",null===t&&(t=void 0),"object"===("undefined"==typeof t?"undefined":r(t))?Object.keys(t).map(function(r){var s=encodeURIComponent(n(r))+o;return Array.isArray(t[r])?t[r].map(function(t){return s+encodeURIComponent(n(t))}).join(e):s+encodeURIComponent(n(t[r]))}).join(e):s?encodeURIComponent(n(s))+o+encodeURIComponent(n(t)):""}},function(t,e){"use strict";var r=[].indexOf;t.exports=function(t,e){if(r)return t.indexOf(e);for(var n=0;n<t.length;++n)if(t[n]===e)return n;return-1}},function(t,e){"use strict";var r=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,n=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];t.exports=function(t){var e=t,o=t.indexOf("["),s=t.indexOf("]");o!=-1&&s!=-1&&(t=t.substring(0,o)+t.substring(o,s).replace(/:/g,";")+t.substring(s,t.length));for(var i=r.exec(t||""),a={},c=14;c--;)a[n[c]]=i[c]||"";return o!=-1&&s!=-1&&(a.source=e,a.host=a.host.substring(1,a.host.length-1).replace(/;/g,":"),a.authority=a.authority.replace("[","").replace("]","").replace(/;/g,":"),a.ipv6uri=!0),a}}])});
(function(ns){var CLIENT_VERSION = "2.2.0";var CLIENT_TYPE="WX";ns.wrapper=function(global,goog,wd){
var h,n=this;function p(a){return void 0!==a}function aa(){}function ba(a){a.Ub=function(){return a.Te?a.Te:a.Te=new a}}
function ca(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function ea(a){return"array"==ca(a)}function q(a){return"string"==typeof a}function fa(a){return"number"==typeof a}function ga(a){return"function"==ca(a)}function ha(a){var b=typeof a;return"object"==b&&null!=a||"function"==b}function ia(a,b,c){return a.call.apply(a.bind,arguments)}
function ja(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function r(a,b,c){r=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ia:ja;return r.apply(null,arguments)}
function ka(a,b){var c=a.split("."),d=n;c[0]in d||!d.execScript||d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)!c.length&&p(b)?d[e]=b:d=d[e]?d[e]:d[e]={}}function la(a,b){function c(){}c.prototype=b.prototype;a.eh=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.Ug=function(a,c,f){for(var d=Array(arguments.length-2),e=2;e<arguments.length;e++)d[e-2]=arguments[e];return b.prototype[c].apply(a,d)}};var ma={},na="auth.wilddog.com";var oa={NETWORK_ERROR:"Unable to contact the Wilddog server.",SERVER_ERROR:"An unknown server error occurred.",TRANSPORT_UNAVAILABLE:"There are no login transports available for the requested method.",REQUEST_INTERRUPTED:"The browser redirected the page before the login request could complete.",USER_CANCELLED:"The user cancelled authentication."};function pa(a){var b=t(oa,a),b=Error(b,a);b.code=a;return b};function qa(a,b){return Object.prototype.hasOwnProperty.call(a,b)}function t(a,b){if(Object.prototype.hasOwnProperty.call(a,b))return a[b]}function ra(a,b){for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&b(c,a[c])}function sa(a){var b={};ra(a,function(a,d){b[a]=d});return b};function ta(a){var b=[];ra(a,function(a,d){ea(d)?ua(d,function(c){b.push(encodeURIComponent(a)+"="+encodeURIComponent(c))}):b.push(encodeURIComponent(a)+"="+encodeURIComponent(d))});return b.length?"&"+b.join("&"):""}function va(a){var b={};a=a.replace(/^\?/,"").split("&");ua(a,function(a){a&&(a=a.split("="),b[a[0]]=a[1])});return b};function wa(){var a=window.opener.frames,b;for(b=a.length-1;0<=b;b--)try{if(a[b].location.protocol===window.location.protocol&&a[b].location.host===window.location.host&&"__winchan_relay_frame"===a[b].name)return a[b]}catch(c){}return null}function xa(a,b,c){a.attachEvent?a.attachEvent("on"+b,c):a.addEventListener&&a.addEventListener(b,c,!1)}function ya(a,b){a.detachEvent?a.detachEvent("onmessage",b):a.removeEventListener&&a.removeEventListener("message",b,!1)}
function za(){var a=document.location.hash,b="";try{var a=a.replace("#",""),c=va(a);c&&qa(c,"__wilddog_request_key")&&(b=t(c,"__wilddog_request_key"))}catch(d){}return b}function Aa(){var a=Ba(na);return a.scheme+"://"+a.host+"/v2"}function Ca(a){return Aa()+"/"+a+"/auth/channel"};function Da(){if("undefined"===typeof navigator)return!1;var a=navigator.userAgent;if("Microsoft Internet Explorer"===navigator.appName){if((a=a.match(/MSIE ([0-9]{1,}[\.0-9]{0,})/))&&1<a.length)return 8<=parseFloat(a[1])}else if(-1<a.indexOf("Trident")&&(a=a.match(/rv:([0-9]{2,2}[\.0-9]{0,})/))&&1<a.length)return 8<=parseFloat(a[1]);return!1};function Ea(a){return/^\s*$/.test(a)?!1:/^[\],:{}\s\u2028\u2029]*$/.test(a.replace(/\\["\\\/bfnrtu]/g,"@").replace(/(?:"[^"\\\n\r\u2028\u2029\x00-\x08\x0a-\x1f]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)[\s\u2028\u2029]*(?=:|,|]|}|$)/g,"]").replace(/(?:^|:|,)(?:[\s\u2028\u2029]*\[)+/g,""))}function Fa(a){a=String(a);if(Ea(a))try{return eval("("+a+")")}catch(b){}throw Error("Invalid JSON string: "+a);}function Ga(){this.Cd=void 0}
function Ha(a,b,c){if(null==b)c.push("null");else{if("object"==typeof b){if(ea(b)){var d=b;b=d.length;c.push("[");for(var e="",f=0;f<b;f++)c.push(e),e=d[f],Ha(a,a.Cd?a.Cd.call(d,String(f),e):e,c),e=",";c.push("]");return}if(b instanceof String||b instanceof Number||b instanceof Boolean)b=b.valueOf();else{c.push("{");f="";for(d in b)Object.prototype.hasOwnProperty.call(b,d)&&(e=b[d],"function"!=typeof e&&(c.push(f),Ia(d,c),c.push(":"),Ha(a,a.Cd?a.Cd.call(b,d,e):e,c),f=","));c.push("}");return}}switch(typeof b){case "string":Ia(b,
c);break;case "number":c.push(isFinite(b)&&!isNaN(b)?String(b):"null");break;case "boolean":c.push(String(b));break;case "function":c.push("null");break;default:throw Error("Unknown type: "+typeof b);}}}var Ja={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\x0B":"\\u000b"},Ka=/\uffff/.test("\uffff")?/[\\\"\x00-\x1f\x7f-\uffff]/g:/[\\\"\x00-\x1f\x7f-\xff]/g;
function Ia(a,b){b.push('"',a.replace(Ka,function(a){var b=Ja[a];b||(b="\\u"+(a.charCodeAt(0)|65536).toString(16).substr(1),Ja[a]=b);return b}),'"')};function La(a){return"undefined"!==typeof JSON&&p(JSON.parse)?JSON.parse(a):Fa(a)}function u(a){if("undefined"!==typeof JSON&&p(JSON.stringify))a=JSON.stringify(a);else{var b=[];Ha(new Ga,a,b);a=b.join("")}return a};function Ma(a){a.method||(a.method="GET");a.headers||(a.headers={});this.options=a}Ma.prototype.open=function(a,b,c){var d={Accept:"application/json;text/plain"};Na(d,this.options.headers);a={url:a,method:this.options.method.toUpperCase(),header:d,success:function(a){c&&(c(null,a.data),c=null)},fail:function(a){500<=a.ye&&600>a.ye?c(pa("SERVER_ERROR")):c(pa("NETWORK_ERROR"));c=null}};a.data=b;a.headers=d;wx.request(a)};Ma.isAvailable=function(){return wx&&wx.request};function Oa(){}Oa.prototype.open=function(a,b,c){wx.login({success:function(b){b.code?Pa(b.code,a,c):c(Error("\u5fae\u4fe1\u670d\u52a1\u7aef\u672a\u8fd4\u56decode"))},fail:function(a){c(Error("\u83b7\u53d6\u7528\u6237\u767b\u9646\u72b6\u6001\u5931\u8d25,res.Msg:"+a.Wg),null)}})};
function Pa(a,b,c){wx.request({url:b,method:"POST",header:{Accept:"application/json;text/plain"},success:function(a){a.data?null!=a.data.idToken?c(null,a.data):a.data.error?c(Error(a.data.error)):c(Error("unkown error:"+a.data)):c(Error("unkown error: no data returned"));c=null},fail:function(a){500<=a.ye&&600>a.ye?c(pa("SERVER_ERROR")):c(pa("NETWORK_ERROR"));c=null},data:{code:a}})}Oa.isAvailable=function(){return wx&&wx.request};function Qa(){this.qc={}}Qa.prototype.set=function(a,b){null==b?delete this.qc[a]:this.qc[a]=b};Qa.prototype.get=function(a){return qa(this.qc,a)?this.qc[a]:null};Qa.prototype.remove=function(a){delete this.qc[a]};function Ra(){this.zd="wilddog123:"}Ra.prototype.set=function(a,b){null==b?wx.removeStorageSync(this.zd+name):wx.setStorageSync(this.zd+name,b)};Ra.prototype.get=function(){var a;try{a=wx.getStorageSync(this.zd+name)}catch(b){}return null==a||""==a?null:a};Ra.prototype.remove=function(){wx.removeStorageSync(this.zd+name)};Ra.prototype.toString=function(){return"wx-storage:{}"};var Sa=new Ra,v=new Qa;function Ta(a){var b=[];a.forEach(function(a){null!=this.Xe[a]&&b.push(this.Xe[a])},Ua);return b}var Ua=new function(){this.Xe={WxHttp:Ma,WxImplicit:Oa};this.Sc="s-dalwx-nss-1.wilddogio.com"};function Va(){this.hb=-1};function Wa(){this.hb=64;this.U=[];this.Wd=[];this.zf=[];this.xd=[];this.xd[0]=128;for(var a=1;a<this.hb;++a)this.xd[a]=0;this.Nd=this.Zb=0;this.reset()}la(Wa,Va);Wa.prototype.reset=function(){this.U[0]=1732584193;this.U[1]=4023233417;this.U[2]=2562383102;this.U[3]=271733878;this.U[4]=3285377520;this.Nd=this.Zb=0};
function Xa(a,b,c){c||(c=0);var d=a.zf;if(q(b))for(var e=0;16>e;e++)d[e]=b.charCodeAt(c)<<24|b.charCodeAt(c+1)<<16|b.charCodeAt(c+2)<<8|b.charCodeAt(c+3),c+=4;else for(e=0;16>e;e++)d[e]=b[c]<<24|b[c+1]<<16|b[c+2]<<8|b[c+3],c+=4;for(e=16;80>e;e++){var f=d[e-3]^d[e-8]^d[e-14]^d[e-16];d[e]=(f<<1|f>>>31)&4294967295}b=a.U[0];c=a.U[1];for(var g=a.U[2],k=a.U[3],l=a.U[4],m,e=0;80>e;e++)40>e?20>e?(f=k^c&(g^k),m=1518500249):(f=c^g^k,m=1859775393):60>e?(f=c&g|k&(c|g),m=2400959708):(f=c^g^k,m=3395469782),f=(b<<
5|b>>>27)+f+l+m+d[e]&4294967295,l=k,k=g,g=(c<<30|c>>>2)&4294967295,c=b,b=f;a.U[0]=a.U[0]+b&4294967295;a.U[1]=a.U[1]+c&4294967295;a.U[2]=a.U[2]+g&4294967295;a.U[3]=a.U[3]+k&4294967295;a.U[4]=a.U[4]+l&4294967295}
Wa.prototype.update=function(a,b){if(null!=a){p(b)||(b=a.length);for(var c=b-this.hb,d=0,e=this.Wd,f=this.Zb;d<b;){if(0==f)for(;d<=c;)Xa(this,a,d),d+=this.hb;if(q(a))for(;d<b;){if(e[f]=a.charCodeAt(d),++f,++d,f==this.hb){Xa(this,e);f=0;break}}else for(;d<b;)if(e[f]=a[d],++f,++d,f==this.hb){Xa(this,e);f=0;break}}this.Zb=f;this.Nd+=b}};
Wa.prototype.digest=function(){var a=[],b=8*this.Nd;56>this.Zb?this.update(this.xd,56-this.Zb):this.update(this.xd,this.hb-(this.Zb-56));for(var c=this.hb-1;56<=c;c--)this.Wd[c]=b&255,b/=256;Xa(this,this.Wd);for(c=b=0;5>c;c++)for(var d=24;0<=d;d-=8)a[b]=this.U[c]>>d&255,++b;return a};function Ya(a){if(Error.captureStackTrace)Error.captureStackTrace(this,Ya);else{var b=Error().stack;b&&(this.stack=b)}a&&(this.message=String(a))}la(Ya,Error);Ya.prototype.name="CustomError";var Za=Array.prototype.indexOf?function(a,b,c){return Array.prototype.indexOf.call(a,b,c)}:function(a,b,c){c=null==c?0:0>c?Math.max(0,a.length+c):c;if(q(a))return q(b)&&1==b.length?a.indexOf(b,c):-1;for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},ua=Array.prototype.forEach?function(a,b,c){Array.prototype.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=q(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)},$a=Array.prototype.filter?function(a,b,c){return Array.prototype.filter.call(a,
b,c)}:function(a,b,c){for(var d=a.length,e=[],f=0,g=q(a)?a.split(""):a,k=0;k<d;k++)if(k in g){var l=g[k];b.call(c,l,k,a)&&(e[f++]=l)}return e},ab=Array.prototype.map?function(a,b,c){return Array.prototype.map.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=Array(d),f=q(a)?a.split(""):a,g=0;g<d;g++)g in f&&(e[g]=b.call(c,f[g],g,a));return e},bb=Array.prototype.reduce?function(a,b,c,d){d&&(b=r(b,d));return Array.prototype.reduce.call(a,b,c)}:function(a,b,c,d){var e=c;ua(a,function(c,g){e=b.call(d,
e,c,g,a)});return e},cb=Array.prototype.every?function(a,b,c){return Array.prototype.every.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=q(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&!b.call(c,e[f],f,a))return!1;return!0};function db(a,b){var c=eb(a,b,void 0);return 0>c?null:q(a)?a.charAt(c):a[c]}function eb(a,b,c){for(var d=a.length,e=q(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&b.call(c,e[f],f,a))return f;return-1}function fb(a,b){var c=Za(a,b);0<=c&&Array.prototype.splice.call(a,c,1)}
function gb(a,b){a.sort(b||hb)}function hb(a,b){return a>b?1:a<b?-1:0};var ib;a:{var jb=n.navigator;if(jb){var kb=jb.userAgent;if(kb){ib=kb;break a}}ib=""};function w(a,b){for(var c in a)b.call(void 0,a[c],c,a)}function lb(a,b){var c={},d;for(d in a)c[d]=b.call(void 0,a[d],d,a);return c}function mb(a,b){for(var c in a)if(!b.call(void 0,a[c],c,a))return!1;return!0}function nb(a){var b=0,c;for(c in a)b++;return b}function ob(a){for(var b in a)return b}function pb(a){var b=[],c=0,d;for(d in a)b[c++]=a[d];return b}function qb(a){var b=[],c=0,d;for(d in a)b[c++]=d;return b}function rb(a,b){return null!==a&&b in a}
function sb(a,b){for(var c in a)if(a[c]==b)return!0;return!1}function tb(a,b,c){for(var d in a)if(b.call(c,a[d],d,a))return d}function ub(a,b){var c=tb(a,b,void 0);return c&&a[c]}function vb(a){for(var b in a)return!1;return!0}function wb(a){var b={},c;for(c in a)b[c]=a[c];return b}var xb="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");
function Na(a,b){for(var c,d,e=1;e<arguments.length;e++){d=arguments[e];for(c in d)a[c]=d[c];for(var f=0;f<xb.length;f++)c=xb[f],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}};var yb=null,zb=null;function Ab(a){var b="";Bb(a,function(a){b+=String.fromCharCode(a)});return b}function Bb(a,b){function c(b){for(;d<a.length;){var c=a.charAt(d++),e=zb[c];if(null!=e)return e;if(!/^[\s\xa0]*$/.test(c))throw Error("Unknown base64 encoding at char: "+c);}return b}Cb();for(var d=0;;){var e=c(-1),f=c(0),g=c(64),k=c(64);if(64===k&&-1===e)break;b(e<<2|f>>4);64!=g&&(b(f<<4&240|g>>2),64!=k&&b(g<<6&192|k))}}
function Cb(){if(!yb){yb={};zb={};for(var a=0;65>a;a++)yb[a]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(a),zb[yb[a]]=a,62<=a&&(zb["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_.".charAt(a)]=a)}};var Db=function(){var a=1;return function(){return a++}}();function x(a,b){if(!a)throw Eb(b);}function Eb(a){return Error("Wilddog ("+Wilddog.Be+") INTERNAL ASSERT FAILED: "+a)}function Fb(a){try{return"NODE"==CLIENT_TYPE?(new Buffer(a,"base64")).toString("utf8"):"undefined"!==typeof atob?atob(a):Ab(a)}catch(b){Gb("base64Decode failed: ",b)}return null}
function Hb(a){for(var b=[],c=0,d=0;d<a.length;d++){var e=a.charCodeAt(d);55296<=e&&56319>=e&&(e-=55296,d++,x(d<a.length,"Surrogate pair missing trail surrogate."),e=65536+(e<<10)+(a.charCodeAt(d)-56320));128>e?b[c++]=e:(2048>e?b[c++]=e>>6|192:(65536>e?b[c++]=e>>12|224:(b[c++]=e>>18|240,b[c++]=e>>12&63|128),b[c++]=e>>6&63|128),b[c++]=e&63|128)}a=new Wa;a.update(b);b=a.digest();Cb();a=yb;c=[];for(d=0;d<b.length;d+=3){var f=b[d],g=(e=d+1<b.length)?b[d+1]:0,k=d+2<b.length,l=k?b[d+2]:0,m=f>>2,f=(f&3)<<
4|g>>4,g=(g&15)<<2|l>>6,l=l&63;k||(l=64,e||(g=64));c.push(a[m],a[f],a[g],a[l])}return c.join("")}function Ib(a){for(var b="",c=0;c<arguments.length;c++)var d=arguments[c],e=ca(d),b="array"==e||"object"==e&&"number"==typeof d.length?b+Ib.apply(null,arguments[c]):"object"===typeof arguments[c]?b+u(arguments[c]):b+arguments[c],b=b+" ";return b}var Jb=null,Kb=!0;function Gb(a){!0===Kb&&(Kb=!1,null===Jb&&!0===v.get("logging_enabled")&&Wilddog.Je(!0));if(Jb){var b=Ib.apply(null,arguments);Jb(b)}}
function Lb(a){return function(){Gb(a,arguments)}}function Mb(a){if("undefined"!==typeof console){var b="WILDDOG INTERNAL ERROR: "+Ib.apply(null,arguments);"undefined"!==typeof console.error?console.error(b):console.log(b)}}function Nb(a){var b=Ib.apply(null,arguments);throw Error("WILDDOG FATAL ERROR: "+b);}function y(a){if("undefined"!==typeof console){var b="WILDDOG WARNING: "+Ib.apply(null,arguments);"undefined"!==typeof console.warn?console.warn(b):console.log(b)}}
function Ba(a){var b="",c="",d="",e="",f=!0,g="https",k=443;if(q(a)){var l=a.indexOf("//");0<=l&&(g=a.substring(0,l-1),a=a.substring(l+2));l=a.indexOf("/");-1===l&&(l=a.length);b=a.substring(0,l);e="";a=a.substring(l).split("/");for(l=0;l<a.length;l++)if(0<a[l].length){var m=a[l];try{m=decodeURIComponent(m.replace(/\+/g," "))}catch(P){}e+="/"+m}a=b.split(".");3===a.length?(c=a[1],d=a[0].toLowerCase()):2===a.length&&(c=a[0]);l=b.indexOf(":");0<=l&&(f="https"===g||"wss"===g,k=b.substring(l+1),isFinite(k)&&
(k=String(k)),k=q(k)?/^\s*-?0x/i.test(k)?parseInt(k,16):parseInt(k,10):NaN)}return{host:b,port:k,domain:c,Gg:d,Gb:f,scheme:g,Oc:e}}function Ob(a){return fa(a)&&(a!=a||a==Number.POSITIVE_INFINITY||a==Number.NEGATIVE_INFINITY)}function Pb(a,b){if(a===b)return 0;if("[MIN_NAME]"===a||"[MAX_NAME]"===b)return-1;if("[MIN_NAME]"===b||"[MAX_NAME]"===a)return 1;var c=Qb(a),d=Qb(b);return null!==c?null!==d?0==c-d?a.length-b.length:c-d:-1:null!==d?1:a<b?-1:1}
function Rb(a){if("object"!==typeof a||null===a)return u(a);var b=[],c;for(c in a)b.push(c);b.sort();c="{";for(var d=0;d<b.length;d++)0!==d&&(c+=","),c+=u(b[d]),c+=":",c+=Rb(a[b[d]]);return c+"}"}function Sb(a,b){if(ea(a))for(var c=0;c<a.length;++c)b(c,a[c]);else w(a,b)}
function Tb(a){x(!Ob(a),"Invalid JSON number");var b,c,d,e;0===a?(d=c=0,b=-Infinity===1/a?1:0):(b=0>a,a=Math.abs(a),a>=Math.pow(2,-1022)?(d=Math.min(Math.floor(Math.log(a)/Math.LN2),1023),c=d+1023,d=Math.round(a*Math.pow(2,52-d)-Math.pow(2,52))):(c=0,d=Math.round(a/Math.pow(2,-1074))));e=[];for(a=52;a;--a)e.push(d%2?1:0),d=Math.floor(d/2);for(a=11;a;--a)e.push(c%2?1:0),c=Math.floor(c/2);e.push(b?1:0);e.reverse();b=e.join("");c="";for(a=0;64>a;a+=8)d=parseInt(b.substr(a,8),2).toString(16),1===d.length&&
(d="0"+d),c+=d;return c.toLowerCase()}var Ub=/^-?\d{1,10}$/;function Qb(a){return Ub.test(a)&&(a=Number(a),-2147483648<=a&&2147483647>=a)?a:null}function Vb(a){try{a()}catch(b){setTimeout(function(){y("Exception was thrown by user callback.",b.stack||"");throw b;},Math.floor(0))}}function z(a,b){if(ga(a)){var c=Array.prototype.slice.call(arguments,1).slice();Vb(function(){a.apply(null,c)})}};function Wb(a){x(ea(a)&&0<a.length,"Requires a non-empty array");this.Bf=a;this.Dc={}}Wb.prototype.Od=function(a,b){for(var c=this.Dc[a]||[],d=0;d<c.length;d++)c[d].sc.apply(c[d].context,Array.prototype.slice.call(arguments,1))};Wb.prototype.Ab=function(a,b,c){Xb(this,a);this.Dc[a]=this.Dc[a]||[];this.Dc[a].push({sc:b,context:c});(a=this.fe(a))&&b.apply(c,a)};
Wb.prototype.ec=function(a,b,c){Xb(this,a);a=this.Dc[a]||[];for(var d=0;d<a.length;d++)if(a[d].sc===b&&(!c||c===a[d].context)){a.splice(d,1);break}};function Xb(a,b){x(db(a.Bf,function(a){return a===b}),"Unknown event: "+b)};function A(a,b){Wb.call(this,["authStateChanged","authTokenExpired"]);this.Af={pf:!1};this.Ce={};Object.defineProperty(this,"name",{value:b,writable:!1});Object.defineProperty(this,"options",{value:a,writable:!1})}la(A,Wb);function Yb(a,b){A.prototype[a]=function(){return b(this)}}A.prototype.Of=function(a,b){var c=!0,d;for(d in Zb)if(Zb.hasOwnProperty(d)&&Zb[d]===a){c=!1;break}if(c)throw Error("Unknown event "+a);this.Ce[a]=b;switch(a){case Zb.gb:this.Af.pf=b&&b.pf}this.Od(a,b)};
A.prototype.emit=A.prototype.Of;A.prototype.bind=function(a,b){this.Ab(a,b)};A.prototype.bind=A.prototype.bind;A.prototype.Ig=function(a,b){this.ec(a,b)};A.prototype.unbind=A.prototype.Ig;A.prototype.fe=function(a){switch(a){case Zb.gb:return[this.Ce[Zb.gb]]}return null};var Zb={gb:"authStateChanged",Ge:"authTokenExpired"};A.prototype.qb=Zb;function $b(a,b,c,d,e,f){this.uid=e;this.displayName=a;this.phone=f;this.email=b;this.photoURL=c;this.providerId=d};function ac(a,b,c){this.ea=c;this.Lf=a;this.og=b;this.td=0;this.hd=null}ac.prototype.get=function(){var a;0<this.td?(this.td--,a=this.hd,this.hd=a.next,a.next=null):a=this.Lf();return a};ac.prototype.put=function(a){this.og(a);this.td<this.ea&&(this.td++,a.next=this.hd,this.hd=a)};function bc(){this.Rd=this.oc=null}var dc=new ac(function(){return new cc},function(a){a.reset()},100);bc.prototype.add=function(a,b){var c=dc.get();c.set(a,b);this.Rd?this.Rd.next=c:this.oc=c;this.Rd=c};bc.prototype.remove=function(){var a=null;this.oc&&(a=this.oc,this.oc=this.oc.next,this.oc||(this.Rd=null),a.next=null);return a};function cc(){this.next=this.scope=this.be=null}cc.prototype.set=function(a,b){this.be=a;this.scope=b;this.next=null};
cc.prototype.reset=function(){this.next=this.scope=this.be=null};function ec(a){n.setTimeout(function(){throw a;},0)}var fc;
function gc(){var a=n.MessageChannel;"undefined"===typeof a&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&-1==ib.indexOf("Presto")&&(a=function(){var a=document.createElement("IFRAME");a.style.display="none";a.src="";document.documentElement.appendChild(a);var b=a.contentWindow,a=b.document;a.open();a.write("");a.close();var c="callImmediate"+Math.random(),d="file:"==b.location.protocol?"*":b.location.protocol+"//"+b.location.host,a=r(function(a){if(("*"==d||a.origin==
d)&&a.data==c)this.port1.onmessage()},this);b.addEventListener("message",a,!1);this.port1={};this.port2={postMessage:function(){b.postMessage(c,d)}}});if("undefined"!==typeof a&&-1==ib.indexOf("Trident")&&-1==ib.indexOf("MSIE")){var b=new a,c={},d=c;b.port1.onmessage=function(){if(p(c.next)){c=c.next;var a=c.jb;c.jb=null;a()}};return function(a){d.next={jb:a};d=d.next;b.port2.postMessage(0)}}return"undefined"!==typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(a){var b=
document.createElement("SCRIPT");b.onreadystatechange=function(){b.onreadystatechange=null;b.parentNode.removeChild(b);b=null;a();a=null};document.documentElement.appendChild(b)}:function(a){n.setTimeout(a,0)}};function hc(a,b){ic||jc();kc||(ic(),kc=!0);lc.add(a,b)}var ic;function jc(){var a=n.Promise;if(-1!=String(a).indexOf("[native code]")){var b=a.resolve(void 0);ic=function(){b.then(mc)}}else ic=function(){var a=mc,b;!(b=!ga(n.setImmediate))&&(b=n.Window&&n.Window.prototype)&&(b=-1==ib.indexOf("Edge")&&n.Window.prototype.setImmediate==n.setImmediate);b?(fc||(fc=gc()),fc(a)):n.setImmediate(a)}}var kc=!1,lc=new bc;
function mc(){for(var a;a=lc.remove();){try{a.be.call(a.scope)}catch(b){ec(b)}dc.put(a)}kc=!1};function nc(a,b){this.Z=oc;this.mf=void 0;this.Nb=this.ib=this.Aa=null;this.ed=this.$d=!1;if(a!=aa)try{var c=this;a.call(b,function(a){pc(c,qc,a)},function(a){if(!(a instanceof rc))try{if(a instanceof Error)throw a;throw Error("Promise rejected.");}catch(e){}pc(c,sc,a)})}catch(d){pc(this,sc,d)}}var oc=0,qc=2,sc=3;function tc(){this.next=this.context=this.fc=this.Kc=this.u=null;this.Uc=!1}tc.prototype.reset=function(){this.context=this.fc=this.Kc=this.u=null;this.Uc=!1};
var uc=new ac(function(){return new tc},function(a){a.reset()},100);function vc(a,b,c){var d=uc.get();d.Kc=a;d.fc=b;d.context=c;return d}nc.prototype.then=function(a,b,c){return wc(this,ga(a)?a:null,ga(b)?b:null,c)};nc.prototype.then=nc.prototype.then;nc.prototype.$goog_Thenable=!0;h=nc.prototype;h.Hg=function(a,b){return wc(this,null,a,b)};h.cancel=function(a){this.Z==oc&&hc(function(){var b=new rc(a);xc(this,b)},this)};
function xc(a,b){if(a.Z==oc)if(a.Aa){var c=a.Aa;if(c.ib){for(var d=0,e=null,f=null,g=c.ib;g&&(g.Uc||(d++,g.u==a&&(e=g),!(e&&1<d)));g=g.next)e||(f=g);e&&(c.Z==oc&&1==d?xc(c,b):(f?(d=f,d.next==c.Nb&&(c.Nb=d),d.next=d.next.next):yc(c),zc(c,e,sc,b)))}a.Aa=null}else pc(a,sc,b)}function Ac(a,b){a.ib||a.Z!=qc&&a.Z!=sc||Bc(a);a.Nb?a.Nb.next=b:a.ib=b;a.Nb=b}
function wc(a,b,c,d){var e=vc(null,null,null);e.u=new nc(function(a,g){e.Kc=b?function(c){try{var e=b.call(d,c);a(e)}catch(m){g(m)}}:a;e.fc=c?function(b){try{var e=c.call(d,b);!p(e)&&b instanceof rc?g(b):a(e)}catch(m){g(m)}}:g});e.u.Aa=a;Ac(a,e);return e.u}h.Jg=function(a){this.Z=oc;pc(this,qc,a)};h.Kg=function(a){this.Z=oc;pc(this,sc,a)};
function pc(a,b,c){if(a.Z==oc){a===c&&(b=sc,c=new TypeError("Promise cannot resolve to itself"));a.Z=1;var d;a:{var e=c,f=a.Jg,g=a.Kg;if(e instanceof nc)Ac(e,vc(f||aa,g||null,a)),d=!0;else{var k;if(e)try{k=!!e.$goog_Thenable}catch(m){k=!1}else k=!1;if(k)e.then(f,g,a),d=!0;else{if(ha(e))try{var l=e.then;if(ga(l)){Cc(e,l,f,g,a);d=!0;break a}}catch(m){g.call(a,m);d=!0;break a}d=!1}}}d||(a.mf=c,a.Z=b,a.Aa=null,Bc(a),b!=sc||c instanceof rc||Dc(a,c))}}
function Cc(a,b,c,d,e){function f(a){k||(k=!0,d.call(e,a))}function g(a){k||(k=!0,c.call(e,a))}var k=!1;try{b.call(a,g,f)}catch(l){f(l)}}function Bc(a){a.$d||(a.$d=!0,hc(a.Rf,a))}function yc(a){var b=null;a.ib&&(b=a.ib,a.ib=b.next,b.next=null);a.ib||(a.Nb=null);return b}h.Rf=function(){for(var a;a=yc(this);)zc(this,a,this.Z,this.mf);this.$d=!1};
function zc(a,b,c,d){if(c==sc&&b.fc&&!b.Uc)for(;a&&a.ed;a=a.Aa)a.ed=!1;if(b.u)b.u.Aa=null,Ec(b,c,d);else try{b.Uc?b.Kc.call(b.context):Ec(b,c,d)}catch(e){Fc.call(null,e)}uc.put(b)}function Ec(a,b,c){b==qc?a.Kc.call(a.context,c):a.fc&&a.fc.call(a.context,c)}function Dc(a,b){a.ed=!0;hc(function(){a.ed&&Fc.call(null,b)})}var Fc=ec;function rc(a){Ya.call(this,a)}la(rc,Ya);rc.prototype.name="cancel";var Gc="undefined"!=typeof Promise?Promise:"undefined"!=typeof n.Promise?n.Promise:nc;n.setTimeout||(n.setTimeout=function(){global.setTimeout.apply(global,arguments)});nc.prototype["catch"]=nc.prototype.Hg;function C(){var a=this;this.reject=this.resolve=null;this.o=new Gc(function(b,c){a.resolve=b;a.reject=c})}function D(a,b){return function(c,d){c?a.reject(c):a.resolve(d);ga(b)&&(Hc(a.o),1===b.length?b(c):b(c,d))}}function Hc(a){a.then(void 0,aa)};function E(a,b,c,d,e){$b.call(this,b.displayName,b.email,b.photoURL,b.providerId,b.uid,b.phone);this.isAnonymous="anonymous"===this.$g;this.emailVerified=!0===c;this.phoneVerified=!0===d;this.providerData=e||[];this.refreshToken=null;Object.defineProperty(this,"__authManager",{value:a,writable:!1})}la(E,$b);ka("wd.User",E);E.prototype["delete"]=function(a){var b=new C;Ic(this.__authManager,this.Fa(),D(b,a));return b.o};E.prototype["delete"]=E.prototype["delete"];
E.prototype.Fa=function(){return(this.__authManager.Pa||null).idToken};E.prototype.getToken=E.prototype.Fa;E.prototype.ge=function(){return this.phone};E.prototype.getPhone=E.prototype.ge;
E.prototype.link=function(a,b){F("wilddog.User.link",1,2,arguments.length);Jc("wilddog.User.link",a);var c=a.provider,d=new C,e={};e.idToken=this.Fa();"password"==c?(e.email=a.email,e.password=a.password,Kc(this.__authManager,e,D(d,b))):(e.providerId=a.provider,e.accessToken=a.accessToken,e.openId=a.openId||"",e.authType="link",Lc(this.__authManager,e,D(d,b)));return d.o};E.prototype.link=E.prototype.link;
E.prototype.Lg=function(a,b){F("wilddog.User.unlink",1,2,arguments.length);Mc("wilddog.User.unlink",1,a);var c=new C,d=this;Nc(this.__authManager,"unlink",{idToken:this.Fa(),deleteProvider:[a]},D(c,function(c,f){f&&(d.providerData=d.providerData.filter(function(b){if(b.providerId!=a)return b}),0===d.providerData.length&&(Oc(d.__authManager,null),z(void 0,null)));b&&b(c,f)}));return c.o};E.prototype.unlink=E.prototype.Lg;
E.prototype.ag=function(a,b){F("wilddog.auth().signInWithPopup",1,2,arguments.length);Jc("wilddog.auth().signInWithPopup",a);var c=new C;Pc(this.__authManager,a,{authType:"link",idToken:this.Fa()},D(c,b));return c.o};E.prototype.linkWithPopup=E.prototype.ag;E.prototype.bg=function(a,b){F("wilddog.auth().signInWithPopup",1,2,arguments.length);Jc("wilddog.auth().signInWithPopup",a);var c=new C;Qc(this.__authManager,a,{authType:"link",idToken:this.Fa()},D(c,b));return c.o};
E.prototype.linkWithRedirect=E.prototype.bg;E.prototype.Pg=function(a,b){F("wilddog.User.updateProfile",1,2,arguments.length);Jc("wilddog.User.updateProfile",a);var c=new C;a.idToken=this.Fa();Nc(this.__authManager,"profile",a,D(c,b));return c.o};E.prototype.updateProfile=E.prototype.Pg;E.prototype.Mg=function(a,b){F("wilddog.User.updateEmail",1,2,arguments.length);Mc("wilddog.User.updateEmail",1,a);var c=new C;Kc(this.__authManager,{email:a,idToken:this.Fa()},D(c,b));return c.o};
E.prototype.updateEmail=E.prototype.Mg;E.prototype.Og=function(a,b){F("wilddog.User.updatePhone",1,2,arguments.length);Mc("wilddog.User.updatePhone",1,a);var c=new C;Kc(this.__authManager,{phoneNumber:a,idToken:this.Fa()},D(c,b));return c.o};E.prototype.updatePhone=E.prototype.Og;E.prototype.Rg=function(a,b){F("wilddog.User.verifiyPhone",1,2,arguments.length);Mc("wilddog.User.verifiyPhone",1,a);var c=new C;Rc(this.__authManager,{phoneNumber:this.ge(),smsCode:a},D(c,b));return c.o};
E.prototype.verifiyPhone=E.prototype.Rg;E.prototype.Ng=function(a,b){F("wilddog.User.updatePassword",1,2,arguments.length);Mc("wilddog.User.updatePassword",1,a);var c=new C;Kc(this.__authManager,{password:a,idToken:this.Fa()},D(c,b));return c.o};E.prototype.updatePassword=E.prototype.Ng;
E.prototype.pg=function(a){F("wilddog.User.sendEmailVerification",0,1,arguments.length);G("wilddog.User.sendEmailVerification",1,a,!0);var b=new C;Sc(this.__authManager,{idToken:this.Fa(),requestType:"VERIFY_EMAIL"},D(b,a));return b.o};E.prototype.sendEmailVerification=E.prototype.pg;
E.prototype.sg=function(a){F("wilddog.User.sendPhoneVerification",0,1,arguments.length);G("wilddog.User.sendPhoneVerification",1,a,!0);var b=new C;Tc(this.__authManager,{phoneNumber:this.ge(),type:"PHONE_VERIFY"},D(b,a));return b.o};E.prototype.sendPhoneVerification=E.prototype.sg;E.prototype.reload=function(a){F("wilddog.User.reload",0,1,arguments.length);G("wilddog.User.reload",1,a,!0);var b=new C;Uc(this.__authManager,this.Fa(),D(b,a));return b.o};E.prototype.reload=E.prototype.reload;
E.prototype.lg=function(a,b){F("wilddog.User.reload",1,2,arguments.length);G("wilddog.User.reload",2,b,!0);if(!a||!a.provider)throw Error("Unknown credential object.");var c=new C;Lc(this.__authManager,a,D(c,b));return c.o};E.prototype.reauthenticate=E.prototype.lg;function Vc(a){if(a&&a.users&&a.users[0])return a=a.users[0],new $b(a.displayName,a.email,a.photoUrl,a.providerId,a.localId,a.phoneNumber);throw Error("Bad response format.");}function Wc(a,b){var c=Vc(b);if(!c)return null;var d=b.users[0],e=d.providerUserInfo.map(function(a){a.photoURL=a.photoUrl;delete a.photoUrl;return a});return new E(a,c,d.emailVerified,d.phoneVerified,e)};function Xc(a){var b={},c={},d={},e="";try{var f=a.split("."),g=Fb(f[0])||"",k=Fb(f[1])||"",b=La(g),c=La(k),e=f[2],d=c.d||{};delete c.d}catch(l){console.warn("error",l)}return{Yg:b,Yd:c,data:d,ah:e}}function Yc(a){a=Xc(a).Yd;return"object"===typeof a&&a.hasOwnProperty("iat")?t(a,"iat"):null};function Zc(a,b,c){this.re=["session",b.yd,b.pc,a].join(":");this.Ld=c}Zc.prototype.set=function(a,b){if(!b)if(this.Ld.length)b=this.Ld[0];else throw Error("wd.auth.SessionManager : No storage options available!");b.set(this.re,a)};Zc.prototype.get=function(){var a=ab(this.Ld,r(this.Wf,this)),a=$a(a,function(a){return null!==a});gb(a,function(a,c){return Yc(c.idToken)-Yc(a.idToken)});return 0<a.length?a.shift():null};Zc.prototype.Wf=function(a){try{var b=a.get(this.re);if(b.idToken)return b;this.clear(a)}catch(c){}return null};
Zc.prototype.clear=function(){var a=this;ua(this.Ld,function(b){b.remove(a.re)})};function $c(a,b,c){this.Yc=a||{};this.Tc=b||{};this.Y=c||{};this.Yc.remember||(this.Yc.remember="default")}var ad=["remember","redirectTo"];function bd(a){var b={},c={};ra(a||{},function(a,e){0<=Za(ad,a)?b[a]=e:c[a]=e});return new $c(b,{},c)};function cd(a,b,c){this.Mb=a;this.la=a.app;this.Lb=b;this.kc=new Zc(this.la.name,b,[Sa,v]);this.Pa=null;this.Bb=c;dd(this)}function dd(a){v.get("redirect_request_id")&&ed(a);var b=a.kc.get();b&&b.idToken?Uc(a,b.idToken,function(c,d){if(!c&&d){var e={signIn:!0};e.currentUser=d;e.idToken=b.idToken;Oc(a,e);fd(a,e,{})}else Oc(a,null)}):Oc(a,null)}function gd(a,b,c,d){b&&b.idToken?hd(a,b.idToken,c,d):(Oc(a,null),z(d,Error("No idToken found in response.")))}
function hd(a,b,c,d){Uc(a,b,function(e,f){if(!e&&f){var g={signIn:!0};g.currentUser=f;g.idToken=b;Oc(a,g);fd(a,g,c);z(d,e,f)}else Oc(a,null),z(d,e)})}
function Lc(a,b,c){id(a);var d=new $c({},{},b||{}),e;e="POST";switch(b.providerId||b.provider){case "password":b="verifyPassword";break;case "anonymous":b="verifyAnonymous";break;case "custom":b="verifyCustomToken";break;default:b="credential",e="GET"}if(!b)throw Error("Unknown provider '"+provider+"'.");e={path:b,method:e};d.Y._method=e.method;b=Ta(["XHR","JSONP","NodeHttp","WxHttp"]);jd(a,b,"/auth/"+e.path,d,c)}
function Pc(a,b,c,d){id(a);var e=Ta(["Popup","Cordova"]);requestInfo=bd(c);height=width=625;b.id?(requestInfo.Y.providerId=b.id,requestInfo.Y.scope=b.scope||"",requestInfo.Y.appId=a.Lb.pc,requestInfo.Tc.window_features="menubar=yes,modal=yes,alwaysRaised=yeslocation=yes,resizable=yes,scrollbars=yes,status=yes,height="+height+",width="+width+",top="+("object"===typeof screen?.5*(screen.height-height):0)+",left="+("object"===typeof screen?.5*(screen.width-width):0),requestInfo.Tc.relay_url=Ca(a.Lb.pc),
requestInfo.Tc.requestWithCredential=r(a.Xa,a),jd(a,e,"/auth/oauth",requestInfo,d)):setTimeout(function(){z(d,pa("TRANSPORT_UNAVAILABLE_FOR_UNKNOWN_PROVIDER"))},0)}function Qc(a,b,c,d){id(a);var e=Ta(["Redirect"]);c=bd(c);b.id?(c.Y.providerId=b.id,c.Y.scope=b.scope||"",c.Y.appId=a.Lb.pc,v.set("redirect_client_options",c.Yc),jd(a,e,"/auth/oauth",c,d)):z(d,pa("TRANSPORT_UNAVAILABLE"))}
function ed(a){var b=v.get("redirect_request_id");if(b){var c=v.get("redirect_client_options"),d=Ta(["XHR","JSONP"]);serverParams={requestId:b,requestKey:za()};transportOptions={};requestInfo=new $c(c,transportOptions,serverParams);try{document.location.hash=document.location.hash.replace(/&__wilddog_request_key=([a-zA-z0-9]*)/,"")}catch(e){}jd(a,d,"/auth/session",requestInfo,function(){v.remove("redirect_request_id");v.remove("redirect_client_options")}.bind(a))}}
function kd(a,b,c){id(a);b=bd(b);b.Y._method="POST";a.Xa("/auth/signupNewUser",b,function(b,e){!b&&e&&e.idToken?hd(a,e.idToken,null,c):z(c,b)})}function Nc(a,b,c,d){var e={idToken:c.idToken},f=c.photoURL||a.Pa.currentUser.photoURL,g=c.displayName||a.Pa.currentUser.displayName;switch(b){case "unlink":e.deleteProvider=c.deleteProvider;break;case "profile":e.photoUrl=f,e.displayName=g}ld(a,e,function(b,c){b?z(d,b):(a.Pa.currentUser.displayName=g,a.Pa.currentUser.photoURL=f,fd(a,a.Pa),z(d,b,c))})}
function Kc(a,b,c){ld(a,b,function(b,e){b?z(c,b):gd(a,e,{},c)})}function ld(a,b,c){b=bd(b);b.Y._method="POST";b.Y.idToken=a.Pa.idToken;a.Xa("/auth/setAccountInfo",b,function(a,b){a?z(c,a):z(c,a,b)})}function Uc(a,b,c){id(a);b=bd({idToken:b});b.Y._method="POST";a.Xa("/auth/getAccountInfo",b,function(b,e){b?z(c,b):z(c,b,Wc(a,e))})}
function Ic(a,b,c){id(a);b=bd({idToken:b});b.Y._method="POST";a.Xa("/auth/deleteAccount",b,function(b,e){!b&&e&&"ok"==e.status&&a.Pa&&(Oc(a,null),z(void 0,null));z(c,b)})}function Sc(a,b,c){id(a);b=bd(b);b.Y._method="POST";a.Xa("/auth/getOobConfirmationCode",b,function(a,b){z(c,a,b)})}cd.prototype.ae=function(a,b){id(this);var c=bd({email:a});c.Y._method="POST";this.Xa("/auth/getProvider",c,function(a,c){a?z(b,a):z(b,a,c.allProviders||[])})};
cd.prototype.Xa=function(a,b,c){var d=Ta(["XHR","JSONP","NodeHttp","WxHttp"]);md(this,d,a,b,c)};function jd(a,b,c,d,e){md(a,b,c,d,function(b,c){!b&&c&&c.idToken?gd(a,c,d.Yc,function(a,b){a?z(e,a):z(e,null,b)}):z(e,b||pa("UNKNOWN_ERROR"))})}
function md(a,b,c,d,e){b=$a(b,function(a){return"function"===typeof a.isAvailable&&a.isAvailable()});0===b.length?setTimeout(function(){z(e,pa("TRANSPORT_UNAVAILABLE"))},0):(b=b.shift(),d.Tc.method=d.Y._method,b=new b(d.Tc),d=sa(d.Y),d.v=CLIENT_TYPE+CLIENT_VERSION,d.transport="json",d.suppress_status_codes=!0,a=Aa()+"/"+a.Lb.pc+c,b.open(a,d,function(a,b){if(a)z(e,a);else if(b&&b.error){var c=Error(b.error.message);c.code=b.error.code;c.details=b.error.details;z(e,c)}else z(e,null,b)}))}
function fd(a,b,c){a.kc.clear();c=c||{};var d=Sa;"sessionOnly"===c.remember&&(d=v);"none"!==c.remember&&a.kc.set(b,d)}function Oc(a,b){a.Pa=b;a.Mb.currentUser=b&&b.signIn?b.currentUser:null;a.Bb&&a.Bb(null!==b);b&&b.signIn||a.kc.clear();a.la.emit(a.la.qb.gb,b||{signIn:!1})}function id(a){if(a.Lb.Ue&&"auth.wilddog.com"===na)throw Error("This custom Wilddog server ('"+a.Lb.domain+"') does not support delegated login.");}
function Rc(a,b,c){b=bd(b);b.Y._method="POST";a.Xa("/auth/verifyPhone",b,function(b,e){!b&&e&&e.idToken?hd(a,e.idToken,null,c):z(c,b);!b&&e&&"ok"==e.status&&a.Mb.currentUser&&(a.Mb.currentUser.phoneVerified=!0)})}function nd(a,b,c){id(a);b=bd(b);b.Y._method="POST";a.Xa("/auth/resetPhonePassword",b,function(a,b){a?z(c,a):z(c,a,b)})}function Tc(a,b,c){id(a);b=bd(b);b.Y._method="POST";a.Xa("/auth/sendSmsCode",b,function(a,b){z(c,a,b)})};function F(a,b,c,d){var e;d<b?e="at least "+b:d>c&&(e=0===c?"none":"no more than "+c);if(e)throw Error(a+" failed: Was called with "+d+(1===d?" argument.":" arguments.")+" Expects "+e+".");}function od(a,b,c){switch(b){case 1:b=c?"first":"First";break;case 2:b=c?"second":"Second";break;case 3:b=c?"third":"Third";break;case 4:b=c?"fourth":"Fourth";break;default:throw Error("errorPrefix called with argumentNumber > 4.  Need to update it?");}return a+" failed: "+(b+" argument ")}
function G(a,b,c,d){if((!d||p(c))&&!ga(c))throw Error(od(a,b,d)+"must be a valid function.");}function pd(a,b,c){if(p(c)&&(!ha(c)||null===c))throw Error(od(a,b,!0)+"must be a valid context object.");};function H(a,b){if(1==arguments.length){this.A=a.split("/");for(var c=0,d=0;d<this.A.length;d++)0<this.A[d].length&&(this.A[c]=this.A[d],c++);this.A.length=c;this.ba=0}else this.A=a,this.ba=b}function I(a,b){var c=J(a);if(null===c)return b;if(c===J(b))return I(K(a),K(b));throw Error("INTERNAL ERROR: innerPath ("+b+") is not within outerPath ("+a+")");}function J(a){return a.ba>=a.A.length?null:a.A[a.ba]}function qd(a){return a.A.length-a.ba}
function K(a){var b=a.ba;b<a.A.length&&b++;return new H(a.A,b)}function rd(a){return a.ba<a.A.length?a.A[a.A.length-1]:null}h=H.prototype;h.toString=function(){for(var a="",b=this.ba;b<this.A.length;b++)""!==this.A[b]&&(a+="/"+this.A[b]);return a||"/"};h.slice=function(a){return this.A.slice(this.ba+(a||0))};h.parent=function(){if(this.ba>=this.A.length)return null;for(var a=[],b=this.ba;b<this.A.length-1;b++)a.push(this.A[b]);return new H(a,0)};
h.u=function(a){for(var b=[],c=this.ba;c<this.A.length;c++)b.push(this.A[c]);if(a instanceof H)for(c=a.ba;c<a.A.length;c++)b.push(a.A[c]);else for(a=a.split("/"),c=0;c<a.length;c++)0<a[c].length&&b.push(a[c]);return new H(b,0)};h.f=function(){return this.ba>=this.A.length};h.da=function(a){if(qd(this)!==qd(a))return!1;for(var b=this.ba,c=a.ba;b<=this.A.length;b++,c++)if(this.A[b]!==a.A[c])return!1;return!0};
h.contains=function(a){var b=this.ba,c=a.ba;if(qd(this)>qd(a))return!1;for(;b<this.A.length;){if(this.A[b]!==a.A[c])return!1;++b;++c}return!0};var L=new H("");function sd(a,b){this.Ua=a.slice();this.Ia=Math.max(1,this.Ua.length);this.Le=b;for(var c=0;c<this.Ua.length;c++)this.Ia+=td(this.Ua[c]);ud(this)}sd.prototype.push=function(a){0<this.Ua.length&&(this.Ia+=1);this.Ua.push(a);this.Ia+=td(a);ud(this)};sd.prototype.pop=function(){var a=this.Ua.pop();this.Ia-=td(a);0<this.Ua.length&&--this.Ia};
function ud(a){if(768<a.Ia)throw Error(a.Le+"has a key path longer than 768 bytes ("+a.Ia+").");if(32<a.Ua.length)throw Error(a.Le+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+vd(a));}function vd(a){return 0==a.Ua.length?"":"in property '"+a.Ua.join(".")+"'"};function td(a){for(var b=0,c=0;c<a.length;c++){var d=a.charCodeAt(c);128>d?b++:2048>d?b+=2:55296<=d&&56319>=d?(b+=4,c++):b+=3}return b};var xd=/[\[\].#$\/\u0000-\u001F\u007F]/,yd=/[\[\].#$\u0000-\u001F\u007F]/;function zd(a){return q(a)&&0!==a.length&&!xd.test(a)}function Ad(a){return null===a||q(a)||fa(a)&&!Ob(a)||ha(a)&&qa(a,".sv")}function Bd(a,b,c,d){d&&!p(b)||Cd(od(a,1,d),b,c)}
function Cd(a,b,c){c instanceof H&&(c=new sd(c,a));if(!p(b))throw Error(a+"contains undefined "+vd(c));if(ga(b))throw Error(a+"contains a function "+vd(c)+" with contents: "+b.toString());if(Ob(b))throw Error(a+"contains "+b.toString()+" "+vd(c));if(q(b)&&b.length>10485760/3&&10485760<td(b))throw Error(a+"contains a string greater than 10485760 utf8 bytes "+vd(c)+" ('"+b.substring(0,50)+"...')");if(ha(b)){var d=!1,e=!1;ra(b,function(b,g){if(".value"===b)d=!0;else if(".priority"!==b&&".sv"!==b&&(e=
!0,!zd(b)))throw Error(a+" contains an invalid key ("+b+") "+vd(c)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');c.push(b);Cd(a,g,c);c.pop()});if(d&&e)throw Error(a+' contains ".value" child '+vd(c)+" in addition to actual children.");}}
function Ed(a,b){var c,d;for(c=0;c<b.length;c++){d=b[c];for(var e=d.slice(),f=0;f<e.length;f++)if((".priority"!==e[f]||f!==e.length-1)&&!zd(e[f]))throw Error(a+"contains an invalid key ("+e[f]+") in path "+d.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');}b.sort(H.Vg);e=null;for(c=0;c<b.length;c++){d=b[c];if(null!==e&&e.contains(d))throw Error(a+"contains a path "+e.toString()+" that is ancestor of another path "+d.toString());e=d}}
function Fd(a,b,c){var d=od(a,1,!1);if(!ha(b)||ea(b))throw Error(d+" must be an Object containing the children to replace.");if(qa(b,".value"))throw Error(d+' must not contain ".value".  To overwrite with a leaf value, just use .set() instead.');var e=[];ra(b,function(a,b){var f=new H(a);Cd(d,b,c.u(f));if(".priority"===rd(f)&&!Ad(b))throw Error(d+"contains an invalid value for '"+f.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");e.push(f)});
Ed(d,e)}function Gd(a,b,c){if(Ob(c))throw Error(od(a,b,!1)+"is "+c.toString()+", but must be a valid Wilddog priority (a string, finite number, server value, or null).");if(!Ad(c))throw Error(od(a,b,!1)+"must be a valid Wilddog priority (a string, finite number, server value, or null).");}
function Hd(a,b,c){if(!c||p(b))switch(b){case "value":case "child_added":case "child_removed":case "child_changed":case "child_moved":break;default:throw Error(od(a,1,c)+'must be a valid event type: "value", "child_added", "child_removed", "child_changed", or "child_moved".');}}function Id(a,b,c,d){if((!d||p(c))&&!zd(c))throw Error(od(a,b,d)+'was an invalid key: "'+c+'".  Wilddog keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").');}
function Jd(a,b){if(!q(b)||0===b.length||yd.test(b))throw Error(od(a,1,!1)+'was an invalid path: "'+b+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"');}function Kd(a,b){if(".info"===J(b))throw Error(a+" failed: Can't modify data under /.info/");}function Mc(a,b,c){if(!q(c))throw Error(od(a,b,!1)+"must be a valid string.");}function Jc(a,b){if(!ha(b)||null===b)throw Error(od(a,1,!1)+"must be a valid object.");};function M(a){if(!a.options.authDomain)throw Error("Could not find 'authDomain' in options.");var b=this;this.Cf=function(a){var b=/^([a-zA-Z0-9\-_]+)\.([a-z]+)\.com/.exec(a.toLowerCase());if(!b)throw Error("Bad 'authDomain' format '"+a+"'.");return{pc:b[1],dh:b[2],Tg:b[0],yd:"",Ue:"wilddog"!==b[2]}}(a.options.authDomain);this.app=a;this.ca=new cd(this,this.Cf);this.app.bind(this.app.qb.Ge,function(a){var c=b.ca;a=a.reason;c.Pa=null;c.Mb.currentUser=null;c.la.emit(c.la.qb.gb,{signIn:!1,reason:a});
c.Bb&&c.Bb(!1);c.kc.clear()})}M.prototype.dg=function(a){function b(b){var d;if(!(d=b&&b.signIn)){var f=c.ca;d=v.get("redirect_request_id");f=f.kc.get();d=!(d||f&&f.idToken)}d&&a(b&&b.signIn?b.currentUser:null)}var c=this;F("wilddog.auth().onAuthStateChanged",1,1,arguments.length);G("wilddog.auth().onAuthStateChanged",1,a,!1);this.app.bind(this.app.qb.gb,b);return function(){c.app.unbind(c.app.qb.gb,b)}};M.prototype.onAuthStateChanged=M.prototype.dg;
M.prototype.wg=function(a){F("wilddog.auth().signInAnonymously",0,1,arguments.length);G("wilddog.auth().signInAnonymously",1,a,!0);var b=new C;kd(this.ca,{},D(b,a));return b.o};M.prototype.signInAnonymously=M.prototype.wg;M.prototype.xg=function(a){F("wilddog.auth().signInAnonymously",0,1,arguments.length);G("wilddog.auth().signInAnonymously",1,a,!0);var b=new C,c=this.ca,d=D(b,a);id(c);var e=new $c({},{},{}),f=Ta(["WxImplicit"]);jd(c,f,"/auth/wxapp",e,d);return b.o};M.prototype.signInWeapp=M.prototype.xg;
M.prototype.qg=function(a,b){F("wilddog.auth().sendPasswordResetEmail",1,2,arguments.length);G("wilddog.auth().sendPasswordResetEmail",2,b,!0);var c=new C;Sc(this.ca,{requestType:"RESET_PASSWORD",email:a},D(c,b));return c.o};M.prototype.sendPasswordResetEmail=M.prototype.qg;M.prototype.rg=function(a,b){F("wilddog.auth().sendPasswordResetSms",1,2,arguments.length);G("wilddog.auth().sendPasswordResetSms",2,b,!0);var c=new C;Tc(this.ca,{type:"PASSWORD_RESET",phoneNumber:a},D(c,b));return c.o};
M.prototype.sendPasswordResetSms=M.prototype.rg;M.prototype.If=function(a,b,c,d){F("wilddog.auth().sendPasswordResetSms",3,4,arguments.length);G("wilddog.auth().sendPasswordResetSms",4,d,!0);Mc("wilddog.auth().sendPasswordResetSms",2,b);var e=new C;nd(this.ca,{phoneNumber:a,password:c,smsCode:b},D(e,d));return e.o};M.prototype.confirmPasswordResetSms=M.prototype.If;
M.prototype.ae=function(a,b){F("wilddog.auth().fetchProvidersForEmail",1,2,arguments.length);G("wilddog.auth().fetchProvidersForEmail",2,b,!0);var c=new C;this.ca.ae(a,D(c,b));return c.o};M.prototype.fetchProvidersForEmail=M.prototype.ae;M.prototype.zg=function(a,b){F("wilddog.auth().signInWithCustomToken",1,2,arguments.length);G("wilddog.auth().signInWithCustomToken",2,b,!0);var c=new C;Lc(this.ca,{providerId:"custom",token:a},D(c,b));return c.o};M.prototype.signInWithCustomToken=M.prototype.zg;
M.prototype.Ag=function(a,b,c){F("wilddog.auth().signInWithEmailAndPassword",2,3,arguments.length);G("wilddog.auth().signInWithEmailAndPassword",3,c,!0);var d=new C;Lc(this.ca,{providerId:"password",password:b,email:a},D(d,c));return d.o};M.prototype.signInWithEmailAndPassword=M.prototype.Ag;
M.prototype.Bg=function(a,b,c){F("wilddog.auth().signInWithPhoneAndPassword",2,3,arguments.length);G("wilddog.auth().signInWithPhoneAndPassword",3,c,!0);var d=new C;Lc(this.ca,{providerId:"password",password:b,phoneNumber:a},D(d,c));return d.o};M.prototype.signInWithPhoneAndPassword=M.prototype.Bg;M.prototype.Eg=function(a){F("wilddog.auth().signOut",0,1,arguments.length);G("wilddog.auth().signOut",1,a,!0);var b=new C,c=D(b,a);Oc(this.ca,null);z(c,null);return b.o};M.prototype.signOut=M.prototype.Eg;
M.prototype.Jf=function(a,b,c){F("wilddog.auth().createUserWithEmailAndPassword",2,3,arguments.length);G("wilddog.auth().createUserWithEmailAndPassword",3,c,!0);var d=new C;kd(this.ca,{email:a,password:b},D(d,c));return d.o};M.prototype.createUserWithEmailAndPassword=M.prototype.Jf;
M.prototype.Kf=function(a,b,c){F("wilddog.auth().createUserWithPhoneAndPassword",2,3,arguments.length);G("wilddog.auth().createUserWithPhoneAndPassword",3,c,!0);var d=new C;kd(this.ca,{phoneNumber:a,password:b},D(d,c));return d.o};M.prototype.createUserWithPhoneAndPassword=M.prototype.Kf;M.prototype.Cg=function(a,b){F("wilddog.auth().signInWithPopup",1,2,arguments.length);Jc("wilddog.auth().signInWithPopup",a);var c=new C;Pc(this.ca,a,{authType:"login"},D(c,b));return c.o};
M.prototype.signInWithPopup=M.prototype.Cg;M.prototype.Dg=function(a,b){F("wilddog.auth().signInWithRedirect",1,2,arguments.length);Jc("wilddog.auth().signInWithRedirect",a);var c=new C;Qc(this.ca,a,{authType:"login"},D(c,b));return c.o};M.prototype.signInWithRedirect=M.prototype.Dg;
M.prototype.yg=function(a,b){F("wilddog.auth().signInWithCredential",1,2,arguments.length);Jc("wilddog.auth().signInWithCredential",a);var c={};"password"==a.provider?(c.providerId=a.provider,c.email=a.email,c.phoneNumber=a.phone,c.password=a.password):(c.providerId=a.provider,c.accessToken=a.accessToken,c.openId=a.openId||a.email);c.authType="login";var d=new C;Lc(this.ca,c,D(d,b));return d.o};M.prototype.signInWithCredential=M.prototype.yg;function Ld(){this.Nf="DEFAULT";this.cg={};this.Vd={};this.app=null}Ld.prototype.Zf=function(a,b){var c=b||this.Nf;this.Vd[c]=new A(a,c);null==b&&(this.app=this.Vd[c]);return this.Vd[c]};Ld.prototype.initializeApp=Ld.prototype.Zf;Ld.prototype.Td=function(a,b){this.cg[a]=b;Yb(a,b);this[a]=function(){return this.app[a]()}};Ld.prototype.__regService=Ld.prototype.Td;var Md=new Ld;function Nd(a,b){return Pb(a.name,b.name)}function Od(a,b){return Pb(a,b)};function Pd(){}var Qd={};function Rd(a){return r(a.compare,a)}Pd.prototype.kd=function(a,b){return 0!==this.compare(new N("[MIN_NAME]",a),new N("[MIN_NAME]",b))};function Sd(a){this.ac=a}la(Sd,Pd);h=Sd.prototype;h.yc=function(a){return!a.P(this.ac).f()};h.compare=function(a,b){var c=a.node.P(this.ac),d=b.node.P(this.ac),c=c.tc(d);return 0===c?Pb(a.name,b.name):c};h.Ec=function(a,b){var c=O(a),c=Q.T(this.ac,c);return new N(b,c)};h.Fc=function(){var a=Q.T(this.ac,Td);return new N("[MAX_NAME]",a)};
h.toString=function(){return this.ac};function Ud(){}la(Ud,Pd);h=Ud.prototype;h.compare=function(a,b){var c=a.node.F(),d=b.node.F(),c=c.tc(d);return 0===c?Pb(a.name,b.name):c};h.yc=function(a){return!a.F().f()};h.kd=function(a,b){return!a.F().da(b.F())};h.Fc=function(){return new N("[MAX_NAME]",new Vd("[PRIORITY-POST]",Td))};h.Ec=function(a,b){var c=O(a);return new N(b,new Vd("[PRIORITY-POST]",c))};h.toString=function(){return".priority"};var R=new Ud;function Wd(){}la(Wd,Pd);h=Wd.prototype;
h.compare=function(a,b){return Pb(a.name,b.name)};h.yc=function(){throw Eb("KeyIndex.isDefinedOn not expected to be called.");};h.kd=function(){return!1};h.Fc=function(){return new N("[MAX_NAME]",Q)};h.Ec=function(a){x(q(a),"KeyIndex indexValue must always be a string.");return new N(a,Q)};h.toString=function(){return".key"};var Xd=new Wd;function Yd(){}la(Yd,Pd);h=Yd.prototype;h.compare=function(a,b){var c=a.node.tc(b.node);return 0===c?Pb(a.name,b.name):c};h.yc=function(){return!0};
h.kd=function(a,b){return!a.da(b)};h.Fc=function(){return Zd};h.Ec=function(a,b){var c=O(a);return new N(b,c)};h.toString=function(){return".value"};var $d=new Yd;function ae(a,b){this.ld=a;this.bc=b}ae.prototype.get=function(a){var b=t(this.ld,a);if(!b)throw Error("No index defined for "+a);return b===Qd?null:b};function be(a,b,c){var d=lb(a.ld,function(d,f){var e=t(a.bc,f);x(e,"Missing index implementation for "+f);if(d===Qd){if(e.yc(b.node)){for(var k=[],l=c.Vb(ce),m=S(l);m;)m.name!=b.name&&k.push(m),m=S(l);k.push(b);return de(k,Rd(e))}return Qd}e=c.get(b.name);k=d;e&&(k=k.remove(new N(b.name,e)));return k.Sa(b,b.node)});return new ae(d,a.bc)}
function ee(a,b,c){var d=lb(a.ld,function(a){if(a===Qd)return a;var d=c.get(b.name);return d?a.remove(new N(b.name,d)):a});return new ae(d,a.bc)}var fe=new ae({".priority":Qd},{".priority":R});function N(a,b){this.name=a;this.node=b}function ce(a,b){return new N(a,b)};function Vd(a,b){this.H=a;x(p(this.H)&&null!==this.H,"LeafNode shouldn't be created with null/undefined value.");this.fa=b||Q;ge(this.fa);this.yb=null}h=Vd.prototype;h.R=function(){return!0};h.F=function(){return this.fa};h.ga=function(a){return new Vd(this.H,a)};h.P=function(a){return".priority"===a?this.fa:Q};h.sa=function(a){return a.f()?this:".priority"===J(a)?this.fa:Q};h.La=function(){return!1};h.Qe=function(){return null};
h.T=function(a,b){return".priority"===a?this.ga(b):b.f()&&".priority"!==a?this:Q.T(a,b).ga(this.fa)};h.K=function(a,b){var c=J(a);if(null===c)return b;if(b.f()&&".priority"!==c)return this;x(".priority"!==c||1===qd(a),".priority must be the last token in a path");return this.T(c,Q.K(K(a),b))};h.f=function(){return!1};h.zb=function(){return 0};h.O=function(a){return a&&!this.F().f()?{".value":this.Ga(),".priority":this.F().O()}:this.Ga()};
h.hash=function(){if(null===this.yb){var a="";this.fa.f()||(a+="priority:"+he(this.fa.O())+":");var b=typeof this.H,a=a+(b+":"),a="number"===b?a+Tb(this.H):a+this.H;this.yb=Hb(a)}return this.yb};h.Ga=function(){return this.H};h.tc=function(a){if(a===Q)return 1;if(a instanceof T)return-1;x(a.R(),"Unknown node type");var b=typeof a.H,c=typeof this.H,d=Za(ie,b),e=Za(ie,c);x(0<=d,"Unknown leaf type: "+b);x(0<=e,"Unknown leaf type: "+c);return d===e?"object"===c?0:this.H<a.H?-1:this.H===a.H?0:1:e-d};
var ie=["object","boolean","number","string"];Vd.prototype.pb=function(){return this};Vd.prototype.zc=function(){return!0};Vd.prototype.da=function(a){return a===this?!0:a.R()?this.H===a.H&&this.fa.da(a.fa):!1};Vd.prototype.toString=function(){return u(this.O(!0))};function je(a,b){this.Qa=a;this.Ba=b?b:ke}h=je.prototype;h.Sa=function(a,b){return new je(this.Qa,this.Ba.Sa(a,b,this.Qa).aa(null,null,le,null,null))};h.remove=function(a){return new je(this.Qa,this.Ba.remove(a,this.Qa).aa(null,null,le,null,null))};h.get=function(a){for(var b,c=this.Ba;!c.f();){b=this.Qa(a,c.key);if(0===b)return c.value;0>b?c=c.left:0<b&&(c=c.right)}return null};
function me(a,b){for(var c,d=a.Ba,e=null;!d.f();){c=a.Qa(b,d.key);if(0===c){if(d.left.f())return e?e.key:null;for(d=d.left;!d.right.f();)d=d.right;return d.key}0>c?d=d.left:0<c&&(e=d,d=d.right)}throw Error("Attempted to find predecessor key for a nonexistent key.  What gives?");}h.f=function(){return this.Ba.f()};h.count=function(){return this.Ba.count()};h.Hc=function(){return this.Ba.Hc()};h.dc=function(){return this.Ba.dc()};h.na=function(a){return this.Ba.na(a)};
h.Vb=function(a){return new ne(this.Ba,null,this.Qa,!1,a)};h.Wb=function(a,b){return new ne(this.Ba,a,this.Qa,!1,b)};h.Yb=function(a,b){return new ne(this.Ba,a,this.Qa,!0,b)};h.Re=function(a){return new ne(this.Ba,null,this.Qa,!0,a)};function ne(a,b,c,d,e){this.Ed=e||null;this.le=d;for(this.Ta=[];!a.f();)if(e=b?c(a.key,b):1,d&&(e*=-1),0>e)a=this.le?a.left:a.right;else if(0===e){this.Ta.push(a);break}else this.Ta.push(a),a=this.le?a.right:a.left}
function S(a){if(0===a.Ta.length)return null;var b=a.Ta.pop(),c;c=a.Ed?a.Ed(b.key,b.value):{key:b.key,value:b.value};if(a.le)for(b=b.left;!b.f();)a.Ta.push(b),b=b.right;else for(b=b.right;!b.f();)a.Ta.push(b),b=b.left;return c}function oe(a){if(0===a.Ta.length)return null;var b;b=a.Ta;b=b[b.length-1];return a.Ed?a.Ed(b.key,b.value):{key:b.key,value:b.value}}function pe(a,b,c,d,e){this.key=a;this.value=b;this.color=null!=c?c:qe;this.left=null!=d?d:ke;this.right=null!=e?e:ke}var qe=!0,le=!1;h=pe.prototype;
h.aa=function(a,b,c,d,e){return new pe(null!=a?a:this.key,null!=b?b:this.value,null!=c?c:this.color,null!=d?d:this.left,null!=e?e:this.right)};h.count=function(){return this.left.count()+1+this.right.count()};h.f=function(){return!1};h.na=function(a){return this.left.na(a)||a(this.key,this.value)||this.right.na(a)};function re(a){return a.left.f()?a:re(a.left)}h.Hc=function(){return re(this).key};h.dc=function(){return this.right.f()?this.key:this.right.dc()};
h.Sa=function(a,b,c){var d,e;e=this;d=c(a,e.key);e=0>d?e.aa(null,null,null,e.left.Sa(a,b,c),null):0===d?e.aa(null,b,null,null,null):e.aa(null,null,null,null,e.right.Sa(a,b,c));return se(e)};function te(a){if(a.left.f())return ke;a.left.ia()||a.left.left.ia()||(a=ue(a));a=a.aa(null,null,null,te(a.left),null);return se(a)}
h.remove=function(a,b){var c,d;c=this;if(0>b(a,c.key))c.left.f()||c.left.ia()||c.left.left.ia()||(c=ue(c)),c=c.aa(null,null,null,c.left.remove(a,b),null);else{c.left.ia()&&(c=ve(c));c.right.f()||c.right.ia()||c.right.left.ia()||(c=we(c),c.left.left.ia()&&(c=ve(c),c=we(c)));if(0===b(a,c.key)){if(c.right.f())return ke;d=re(c.right);c=c.aa(d.key,d.value,null,null,te(c.right))}c=c.aa(null,null,null,null,c.right.remove(a,b))}return se(c)};h.ia=function(){return this.color};
function se(a){a.right.ia()&&!a.left.ia()&&(a=xe(a));a.left.ia()&&a.left.left.ia()&&(a=ve(a));a.left.ia()&&a.right.ia()&&(a=we(a));return a}function ue(a){a=we(a);a.right.left.ia()&&(a=a.aa(null,null,null,null,ve(a.right)),a=xe(a),a=we(a));return a}function xe(a){return a.right.aa(null,null,a.color,a.aa(null,null,qe,null,a.right.left),null)}function ve(a){return a.left.aa(null,null,a.color,null,a.aa(null,null,qe,a.left.right,null))}
function we(a){return a.aa(null,null,!a.color,a.left.aa(null,null,!a.left.color,null,null),a.right.aa(null,null,!a.right.color,null,null))}function ye(){}h=ye.prototype;h.aa=function(){return this};h.Sa=function(a,b){return new pe(a,b,null)};h.remove=function(){return this};h.count=function(){return 0};h.f=function(){return!0};h.na=function(){return!1};h.Hc=function(){return null};h.dc=function(){return null};h.ia=function(){return!1};var ke=new ye;function T(a,b,c){this.w=a;(this.fa=b)&&ge(this.fa);a.f()&&x(!this.fa||this.fa.f(),"An empty node cannot have a priority");this.wb=c;this.yb=null}h=T.prototype;h.R=function(){return!1};h.F=function(){return this.fa||Q};h.ga=function(a){return this.w.f()?this:new T(this.w,a,this.wb)};h.P=function(a){if(".priority"===a)return this.F();a=this.w.get(a);return null===a?Q:a};h.sa=function(a){var b=J(a);return null===b?this:this.P(b).sa(K(a))};h.La=function(a){return null!==this.w.get(a)};
h.T=function(a,b){x(b,"We should always be passing snapshot nodes");if(".priority"===a)return this.ga(b);var c=new N(a,b),d,e;b.f()?(d=this.w.remove(a),c=ee(this.wb,c,this.w)):(d=this.w.Sa(a,b),c=be(this.wb,c,this.w));e=d.f()?Q:this.fa;return new T(d,e,c)};h.K=function(a,b){var c=J(a);if(null===c)return b;x(".priority"!==J(a)||1===qd(a),".priority must be the last token in a path");var d=this.P(c).K(K(a),b);return this.T(c,d)};h.f=function(){return this.w.f()};h.zb=function(){return this.w.count()};
var ze=/^(0|[1-9]\d*)$/;h=T.prototype;h.O=function(a){if(this.f())return null;var b={},c=0,d=0,e=!0;this.W(R,function(f,g){b[f]=g.O(a);c++;e&&ze.test(f)?d=Math.max(d,Number(f)):e=!1});if(!a&&e&&d<2*c){var f=[],g;for(g in b)f[g]=b[g];return f}a&&!this.F().f()&&(b[".priority"]=this.F().O());return b};h.hash=function(){if(null===this.yb){var a="";this.F().f()||(a+="priority:"+he(this.F().O())+":");this.W(R,function(b,c){var d=c.hash();""!==d&&(a+=":"+b+":"+d)});this.yb=""===a?"":Hb(a)}return this.yb};
h.Qe=function(a,b,c){return(c=Ae(this,c))?(a=me(c,new N(a,b)))?a.name:null:me(this.w,a)};function Be(a,b){var c;c=(c=Ae(a,b))?(c=c.Hc())&&c.name:a.w.Hc();return c?new N(c,a.w.get(c)):null}function Ce(a,b){var c;c=(c=Ae(a,b))?(c=c.dc())&&c.name:a.w.dc();return c?new N(c,a.w.get(c)):null}h.W=function(a,b){var c=Ae(this,a);return c?c.na(function(a){return b(a.name,a.node)}):this.w.na(b)};h.Vb=function(a){return this.Wb(De,a)};
h.Wb=function(a,b){var c=Ae(this,b);if(c)return c.Wb(a,function(a){return a});for(var c=this.w.Wb(a.name,ce),d=oe(c);null!=d&&0>b.compare(d,a);)S(c),d=oe(c);return c};h.Re=function(a){return this.Yb(a.Fc(),a)};h.Yb=function(a,b){var c=Ae(this,b);if(c)return c.Yb(a,function(a){return a});for(var c=this.w.Yb(a.name,ce),d=oe(c);null!=d&&0<b.compare(d,a);)S(c),d=oe(c);return c};h.tc=function(a){return this.f()?a.f()?0:-1:a.R()||a.f()?1:a===Td?-1:0};
h.pb=function(a){if(a===Xd||sb(this.wb.bc,a.toString()))return this;var b=this.wb,c=this.w;x(a!==Xd,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var d=[],e=!1,c=c.Vb(ce),f=S(c);f;)e=e||a.yc(f.node),d.push(f),f=S(c);d=e?de(d,Rd(a)):Qd;e=a.toString();c=wb(b.bc);c[e]=a;a=wb(b.ld);a[e]=d;return new T(this.w,this.fa,new ae(a,c))};h.zc=function(a){return a===Xd||sb(this.wb.bc,a.toString())};
h.da=function(a){if(a===this)return!0;if(a.R())return!1;if(this.F().da(a.F())&&this.w.count()===a.w.count()){var b=this.Vb(R);a=a.Vb(R);for(var c=S(b),d=S(a);c&&d;){if(c.name!==d.name||!c.node.da(d.node))return!1;c=S(b);d=S(a)}return null===c&&null===d}return!1};function Ae(a,b){return b===Xd?null:a.wb.get(b.toString())}h.toString=function(){return u(this.O(!0))};function O(a,b){if(null===a)return Q;var c=null;"object"===typeof a&&".priority"in a?c=a[".priority"]:"undefined"!==typeof b&&(c=b);x(null===c||"string"===typeof c||"number"===typeof c||"object"===typeof c&&".sv"in c,"Invalid priority type found: "+typeof c);"object"===typeof a&&".value"in a&&null!==a[".value"]&&(a=a[".value"]);if("object"!==typeof a||".sv"in a)return new Vd(a,O(c));if(a instanceof Array){var d=Q,e=a;w(e,function(a,b){if(qa(e,b)&&"."!==b.substring(0,1)){var c=O(a);if(c.R()||!c.f())d=
d.T(b,c)}});return d.ga(O(c))}var f=[],g=!1,k=a;ra(k,function(a){if("string"!==typeof a||"."!==a.substring(0,1)){var b=O(k[a]);b.f()||(g=g||!b.F().f(),f.push(new N(a,b)))}});if(0==f.length)return Q;var l=de(f,Nd,function(a){return a.name},Od);if(g){var m=de(f,Rd(R));return new T(l,O(c),new ae({".priority":m},{".priority":R}))}return new T(l,O(c),fe)}var Ee=Math.log(2);
function Fe(a){this.count=parseInt(Math.log(a+1)/Ee,10);this.Ie=this.count-1;this.Ef=a+1&parseInt(Array(this.count+1).join("1"),2)}function Ge(a){var b=!(a.Ef&1<<a.Ie);a.Ie--;return b}
function de(a,b,c,d){function e(b,d){var f=d-b;if(0==f)return null;if(1==f){var g=a[b],k=c?c(g):g;return new pe(k,g.node,le,null,null)}var g=parseInt(f/2,10)+b,f=e(b,g),B=e(g+1,d),g=a[g],k=c?c(g):g;return new pe(k,g.node,le,f,B)}a.sort(b);var f=function(b){function d(b,d){var k=P-b,l=P;P-=b;var l=e(k+1,l),k=a[k],m=c?c(k):k,l=new pe(m,k.node,d,null,l);f?f.left=l:g=l;f=l}for(var f=null,g=null,P=a.length,B=0;B<b.count;++B){var da=Ge(b),Dd=Math.pow(2,b.count-(B+1));da?d(Dd,le):(d(Dd,le),d(Dd,qe))}return g}(new Fe(a.length));
return null!==f?new je(d||b,f):new je(d||b)}function he(a){return"number"===typeof a?"number:"+Tb(a):"string:"+a}function ge(a){if(a.R()){var b=a.O();x("string"===typeof b||"number"===typeof b||"object"===typeof b&&qa(b,".sv"),"Priority must be a string or number.")}else x(a===Td||a.f(),"priority of unexpected type.");x(a===Td||a.F().f(),"Priority nodes can't have a priority of their own.")}var Q=new T(new je(Od),null,fe);function He(){T.call(this,new je(Od),Q,fe)}la(He,T);h=He.prototype;
h.tc=function(a){return a===this?0:1};h.da=function(a){return a===this};h.F=function(){return this};h.P=function(){return Q};h.f=function(){return!1};var Td=new He,De=new N("[MIN_NAME]",Q),Zd=new N("[MAX_NAME]",Td);function U(a,b,c){this.G=a;this.X=b;this.g=c}U.prototype.O=function(){F("Wilddog.DataSnapshot.val",0,0,arguments.length);return this.G.O()};U.prototype.val=U.prototype.O;U.prototype.Me=function(){F("Wilddog.DataSnapshot.exportVal",0,0,arguments.length);return this.G.O(!0)};U.prototype.exportVal=U.prototype.Me;U.prototype.Sf=function(){F("Wilddog.DataSnapshot.exists",0,0,arguments.length);return!this.G.f()};U.prototype.exists=U.prototype.Sf;
U.prototype.u=function(a){F("Wilddog.DataSnapshot.child",0,1,arguments.length);fa(a)&&(a=String(a));Jd("Wilddog.DataSnapshot.child",a);var b=new H(a),c=this.X.u(b);return new U(this.G.sa(b),c,R)};U.prototype.child=U.prototype.u;U.prototype.La=function(a){F("Wilddog.DataSnapshot.hasChild",1,1,arguments.length);Jd("Wilddog.DataSnapshot.hasChild",a);var b=new H(a);return!this.G.sa(b).f()};U.prototype.hasChild=U.prototype.La;
U.prototype.F=function(){F("Wilddog.DataSnapshot.getPriority",0,0,arguments.length);return this.G.F().O()};U.prototype.getPriority=U.prototype.F;U.prototype.forEach=function(a){F("Wilddog.DataSnapshot.forEach",1,1,arguments.length);G("Wilddog.DataSnapshot.forEach",1,a,!1);if(this.G.R())return!1;var b=this;return!!this.G.W(this.g,function(c,d){return a(new U(d,b.X.u(c),R))})};U.prototype.forEach=U.prototype.forEach;
U.prototype.fd=function(){F("Wilddog.DataSnapshot.hasChildren",0,0,arguments.length);return this.G.R()?!1:!this.G.f()};U.prototype.hasChildren=U.prototype.fd;U.prototype.name=function(){y("Wilddog.DataSnapshot.name() being deprecated. Please use Wilddog.DataSnapshot.key() instead.");F("Wilddog.DataSnapshot.name",0,0,arguments.length);return this.key()};U.prototype.name=U.prototype.name;U.prototype.key=function(){F("Wilddog.DataSnapshot.key",0,0,arguments.length);return this.X.key()};
U.prototype.key=U.prototype.key;U.prototype.zb=function(){F("Wilddog.DataSnapshot.numChildren",0,0,arguments.length);return this.G.zb()};U.prototype.numChildren=U.prototype.zb;U.prototype.jc=function(){F("Wilddog.DataSnapshot.ref",0,0,arguments.length);return this.X};U.prototype.ref=U.prototype.jc;function Ie(){Wb.call(this,["online"]);this.gc=!0;if("undefined"!==typeof window&&"undefined"!==typeof window.addEventListener){var a=this;window.addEventListener("online",function(){a.gc||(a.gc=!0,a.Od("online",!0))},!1);window.addEventListener("offline",function(){a.gc&&(a.gc=!1,a.Od("online",!1))},!1)}}la(Ie,Wb);Ie.prototype.fe=function(a){x("online"===a,"Unknown event type: "+a);return[this.gc]};ba(Ie);function Je(){Wb.call(this,["visible"]);var a,b;"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document.hidden?(b="visibilitychange",a="hidden"):"undefined"!==typeof document.mozHidden?(b="mozvisibilitychange",a="mozHidden"):"undefined"!==typeof document.msHidden?(b="msvisibilitychange",a="msHidden"):"undefined"!==typeof document.webkitHidden&&(b="webkitvisibilitychange",a="webkitHidden"));this.nc=!0;if(b){var c=this;document.addEventListener(b,
function(){var b=!document[a];b!==c.nc&&(c.nc=b,c.Od("visible",b))},!1)}}la(Je,Wb);Je.prototype.fe=function(a){x("visible"===a,"Unknown event type: "+a);return[this.nc]};ba(Je);var Ke=global.eio;function Le(a,b,c,d,e,f){this.id=a;this.m=Lb("c:"+this.id+":");this.vd=c;this.Lc=d;this.za=e;this.fg=f;this.J=b;this.Z=0;this.m("Connection created");this.Ra=Me(this);this.Ra.on("open",Ne(this));this.Ra.on("error",Oe(this))}function Ne(a){return function(){a.Ra.on("message",Pe(a));a.Ra.on("close",Qe(a))}}
function Pe(a){return function(b){if(null==b)throw Error("data is null");if(0!=b.charAt(0))if(2==b.charAt(0)){var c=null;try{c=JSON.parse(b.substr(1))}catch(f){throw f;}if("object"!=typeof c||2>c.length)throw Error("decodedData in wrong format");b=c[1];if("wd"==c[0])if("c"==b.t)if(c=b.d,"h"==c.t){b=c.d;var c=b.ts,d=b.v,e=b.h;a.sessionId=b.s;"1.0"!=d&&y("Protocol version mismatch detected");0==a.Z&&(e==a.J.Ha||a.J.qf?(a.Z=1,a.m("realtime state connected"),b=a.J,Ua.Sc||(d=b.lb.indexOf(a.J.Ha),0<=d&&
(b.lb.splice(d,1),v.set("failHosts",JSON.stringify(b.lb)))),a.Lc&&(a.Lc(c),a.Lc=null)):(Re(a.J,e),a.m("updateHost ",e),a.Ra.close(),a.Ra=Me(a,["websocket"]),a.Ra.on("open",Ne(a)),a.Ra.on("error",Oe(a))))}else"r"==c.t?(c=c.d,a.m("Reset packet received.  New host: "+c),Re(a.J,c),a.close()):"s"==c.t&&(a.fg(c.d),a.close());else"d"==b.t&&a.vd(b.d);else a.m("eventType not known")}else 1!=b.charAt(0)&&a.m("data format error")}}
function Qe(a){return function(){2!==a.Z&&(a.m("Closing realtime connection."),a.Z=2,a.za&&(a.za(),a.za=null))}}function Oe(a){return function(b){if(0==a.Z){var c=a.J.Ha,d=a.J;!Ua.Sc&&null!=c&&0>d.lb.indexOf(c)&&c!=d.host&&(d.lb.push(c),v.set("failHosts",JSON.stringify(d.lb)));a.m("error while connecting",b,c);Re(a.J)}a.close()}}
function Me(a,b){var c=(a.J.Gb?"https://":"http://")+a.J.Ha+"?v=1.0&cv="+CLIENT_VERSION,d=a.J;d.host!==d.Ha&&(c=c+"&ns="+a.J.Ze);a.sessionId&&(c=c+"&s="+a.sessionId);0<a.J.lb.length&&(c=c+"&fst="+encodeURIComponent(a.J.lb.join(",")));d={path:"/.ws",rememberUpgrade:!0};"undefined"==typeof document&&(d.jsonp=!1);null!=b&&(d.transports=b);return Ke(c,d)}Le.prototype.eb=function(a){a="2"+JSON.stringify(["wd",{t:"d",d:a}]);this.Ra.send(a)};
Le.prototype.close=function(){2!==this.Z&&(this.m("Closing realtime connection."),this.Z=2,this.Ra.close(),this.za&&(this.za(),this.za=null))};function Se(a,b,c,d){this.id=Te++;this.m=Lb("p:"+this.id+":");this.Ve=this.ke=!1;this.ja={};this.ta=[];this.Nc=0;this.Jc=[];this.qa=!1;this.cb=1E3;this.qd=3E5;this.Cb=b;this.Ic=c;this.qe=d;this.J=a;this.ue=null;this.Dd={};this.ng=0;this.Ac=this.me=null;Ue(this,0);Je.Ub().Ab("visible",this.jg,this);-1===a.host.indexOf("wd.local")&&Ie.Ub().Ab("online",this.hg,this)}var Te=0,Ve=0;h=Se.prototype;
h.eb=function(a,b,c){var d=++this.ng;a={r:d,a:a,b:b};this.m(u(a));x(this.qa,"sendRequest call when we're not connected not allowed.");this.Va.eb(a);c&&(this.Dd[d]=c)};h.We=function(a,b,c,d){var e=We(a),f=a.path.toString();this.m("Listen called for "+f+" "+e);this.ja[f]=this.ja[f]||{};x(!this.ja[f][e],"listen() called twice for same path/queryId.");a={N:d,gd:b,query:a,tag:c};this.ja[f][e]=a;this.qa&&Xe(this,a)};
function Xe(a,b){var c=b.query,d=c.path.toString(),e=We(c);a.m("Listen on "+d+" for "+e);var f={p:d};b.tag&&(f.q=Ye(c.B),f.t=b.tag);f.h=b.gd();a.eb("q",f,function(f){var g=f.d,l=f.s;if(g&&"object"===typeof g&&qa(g,"w")){var m=t(g,"w");ea(m)&&0<=Za(m,"no_index")&&y("Using an unspecified index. Consider adding "+('".indexOn": "'+c.B.g.toString()+'"')+" at "+c.path.toString()+" to your security rules for better performance")}(a.ja[d]&&a.ja[d][e])===b&&(a.m("listen response",f),"ok"!==l&&Ze(a,d,e),b.N&&
b.N(l,g))})}h.Fe=function(a,b,c){this.Ja={Mf:a,Ne:!1,sc:b,Wc:c};this.m("Authenticating using credential: "+a);$e(this);40==a.length&&(this.m("Admin auth credential detected.  Reducing max reconnect time."),this.qd=3E4)};h.sf=function(a){delete this.Ja;this.qa&&this.eb("unauth",{},function(b){a(b.s,b.d)})};function $e(a){var b=a.Ja;a.qa&&b&&a.eb("auth",{cred:b.Mf},function(c){var d=c.s;c=c.d||"error";"ok"!==d&&a.Ja===b&&delete a.Ja;b.Ne?"ok"!==d&&b.Wc&&b.Wc(d,c):(b.Ne=!0,b.sc&&b.sc(d,c))})}
h.tf=function(a,b){var c=a.path.toString(),d=We(a);this.m("Unlisten called for "+c+" "+d);if(Ze(this,c,d)&&this.qa){var e=Ye(a.B);this.m("Unlisten on "+c+" for "+d);c={p:c};b&&(c.q=e,c.t=b);this.eb("n",c)}};h.pe=function(a,b,c){this.qa?af(this,"o",a,b,c):this.Jc.push({Oc:a,action:"o",data:b,N:c})};h.af=function(a,b,c){this.qa?af(this,"om",a,b,c):this.Jc.push({Oc:a,action:"om",data:b,N:c})};h.ud=function(a,b){this.qa?af(this,"oc",a,null,b):this.Jc.push({Oc:a,action:"oc",data:null,N:b})};
function af(a,b,c,d,e){c={p:c,d:d};a.m("onDisconnect "+b,c);a.eb(b,c,function(a){e&&setTimeout(function(){e(a.s,a.d)},Math.floor(0))})}h.put=function(a,b,c,d){bf(this,"p",a,b,c,d)};h.Ye=function(a,b,c,d){bf(this,"m",a,b,c,d)};function bf(a,b,c,d,e,f){d={p:c,d:d};p(f)&&(d.h=f);a.ta.push({action:b,request:d,N:e});a.Nc++;b=a.ta.length-1;a.qa?cf(a,b):a.m("Buffering put: "+c)}
function cf(a,b){var c=a.ta[b].action,d=a.ta[b].request,e=a.ta[b].N;a.ta[b].kg=a.qa;a.eb(c,d,function(d){a.m(c+" response",d);delete a.ta[b];a.Nc--;0===a.Nc&&(a.ta=[]);e&&e(d.s,d.d)})}h.se=function(a){if(this.qa){a={c:a};this.m("reportStats",a);var b=this;this.eb("s",a,function(a){"ok"!==a.s&&b.m("reportStats","Error sending stats: "+a.d)})}};
h.eg=function(a){if("r"in a){this.m("from server: "+u(a));var b=a.r,c=this.Dd[b];c&&(delete this.Dd[b],c(a.b))}else{if("error"in a)throw"A server-side error has occurred: "+a.error;"a"in a&&(b=a.a,c=a.b,this.m("handleServerMessage",b,c),"d"===b?this.Cb(c.p,c.d,!1,c.t):"m"===b?this.Cb(c.p,c.d,!0,c.t):"c"===b?df(this,c.p,c.q):"ac"===b?(a=c.s,b=c.d,c=this.Ja,delete this.Ja,c&&c.Wc&&c.Wc(a,b)):"sd"===b?this.ue?this.ue(c):"msg"in c&&"undefined"!==typeof console&&console.log("WILDDOG: "+c.msg.replace("\n",
"\nWILDDOG: ")):Mb("Unrecognized action received from server: "+u(b)+"\nAre you using the latest client?"))}};
h.Lc=function(a){this.m("connection ready");this.qa=!0;this.Ac=(new Date).getTime();this.qe({serverTimeOffset:a-(new Date).getTime()});a={};a["sdk.js."+CLIENT_VERSION.replace(/\./g,"-")]=1;"undefined"!==typeof window&&(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(navigator.userAgent)&&(a["framework.cordova"]=1);this.se(a);ef(this);this.Ic(!0)};
function Ue(a,b){x(!a.Va,"Scheduling a connect when we're already connected/ing?");a.Qb&&clearTimeout(a.Qb);a.Qb=setTimeout(function(){a.Qb=null;ff(a)},Math.floor(b))}h.jg=function(a){a&&!this.nc&&this.cb===this.qd&&(this.m("Window became visible.  Reducing delay."),this.cb=1E3,this.Va||Ue(this,0));this.nc=a};h.hg=function(a){a?(this.m("Browser went online."),this.cb=1E3,this.Va||Ue(this,0)):(this.m("Browser went offline.  Killing connection."),this.Va&&this.Va.close())};
h.bf=function(){this.m("data client disconnected");this.qa=!1;this.Va=null;for(var a=0;a<this.ta.length;a++){var b=this.ta[a];b&&"h"in b.request&&b.kg&&(b.N&&b.N("disconnect"),delete this.ta[a],this.Nc--)}0===this.Nc&&(this.ta=[]);this.Dd={};gf(this)&&(this.nc?this.Ac&&(3E4<(new Date).getTime()-this.Ac&&(this.cb=1E3),this.Ac=null):(this.m("Window isn't visible.  Delaying reconnect."),this.cb=this.qd,this.me=(new Date).getTime()),a=Math.max(0,this.cb-((new Date).getTime()-this.me)),a*=Math.random(),
this.m("Trying to reconnect in "+a+"ms"),Ue(this,a),this.cb=Math.min(this.qd,1.3*this.cb));this.Ic(!1)};function ff(a){if(gf(a)){a.m("Making a connection attempt");a.me=(new Date).getTime();a.Ac=null;var b=r(a.eg,a),c=r(a.Lc,a),d=r(a.bf,a),e=a.id+":"+Ve++;a.Va=new Le(e,a.J,b,c,d,function(b){y(b+" ("+a.J.toString()+")");a.Ve=!0})}}h.xc=function(){this.ke=!0;this.Va?this.Va.close():(this.Qb&&(clearTimeout(this.Qb),this.Qb=null),this.qa&&this.bf())};
h.resume=function(){this.ke=!1;this.cb=1E3;this.Va||Ue(this,0)};function df(a,b,c){c=c?ab(c,function(a){return Rb(a)}).join("$"):"default";(a=Ze(a,b,c))&&a.N&&a.N("permission_denied")}function Ze(a,b,c){b=(new H(b)).toString();var d;p(a.ja[b])?(d=a.ja[b][c],delete a.ja[b][c],0===nb(a.ja[b])&&delete a.ja[b]):d=void 0;return d}
function ef(a){$e(a);w(a.ja,function(b){w(b,function(b){Xe(a,b)})});for(var b=0;b<a.ta.length;b++)a.ta[b]&&cf(a,b);for(;a.Jc.length;)b=a.Jc.shift(),af(a,b.action,b.Oc,b.data,b.N)}function gf(a){var b;b=Ie.Ub().gc;return!a.Ve&&!a.ke&&b};function hf(a,b){this.m=Lb("p:rest:");this.J=a;this.Cb=b;this.Ja=null;this.ja={}}function jf(a,b){if(p(b))return"tag$"+b;var c=a.B;x(kf(c)&&c.g==R,"should have a tag if it's not a default query.");return a.path.toString()}h=hf.prototype;
h.We=function(a,b,c,d){var e=a.path.toString();this.m("Listen called for "+e+" "+We(a));var f=jf(a,c),g={};this.ja[f]=g;a=lf(a.B);var k=this;mf(this,e+".json",a,function(a,b){var l=b;404===a&&(a=l=null);null===a&&k.Cb(e,l,!1,c);t(k.ja,f)===g&&d(a?401==a?"permission_denied":"rest_error:"+a:"ok",null)})};h.tf=function(a,b){var c=jf(a,b);delete this.ja[c]};h.Fe=function(a,b){this.Ja=a;var c=Xc(a),d=c.data,c=c.Yd&&c.Yd.exp;b&&b("ok",{auth:d,expires:c})};h.sf=function(a){this.Ja=null;a("ok",null)};
h.pe=function(){};h.af=function(){};h.ud=function(){};h.put=function(){};h.Ye=function(){};h.se=function(){};
function mf(a,b,c,d){c=c||{};c.format="export";a.Ja&&(c.auth=a.Ja);var e=(a.J.Gb?"https://":"http://")+a.J.host+b+"?"+ta(c);a.m("Sending REST request for "+e);var f=new XMLHttpRequest;f.onreadystatechange=function(){if(d&&4===f.readyState){a.m("REST Response for "+e+" received. status:",f.status,"response:",f.responseText);var b=null;if(200<=f.status&&300>f.status){try{b=La(f.responseText)}catch(k){y("Failed to parse JSON response for "+e+": "+f.responseText)}d(null,b)}else 401!==f.status&&404!==
f.status&&y("Got unsuccessful REST response for "+e+" Status: "+f.status),d(f.status);d=null}};f.open("GET",e,!0);f.send()};function nf(){this.Fd=Q}nf.prototype.j=function(a){return this.Fd.sa(a)};nf.prototype.toString=function(){return this.Fd.toString()};function of(){this.set={}}h=of.prototype;h.add=function(a,b){this.set[a]=null!==b?b:!0};h.contains=function(a){return qa(this.set,a)};h.get=function(a){return this.contains(a)?this.set[a]:void 0};h.remove=function(a){delete this.set[a]};h.clear=function(){this.set={}};h.f=function(){return vb(this.set)};h.count=function(){return nb(this.set)};function pf(a,b){w(a.set,function(a,d){b(d,a)})}h.keys=function(){var a=[];w(this.set,function(b,c){a.push(c)});return a};function qf(){this.w=this.H=null}qf.prototype.find=function(a){if(null!=this.H)return this.H.sa(a);if(a.f()||null==this.w)return null;var b=J(a);a=K(a);return this.w.contains(b)?this.w.get(b).find(a):null};function rf(a,b,c){if(b.f())a.H=c,a.w=null;else if(null!==a.H)a.H=a.H.K(b,c);else{null==a.w&&(a.w=new of);var d=J(b);a.w.contains(d)||a.w.add(d,new qf);a=a.w.get(d);b=K(b);rf(a,b,c)}}
function sf(a,b){if(b.f())return a.H=null,a.w=null,!0;if(null!==a.H){if(a.H.R())return!1;var c=a.H;a.H=null;c.W(R,function(b,c){rf(a,new H(b),c)});return sf(a,b)}return null!==a.w?(c=J(b),b=K(b),a.w.contains(c)&&sf(a.w.get(c),b)&&a.w.remove(c),a.w.f()?(a.w=null,!0):!1):!0}function tf(a,b,c){null!==a.H?c(b,a.H):a.W(function(a,e){var d=new H(b.toString()+"/"+a);tf(e,d,c)})}qf.prototype.W=function(a){null!==this.w&&pf(this.w,function(b,c){a(b,c)})};function uf(a,b){this.type=vf;this.source=wf;this.path=a;this.te=b}uf.prototype.Mc=function(){return this.path.f()?this:new uf(K(this.path),this.te)};uf.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" ack write revert="+this.te+")"};function xf(a,b,c){this.type=yf;this.source=a;this.path=b;this.children=c}xf.prototype.Mc=function(a){if(this.path.f())return a=this.children.subtree(new H(a)),a.f()?null:a.value?new zf(this.source,L,a.value):new xf(this.source,L,a);x(J(this.path)===a,"Can't get a merge for a child not on the path of the operation");return new xf(this.source,K(this.path),this.children)};xf.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"};function zf(a,b,c){this.type=Af;this.source=a;this.path=b;this.Ma=c}zf.prototype.Mc=function(a){return this.path.f()?new zf(this.source,L,this.Ma.P(a)):new zf(this.source,K(this.path),this.Ma)};zf.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" overwrite: "+this.Ma.toString()+")"};function Bf(a,b){this.type=Cf;this.source=a;this.path=b}Bf.prototype.Mc=function(){return this.path.f()?new Bf(this.source,L):new Bf(this.source,K(this.path))};Bf.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" listen_complete)"};var Af=0,yf=1,vf=2,Cf=3;function Df(a,b,c,d){this.ce=a;this.Oe=b;this.Eb=c;this.Ae=d;x(!d||b,"Tagged queries must be from server.")}var wf=new Df(!0,!1,null,!1),Ef=new Df(!1,!0,null,!1);Df.prototype.toString=function(){return this.ce?"user":this.Ae?"server(queryID="+this.Eb+")":"server"};function Ff(a,b){this.value=a;this.children=b||Gf}var Gf=new je(function(a,b){return a===b?0:a<b?-1:1});function Hf(a){var b=If;w(a,function(a,d){b=b.set(new H(d),a)});return b}h=Ff.prototype;h.f=function(){return null===this.value&&this.children.f()};function Jf(a,b,c){if(null!=a.value&&c(a.value))return{path:L,value:a.value};if(b.f())return null;var d=J(b);a=a.children.get(d);return null!==a?(b=Jf(a,K(b),c),null!=b?{path:(new H(d)).u(b.path),value:b.value}:null):null}
function Kf(a,b){return Jf(a,b,function(){return!0})}h.subtree=function(a){if(a.f())return this;var b=this.children.get(J(a));return null!==b?b.subtree(K(a)):If};h.set=function(a,b){if(a.f())return new Ff(b,this.children);var c=J(a),d=(this.children.get(c)||If).set(K(a),b),c=this.children.Sa(c,d);return new Ff(this.value,c)};
h.remove=function(a){if(a.f())return this.children.f()?If:new Ff(null,this.children);var b=J(a),c=this.children.get(b);return c?(a=c.remove(K(a)),b=a.f()?this.children.remove(b):this.children.Sa(b,a),null===this.value&&b.f()?If:new Ff(this.value,b)):this};h.get=function(a){if(a.f())return this.value;var b=this.children.get(J(a));return b?b.get(K(a)):null};
function Lf(a,b,c){if(b.f())return c;var d=J(b);b=Lf(a.children.get(d)||If,K(b),c);d=b.f()?a.children.remove(d):a.children.Sa(d,b);return new Ff(a.value,d)}function Mf(a,b){return Nf(a,L,b)}function Nf(a,b,c){var d={};a.children.na(function(a,f){d[a]=Nf(f,b.u(a),c)});return c(b,a.value,d)}function Of(a,b,c){return Pf(a,b,L,c)}function Pf(a,b,c,d){var e=a.value?d(c,a.value):!1;if(e)return e;if(b.f())return null;e=J(b);return(a=a.children.get(e))?Pf(a,K(b),c.u(e),d):null}
function Qf(a,b,c){if(!b.f()){var d=!0;a.value&&(d=c(L,a.value));!0===d&&(d=J(b),(a=a.children.get(d))&&Rf(a,K(b),L.u(d),c))}}function Rf(a,b,c,d){if(b.f())return a;a.value&&d(c,a.value);var e=J(b);return(a=a.children.get(e))?Rf(a,K(b),c.u(e),d):If}function Sf(a,b){Tf(a,L,b)}function Tf(a,b,c){a.children.na(function(a,e){Tf(e,b.u(a),c)});a.value&&c(b,a.value)}function Uf(a,b){a.children.na(function(a,d){d.value&&b(a,d.value)})}var If=new Ff(null);
Ff.prototype.toString=function(){var a={};Sf(this,function(b,c){a[b.toString()]=c.toString()});return u(a)};function Vf(a,b,c){this.G=a;this.M=b;this.Rb=c}function Wf(a,b){return a.M&&!a.Rb||a.G.La(b)}Vf.prototype.j=function(){return this.G};function Xf(a,b){this.I=a;this.Gd=b}function Yf(a,b,c,d){return new Xf(new Vf(b,c,d),a.Gd)}function Zf(a){return a.I.M?a.I.j():null}Xf.prototype.C=function(){return this.Gd};function $f(a){return a.Gd.M?a.Gd.j():null};function V(a,b,c,d){this.type=a;this.Na=b;this.$a=c;this.oe=d;this.Ad=void 0};function ag(a,b,c,d){this.Zd=b;this.Hd=c;this.Ad=d;this.cd=a}ag.prototype.Xb=function(){var a=this.Hd.jc();return"value"===this.cd?a.path:a.parent().path};ag.prototype.ee=function(){return this.cd};ag.prototype.Sb=function(){return this.Zd.Sb(this)};ag.prototype.toString=function(){return this.Xb().toString()+":"+this.cd+":"+u(this.Hd.Me())};function bg(a,b,c){this.Zd=a;this.error=b;this.path=c}bg.prototype.Xb=function(){return this.path};bg.prototype.ee=function(){return"cancel"};
bg.prototype.Sb=function(){return this.Zd.Sb(this)};bg.prototype.toString=function(){return this.path.toString()+":cancel"};function cg(a,b,c){this.Ob=a;this.sb=b;this.tb=c||null}h=cg.prototype;h.lf=function(a){return"value"===a};h.createEvent=function(a,b){var c=b.B.g;return new ag("value",this,new U(a.Na,b.jc(),c))};h.Sb=function(a){var b=this.tb;if("cancel"===a.ee()){x(this.sb,"Raising a cancel event on a listener with no cancel callback");var c=this.sb;return function(){c.call(b,a.error)}}var d=this.Ob;return function(){d.call(b,a.Hd)}};h.He=function(a,b){return this.sb?new bg(this,a,b):null};
h.matches=function(a){return a instanceof cg?a.Ob&&this.Ob?a.Ob===this.Ob&&a.tb===this.tb:!0:!1};h.Se=function(){return null!==this.Ob};function dg(a,b,c){this.ma=a;this.sb=b;this.tb=c}h=dg.prototype;h.lf=function(a){a="children_added"===a?"child_added":a;return rb(this.ma,"children_removed"===a?"child_removed":a)};h.He=function(a,b){return this.sb?new bg(this,a,b):null};
h.createEvent=function(a,b){x(null!=a.$a,"Child events should have a childName.");var c=b.jc().u(a.$a);return new ag(a.type,this,new U(a.Na,c,b.B.g),a.Ad)};h.Sb=function(a){var b=this.tb;if("cancel"===a.ee()){x(this.sb,"Raising a cancel event on a listener with no cancel callback");var c=this.sb;return function(){c.call(b,a.error)}}var d=this.ma[a.cd];return function(){d.call(b,a.Hd,a.Ad)}};
h.matches=function(a){if(a instanceof dg){if(!this.ma||!a.ma)return!0;if(this.tb===a.tb){var b=nb(a.ma);if(b===nb(this.ma)){if(1===b){var b=ob(a.ma),c=ob(this.ma);return c===b&&(!a.ma[b]||!this.ma[c]||a.ma[b]===this.ma[c])}return mb(this.ma,function(b,c){return a.ma[c]===b})}}}return!1};h.Se=function(){return null!==this.ma};function eg(a){this.X=a;this.g=a.B.g}function fg(a,b,c,d){var e=[],f=[];ua(b,function(b){"child_changed"===b.type&&a.g.kd(b.oe,b.Na)&&f.push(new V("child_moved",b.Na,b.$a))});gg(a,e,"child_removed",b,d,c);gg(a,e,"child_added",b,d,c);gg(a,e,"child_moved",f,d,c);gg(a,e,"child_changed",b,d,c);gg(a,e,"value",b,d,c);return e}function gg(a,b,c,d,e,f){d=$a(d,function(a){return a.type===c});gb(d,r(a.Hf,a));ua(d,function(c){var d=hg(a,c,f);ua(e,function(e){e.lf(c.type)&&b.push(e.createEvent(d,a.X))})})}
function hg(a,b,c){"value"!==b.type&&"child_removed"!==b.type&&(b.Ad=c.Qe(b.$a,b.Na,a.g));return b}eg.prototype.Hf=function(a,b){if(null==a.$a||null==b.$a)throw Eb("Should only compare child_ events.");return this.g.compare(new N(a.$a,a.Na),new N(b.$a,b.Na))};function ig(){}ig.prototype.Pe=function(){return null};ig.prototype.de=function(){return null};var jg=new ig;function kg(a,b,c){this.uf=a;this.Oa=b;this.wd=c}kg.prototype.Pe=function(a){var b=this.Oa.I;if(Wf(b,a))return b.j().P(a);b=null!=this.wd?new Vf(this.wd,!0,!1):this.Oa.C();return this.uf.Za(a,b)};kg.prototype.de=function(a,b,c){var d=null!=this.wd?this.wd:$f(this.Oa);a=this.uf.Xd(d,b,1,c,a);return 0===a.length?null:a[0]};function lg(a,b){this.Qd=a;this.Ff=b}function mg(a){this.L=a}
mg.prototype.fb=function(a,b,c,d){var e=new ng,f;if(b.type===Af)b.source.ce?c=og(this,a,b.path,b.Ma,c,d,e):(x(b.source.Oe,"Unknown source."),f=b.source.Ae,c=pg(this,a,b.path,b.Ma,c,d,f,e));else if(b.type===yf)b.source.ce?c=qg(this,a,b.path,b.children,c,d,e):(x(b.source.Oe,"Unknown source."),f=b.source.Ae,c=rg(this,a,b.path,b.children,c,d,f,e));else if(b.type===vf)if(b.te)if(f=b.path,null!=c.lc(f))c=a;else{b=new kg(c,a,d);d=a.I.j();if(f.f()||".priority"===J(f))a.C().M?b=c.ya($f(a)):(b=a.C().j(),x(b instanceof
T,"serverChildren would be complete if leaf node"),b=c.rc(b)),b=this.L.xa(d,b,e);else{f=J(f);var g=c.Za(f,a.C());null==g&&Wf(a.C(),f)&&(g=d.P(f));b=null!=g?this.L.K(d,f,g,b,e):a.I.j().La(f)?this.L.K(d,f,Q,b,e):d;b.f()&&a.C().M&&(d=c.ya($f(a)),d.R()&&(b=this.L.xa(b,d,e)))}d=a.C().M||null!=c.lc(L);c=Yf(a,b,d,this.L.Ka())}else c=sg(this,a,b.path,c,d,e);else if(b.type===Cf)d=b.path,b=a.C(),f=b.j(),g=b.M||d.f(),c=tg(this,new Xf(a.I,new Vf(f,g,b.Rb)),d,c,jg,e);else throw Eb("Unknown operation type: "+b.type);
e=pb(e.kb);d=c;b=d.I;b.M&&(f=b.j().R()||b.j().f(),g=Zf(a),(0<e.length||!a.I.M||f&&!b.j().da(g)||!b.j().F().da(g.F()))&&e.push(new V("value",Zf(d))));return new lg(c,e)};
function tg(a,b,c,d,e,f){var g=b.I;if(null!=d.lc(c))return b;var k;if(c.f())x(b.C().M,"If change path is empty, we must have complete server data"),b.C().Rb?(e=$f(b),d=d.rc(e instanceof T?e:Q)):d=d.ya($f(b)),f=a.L.xa(b.I.j(),d,f);else{var l=J(c);if(".priority"==l)x(1==qd(c),"Can't have a priority with additional path components"),f=g.j(),k=b.C().j(),d=d.Vc(c,f,k),f=null!=d?a.L.ga(f,d):g.j();else{var m=K(c);Wf(g,l)?(k=b.C().j(),d=d.Vc(c,g.j(),k),d=null!=d?g.j().P(l).K(m,d):g.j().P(l)):d=d.Za(l,b.C());
f=null!=d?a.L.K(g.j(),l,d,e,f):g.j()}}return Yf(b,f,g.M||c.f(),a.L.Ka())}function pg(a,b,c,d,e,f,g,k){var l=b.C();g=g?a.L:a.L.Tb();if(c.f())d=g.xa(l.j(),d,null);else if(g.Ka()&&!l.Rb)d=l.j().K(c,d),d=g.xa(l.j(),d,null);else{var m=J(c);if((c.f()?!l.M||l.Rb:!Wf(l,J(c)))&&1<qd(c))return b;d=l.j().P(m).K(K(c),d);d=".priority"==m?g.ga(l.j(),d):g.K(l.j(),m,d,jg,null)}l=l.M||c.f();b=new Xf(b.I,new Vf(d,l,g.Ka()));return tg(a,b,c,e,new kg(e,b,f),k)}
function og(a,b,c,d,e,f,g){var k=b.I;e=new kg(e,b,f);if(c.f())g=a.L.xa(b.I.j(),d,g),a=Yf(b,g,!0,a.L.Ka());else if(f=J(c),".priority"===f)g=a.L.ga(b.I.j(),d),a=Yf(b,g,k.M,k.Rb);else{var l=K(c);c=k.j().P(f);if(!l.f()){var m=e.Pe(f);d=null!=m?".priority"===rd(l)&&m.sa(l.parent()).f()?m:m.K(l,d):Q}c.da(d)?a=b:(g=a.L.K(k.j(),f,d,e,g),a=Yf(b,g,k.M,a.L.Ka()))}return a}
function qg(a,b,c,d,e,f,g){var k=b;Sf(d,function(d,m){var l=c.u(d);Wf(b.I,J(l))&&(k=og(a,k,l,m,e,f,g))});Sf(d,function(d,m){var l=c.u(d);Wf(b.I,J(l))||(k=og(a,k,l,m,e,f,g))});return k}function ug(a,b){Sf(b,function(b,d){a=a.K(b,d)});return a}
function rg(a,b,c,d,e,f,g,k){if(b.C().j().f()&&!b.C().M)return b;var l=b;c=c.f()?d:Lf(If,c,d);var m=b.C().j();c.children.na(function(c,d){if(m.La(c)){var B=b.C().j().P(c),B=ug(B,d);l=pg(a,l,new H(c),B,e,f,g,k)}});c.children.na(function(c,d){var B=!b.C().M&&null==d.value;m.La(c)||B||(B=b.C().j().P(c),B=ug(B,d),l=pg(a,l,new H(c),B,e,f,g,k))});return l}
function sg(a,b,c,d,e,f){if(null!=d.lc(c))return b;var g=new kg(d,b,e),k=e=b.I.j();if(b.C().M){if(c.f())e=d.ya($f(b)),k=a.L.xa(b.I.j(),e,f);else if(".priority"===J(c)){var l=d.Za(J(c),b.C());null==l||e.f()||e.F().da(l)||(k=a.L.ga(e,l))}else l=J(c),e=d.Za(l,b.C()),null!=e&&(k=a.L.K(b.I.j(),l,e,g,f));e=!0}else if(b.I.M||c.f())k=e,e=b.I.j(),e.R()||e.W(R,function(c){var e=d.Za(c,b.C());null!=e&&(k=a.L.K(k,c,e,g,f))}),e=b.I.M;else{l=J(c);if(1==qd(c)||Wf(b.I,l))c=d.Za(l,b.C()),null!=c&&(k=a.L.K(e,l,c,g,
f));e=!1}return Yf(b,k,e,a.L.Ka())};function vg(a,b){this.X=a;var c=a.B,d=new wg(c.g),c=kf(c)?new wg(c.g):c.oa?new xg(c):new yg(c);this.hf=new mg(c);var e=b.C(),f=b.I,g=d.xa(Q,e.j(),null),k=c.xa(Q,f.j(),null);this.Oa=new Xf(new Vf(k,f.M,c.Ka()),new Vf(g,e.M,d.Ka()));this.ab=[];this.Pf=new eg(a)}h=vg.prototype;h.C=function(){return this.Oa.C().j()};h.mb=function(a){var b=$f(this.Oa);return b&&(kf(this.X.B)||!a.f()&&!b.P(J(a)).f())?b.sa(a):null};h.f=function(){return 0===this.ab.length};h.Kb=function(a){this.ab.push(a)};
h.nb=function(a,b){var c=[];if(b){x(null==a,"A cancel should cancel all event registrations.");var d=this.X.path;ua(this.ab,function(a){(a=a.He(b,d))&&c.push(a)})}if(a){for(var e=[],f=0;f<this.ab.length;++f){var g=this.ab[f];if(!g.matches(a))e.push(g);else if(a.Se()){e=e.concat(this.ab.slice(f+1));break}}this.ab=e}else this.ab=[];return c};
h.fb=function(a,b,c){a.type===yf&&null!==a.source.Eb&&(x($f(this.Oa),"We should always have a full cache before handling merges"),x(Zf(this.Oa),"Missing event cache, even though we have a server cache"));var d=this.Oa;a=this.hf.fb(d,a,b,c);b=this.hf;c=a.Qd;x(c.I.j().zc(b.L.g),"Event snap not indexed");x(c.C().j().zc(b.L.g),"Server snap not indexed");x(a.Qd.C().M||!d.C().M,"Once a server snap is complete, it should never go back");this.Oa=a.Qd;return zg(this,a.Ff,a.Qd.I.j(),null)};
function Ag(a,b){var c=a.Oa.I,d=[];c.j().R()||c.j().W(R,function(a,b){d.push(new V("child_added",b,a))});c.M&&d.push(new V("value",c.j()));return zg(a,d,c.j(),b)}function zg(a,b,c,d){return fg(a.Pf,b,c,d?[d]:a.ab)};function Bg(){this.Ca={}}h=Bg.prototype;h.f=function(){return vb(this.Ca)};h.fb=function(a,b,c){var d=a.source.Eb;if(null!==d)return d=t(this.Ca,d),x(null!=d,"SyncTree gave us an op for an invalid query."),d.fb(a,b,c);var e=[];w(this.Ca,function(d){e=e.concat(d.fb(a,b,c))});return e};h.Kb=function(a,b,c,d,e){var f=We(a),g=t(this.Ca,f);g||((g=c.ya(e?d:null))?c=!0:(g=d instanceof T?c.rc(d):Q,c=!1),g=new vg(a,new Xf(new Vf(g,c,!1),new Vf(d,e,!1))),this.Ca[f]=g);g.Kb(b);return Ag(g,b)};
h.nb=function(a,b,c){var d=We(a),e=[],f=[],g=null!=Cg(this);if("default"===d){var k=this;w(this.Ca,function(a,d){f=f.concat(a.nb(b,c));a.f()&&(delete k.Ca[d],kf(a.X.B)||e.push(a.X))})}else{var l=t(this.Ca,d);l&&(f=f.concat(l.nb(b,c)),l.f()&&(delete this.Ca[d],kf(l.X.B)||e.push(l.X)))}g&&null==Cg(this)&&e.push(new W(a.D.la,a.D,a.path));return{mg:e,Qf:f}};function Dg(a){return $a(pb(a.Ca),function(a){return!kf(a.X.B)})}h.mb=function(a){var b=null;w(this.Ca,function(c){b=b||c.mb(a)});return b};
function Eg(a,b){if(kf(b.B))return Cg(a);var c=We(b);return t(a.Ca,c)}function Cg(a){return ub(a.Ca,function(a){return kf(a.X.B)})||null};function Fg(a){this.$=a}var Gg=new Fg(new Ff(null));function Hg(a,b,c){if(b.f())return new Fg(new Ff(c));var d=Kf(a.$,b);if(null!=d){var e=d.path,d=d.value;b=I(e,b);d=d.K(b,c);return new Fg(a.$.set(e,d))}a=Lf(a.$,b,new Ff(c));return new Fg(a)}function Ig(a,b,c){var d=a;ra(c,function(a,c){d=Hg(d,b.u(a),c)});return d}Fg.prototype.Bd=function(a){if(a.f())return Gg;a=Lf(this.$,a,If);return new Fg(a)};function Jg(a,b){var c=Kf(a.$,b);return null!=c?a.$.get(c.path).sa(I(c.path,b)):null}
function Kg(a){var b=[],c=a.$.value;null!=c?c.R()||c.W(R,function(a,c){b.push(new N(a,c))}):a.$.children.na(function(a,c){null!=c.value&&b.push(new N(a,c.value))});return b}function Lg(a,b){if(b.f())return a;var c=Jg(a,b);return null!=c?new Fg(new Ff(c)):new Fg(a.$.subtree(b))}Fg.prototype.f=function(){return this.$.f()};Fg.prototype.apply=function(a){return Mg(L,this.$,a)};
function Mg(a,b,c){if(null!=b.value)return c.K(a,b.value);var d=null;b.children.na(function(b,f){".priority"===b?(x(null!==f.value,"Priority writes must always be leaf nodes"),d=f.value):c=Mg(a.u(b),f,c)});c.sa(a).f()||null===d||(c=c.K(a.u(".priority"),d));return c};function Ng(){this.V=Gg;this.Da=[];this.Bc=-1}h=Ng.prototype;
h.Bd=function(a){var b=eb(this.Da,function(b){return b.Sd===a});x(0<=b,"removeWrite called with nonexistent writeId.");var c=this.Da[b];this.Da.splice(b,1);for(var d=c.visible,e=!1,f=this.Da.length-1;d&&0<=f;){var g=this.Da[f];g.visible&&(f>=b&&Og(g,c.path)?d=!1:c.path.contains(g.path)&&(e=!0));f--}if(d){if(e)this.V=Pg(this.Da,Qg,L),this.Bc=0<this.Da.length?this.Da[this.Da.length-1].Sd:-1;else if(c.Ma)this.V=this.V.Bd(c.path);else{var k=this;w(c.children,function(a,b){k.V=k.V.Bd(c.path.u(b))})}return c.path}return null};
h.ya=function(a,b,c,d){if(c||d){var e=Lg(this.V,a);return!d&&e.f()?b:d||null!=b||null!=Jg(e,L)?(e=Pg(this.Da,function(b){return(b.visible||d)&&(!c||!(0<=Za(c,b.Sd)))&&(b.path.contains(a)||a.contains(b.path))},a),b=b||Q,e.apply(b)):null}e=Jg(this.V,a);if(null!=e)return e;e=Lg(this.V,a);return e.f()?b:null!=b||null!=Jg(e,L)?(b=b||Q,e.apply(b)):null};
h.rc=function(a,b){var c=Q,d=Jg(this.V,a);if(d)d.R()||d.W(R,function(a,b){c=c.T(a,b)});else if(b){var e=Lg(this.V,a);b.W(R,function(a,b){var d=Lg(e,new H(a)).apply(b);c=c.T(a,d)});ua(Kg(e),function(a){c=c.T(a.name,a.node)})}else e=Lg(this.V,a),ua(Kg(e),function(a){c=c.T(a.name,a.node)});return c};h.Vc=function(a,b,c,d){x(c||d,"Either existingEventSnap or existingServerSnap must exist");a=a.u(b);if(null!=Jg(this.V,a))return null;a=Lg(this.V,a);return a.f()?d.sa(b):a.apply(d.sa(b))};
h.Za=function(a,b,c){a=a.u(b);var d=Jg(this.V,a);return null!=d?d:Wf(c,b)?Lg(this.V,a).apply(c.j().P(b)):null};h.lc=function(a){return Jg(this.V,a)};h.Xd=function(a,b,c,d,e,f){var g;a=Lg(this.V,a);g=Jg(a,L);if(null==g)if(null!=b)g=a.apply(b);else return[];g=g.pb(f);if(g.f()||g.R())return[];b=[];a=Rd(f);e=e?g.Yb(c,f):g.Wb(c,f);for(f=S(e);f&&b.length<d;)0!==a(f,c)&&b.push(f),f=S(e);return b};
function Og(a,b){return a.Ma?a.path.contains(b):!!tb(a.children,function(c,d){return a.path.u(d).contains(b)})}function Qg(a){return a.visible}
function Pg(a,b,c){for(var d=Gg,e=0;e<a.length;++e){var f=a[e];if(b(f)){var g=f.path;if(f.Ma)c.contains(g)?(g=I(c,g),d=Hg(d,g,f.Ma)):g.contains(c)&&(g=I(g,c),d=Hg(d,L,f.Ma.sa(g)));else if(f.children)if(c.contains(g))g=I(c,g),d=Ig(d,g,f.children);else{if(g.contains(c))if(g=I(g,c),g.f())d=Ig(d,L,f.children);else if(f=t(f.children,J(g)))f=f.sa(K(g)),d=Hg(d,L,f)}else throw Eb("WriteRecord should have .snap or .children");}}return d}function Rg(a,b){this.Ib=a;this.$=b}h=Rg.prototype;
h.ya=function(a,b,c){return this.$.ya(this.Ib,a,b,c)};h.rc=function(a){return this.$.rc(this.Ib,a)};h.Vc=function(a,b,c){return this.$.Vc(this.Ib,a,b,c)};h.lc=function(a){return this.$.lc(this.Ib.u(a))};h.Xd=function(a,b,c,d,e){return this.$.Xd(this.Ib,a,b,c,d,e)};h.Za=function(a,b){return this.$.Za(this.Ib,a,b)};h.u=function(a){return new Rg(this.Ib.u(a),this.$)};function Sg(a){this.wa=If;this.Db=new Ng;this.ze={};this.ic={};this.Cc=a}function Tg(a,b,c,d,e){var f=a.Db,g=e;x(d>f.Bc,"Stacking an older write on top of newer ones");p(g)||(g=!0);f.Da.push({path:b,Ma:c,Sd:d,visible:g});g&&(f.V=Hg(f.V,b,c));f.Bc=d;return e?Ug(a,new zf(wf,b,c)):[]}function Vg(a,b,c,d){var e=a.Db;x(d>e.Bc,"Stacking an older merge on top of newer ones");e.Da.push({path:b,children:c,Sd:d,visible:!0});e.V=Ig(e.V,b,c);e.Bc=d;c=Hf(c);return Ug(a,new xf(wf,b,c))}
function Wg(a,b,c){c=c||!1;b=a.Db.Bd(b);return null==b?[]:Ug(a,new uf(b,c))}function Xg(a,b,c){c=Hf(c);return Ug(a,new xf(Ef,b,c))}function Yg(a,b,c,d){d=Zg(a,d);if(null!=d){var e=$g(d);d=e.path;e=e.Eb;b=I(d,b);c=new zf(new Df(!1,!0,e,!0),b,c);return ah(a,d,c)}return[]}function bh(a,b,c,d){if(d=Zg(a,d)){var e=$g(d);d=e.path;e=e.Eb;b=I(d,b);c=Hf(c);c=new xf(new Df(!1,!0,e,!0),b,c);return ah(a,d,c)}return[]}
Sg.prototype.Kb=function(a,b){var c=a.path,d=null,e=!1;Qf(this.wa,c,function(a,b){var f=I(a,c);d=b.mb(f);e=e||null!=Cg(b);return!d});var f=this.wa.get(c);f?(e=e||null!=Cg(f),d=d||f.mb(L)):(f=new Bg,this.wa=this.wa.set(c,f));var g;null!=d?g=!0:(g=!1,d=Q,Uf(this.wa.subtree(c),function(a,b){var c=b.mb(L);c&&(d=d.T(a,c))}));var k=null!=Eg(f,a);if(!k&&!kf(a.B)){var l=ch(a);x(!rb(this.ic,l),"View does not exist, but we have a tag");var m=dh++;this.ic[l]=m;this.ze["_"+m]=l}g=f.Kb(a,b,new Rg(c,this.Db),d,
g);k||e||(f=Eg(f,a),g=g.concat(eh(this,a,f)));return g};
Sg.prototype.nb=function(a,b,c){var d=a.path,e=this.wa.get(d),f=[];if(e&&("default"===We(a)||null!=Eg(e,a))){f=e.nb(a,b,c);e.f()&&(this.wa=this.wa.remove(d));e=f.mg;f=f.Qf;b=-1!==eb(e,function(a){return kf(a.B)});var g=Of(this.wa,d,function(a,b){return null!=Cg(b)});if(b&&!g&&(d=this.wa.subtree(d),!d.f()))for(var d=fh(d),k=0;k<d.length;++k){var l=d[k],m=l.X,l=gh(this,l);this.Cc.ve(m,hh(this,m),l.gd,l.N)}if(!g&&0<e.length&&!c)if(b)this.Cc.Kd(a,null);else{var P=this;ua(e,function(a){We(a);var b=P.ic[ch(a)];
P.Cc.Kd(a,b)})}ih(this,e)}return f};Sg.prototype.ya=function(a,b){var c=this.Db,d=Of(this.wa,a,function(b,c){var d=I(b,a);if(d=c.mb(d))return d});return c.ya(a,d,b,!0)};function fh(a){return Mf(a,function(a,c,d){if(c&&null!=Cg(c))return[Cg(c)];var b=[];c&&(b=Dg(c));w(d,function(a){b=b.concat(a)});return b})}function ih(a,b){for(var c=0;c<b.length;++c){var d=b[c];if(!kf(d.B)){var d=ch(d),e=a.ic[d];delete a.ic[d];delete a.ze["_"+e]}}}
function eh(a,b,c){var d=b.path,e=hh(a,b);c=gh(a,c);b=a.Cc.ve(b,e,c.gd,c.N);d=a.wa.subtree(d);if(e)x(null==Cg(d.value),"If we're adding a query, it shouldn't be shadowed");else for(e=Mf(d,function(a,b,c){if(!a.f()&&b&&null!=Cg(b))return[Cg(b).X];var d=[];b&&(d=d.concat(ab(Dg(b),function(a){return a.X})));w(c,function(a){d=d.concat(a)});return d}),d=0;d<e.length;++d)c=e[d],a.Cc.Kd(c,hh(a,c));return b}
function gh(a,b){var c=b.X,d=hh(a,c);return{gd:function(){return(b.C()||Q).hash()},N:function(b){if("ok"===b){if(d){var e=c.path;if(b=Zg(a,d)){var g=$g(b);b=g.path;g=g.Eb;e=I(b,e);e=new Bf(new Df(!1,!0,g,!0),e);b=ah(a,b,e)}else b=[]}else b=Ug(a,new Bf(Ef,c.path));return b}switch(b){case "too_big":e="The data requested exceeds the maximum size,that can be accessed with a single request.";break;case "limits_exceeded":e="The request is refused by server side because of the resource limit of your APP plan.";
break;case "permission_denied":e="Client doesn't have permission to access the desired data.";break;case "unavailable":e="The service is unavailable";break;default:e="Unknown error."}e=Error(b+": "+e);e.code=b.toUpperCase();return a.nb(c,null,e)}}}function ch(a){return a.path.toString()+"$"+We(a)}function $g(a){var b=a.indexOf("$");x(-1!==b&&b<a.length-1,"Bad queryKey.");return{Eb:a.substr(b+1),path:new H(a.substr(0,b))}}function Zg(a,b){var c=a.ze,d="_"+b;return null!==c&&d in c?c[d]:void 0}
function hh(a,b){var c=ch(b);return t(a.ic,c)}var dh=1;function ah(a,b,c){var d=a.wa.get(b);x(d,"Missing sync point for query tag that we're tracking");return d.fb(c,new Rg(b,a.Db),null)}function Ug(a,b){return jh(a,b,a.wa,null,new Rg(L,a.Db))}function jh(a,b,c,d,e){if(b.path.f())return kh(a,b,c,d,e);var f=c.get(L);null==d&&null!=f&&(d=f.mb(L));var g=[],k=J(b.path),l=b.Mc(k);if((c=c.children.get(k))&&l)var m=d?d.P(k):null,k=e.u(k),g=g.concat(jh(a,l,c,m,k));f&&(g=g.concat(f.fb(b,e,d)));return g}
function kh(a,b,c,d,e){var f=c.get(L);null==d&&null!=f&&(d=f.mb(L));var g=[];c.children.na(function(c,f){var k=d?d.P(c):null,l=e.u(c),B=b.Mc(c);B&&(g=g.concat(kh(a,B,f,k,l)))});f&&(g=g.concat(f.fb(b,e,d)));return g};function lh(){this.uc={}}lh.prototype.get=function(){return wb(this.uc)};function mh(a){this.Gf=a;this.nd=null}mh.prototype.get=function(){var a=this.Gf.get(),b=wb(a);if(this.nd)for(var c in this.nd)b[c]-=this.nd[c];this.nd=a;return b};function nh(a,b){this.rf={};this.Id=new mh(a);this.ka=b;var c=1E4+2E4*Math.random();setTimeout(r(this.kf,this),Math.floor(c))}nh.prototype.kf=function(){var a=this.Id.get(),b={},c=!1,d;for(d in a)0<a[d]&&qa(this.rf,d)&&(b[d]=a[d],c=!0);c&&this.ka.se(b);setTimeout(r(this.kf,this),Math.floor(6E5*Math.random()))};var oh={},ph={};function qh(a){a=a.toString();oh[a]||(oh[a]=new lh);return oh[a]}function rh(a,b){var c=a.toString();ph[c]||(ph[c]=b());return ph[c]};function sh(a,b){return a&&"object"===typeof a?(x(".sv"in a,"Unexpected leaf node or priority contents"),b[a[".sv"]]):a}function th(a,b){var c=new qf;tf(a,new H(""),function(a,e){rf(c,a,uh(e,b))});return c}function uh(a,b){var c=a.F().O(),c=sh(c,b),d;if(a.R()){var e=sh(a.Ga(),b);return e!==a.Ga()||c!==a.F().O()?new Vd(e,O(c)):a}d=a;c!==a.F().O()&&(d=d.ga(new Vd(c)));a.W(R,function(a,c){var e=uh(c,b);e!==c&&(d=d.T(a,e))});return d};function vh(){this.children={};this.Xc=0;this.value=null}function wh(a,b,c){this.rd=a?a:"";this.Aa=b?b:null;this.G=c?c:new vh}function xh(a,b){for(var c=b instanceof H?b:new H(b),d=a,e;null!==(e=J(c));)var f=t(d.G.children,e)||new vh,d=new wh(e,d,f),c=K(c);return d}h=wh.prototype;h.Ga=function(){return this.G.value};function yh(a,b){x("undefined"!==typeof b,"Cannot set value to undefined");a.G.value=b;zh(a)}h.clear=function(){this.G.value=null;this.G.children={};this.G.Xc=0;zh(this)};
h.fd=function(){return 0<this.G.Xc};h.f=function(){return null===this.Ga()&&!this.fd()};h.W=function(a){var b=this;w(this.G.children,function(c,d){a(new wh(d,b,c))})};function Ah(a,b,c,d){c&&!d&&b(a);a.W(function(a){Ah(a,b,!0,d)});c&&d&&b(a)}function Bh(a,b){for(var c=a.parent();null!==c&&!b(c);)c=c.parent()}h.path=function(){return new H(null===this.Aa?this.rd:this.Aa.path()+"/"+this.rd)};h.name=function(){return this.rd};h.parent=function(){return this.Aa};
function zh(a){if(null!==a.Aa){var b=a.Aa,c=a.rd,d=a.f(),e=qa(b.G.children,c);d&&e?(delete b.G.children[c],b.G.Xc--,zh(b)):d||e||(b.G.children[c]=a.G,b.G.Xc++,zh(b))}};function Ch(){this.ub=[]}function Dh(a,b){for(var c=null,d=0;d<b.length;d++){var e=b[d],f=e.Xb();null===c||f.da(c.Xb())||(a.ub.push(c),c=null);null===c&&(c=new Eh(f));c.add(e)}c&&a.ub.push(c)}function Fh(a,b,c){Dh(a,c);Gh(a,function(a){return a.da(b)})}function Hh(a,b,c){Dh(a,c);Gh(a,function(a){return a.contains(b)||b.contains(a)})}
function Gh(a,b){for(var c=!0,d=0;d<a.ub.length;d++){var e=a.ub[d];if(e)if(e=e.Xb(),b(e)){for(var e=a.ub[d],f=0;f<e.dd.length;f++){var g=e.dd[f];if(null!==g){e.dd[f]=null;var k=g.Sb();Jb&&Gb("event: "+g.toString());Vb(k)}}a.ub[d]=null}else c=!1}c&&(a.ub=[])}function Eh(a){this.ua=a;this.dd=[]}Eh.prototype.add=function(a){this.dd.push(a)};Eh.prototype.Xb=function(){return this.ua};function Ih(a,b,c){this.J=b;this.la=a;this.Jd=qh(b);this.ha=new Ch;this.sd=1;this.ka=this.bb=null;c||0<=("object"===typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)?(this.ka=new hf(this.J,r(this.Cb,this)),setTimeout(r(this.Ic,this,!0),0)):this.ka=this.bb=new Se(this.J,r(this.Cb,this),r(this.Ic,this),r(this.qe,this));this.Fg=rh(b,r(function(){return new nh(this.Jd,this.ka)},this));this.mc=
new wh;this.ie=new nf;var d=this;this.md=new Sg({ve:function(a,b,c,k){b=[];c=d.ie.j(a.path);c.f()||(b=Ug(d.md,new zf(Ef,a.path,c)),setTimeout(function(){k("ok")},0));return b},Kd:aa});this.la.bind(this.la.qb.gb,function(a){a&&a.signIn?d.ka.Fe(a.idToken,function(b,c){d.Mb(b,c,a)},function(a,b){Jh(d,a,b)}):d.ka.sf(function(a,b){Jh(d,a,b)})});Kh(this,"connected",!1);this.za=new qf;this.bd=0;this.je=null;this.S=new Sg({ve:function(a,b,c,k){d.ka.We(a,c,b,function(b,c){var e=k(b,c);Hh(d.ha,a.path,e)});
return[]},Kd:function(a,b){d.ka.tf(a,b)}})}h=Ih.prototype;h.Mb=function(){this.Bb(!0)};function Jh(a,b,c){a.Bb(!1);"expired_token"==b&&a.la.emit(a.la.qb.Ge,{status:b,reason:c})}h.toString=function(){return(this.J.Gb?"https://":"http://")+this.J.host};h.name=function(){return this.J.Ze};function Lh(a){a=a.ie.j(new H(".info/serverTimeOffset")).O()||0;return(new Date).getTime()+a}function Mh(a){a=a={timestamp:Lh(a)};a.timestamp=a.timestamp||(new Date).getTime();return a}
h.Cb=function(a,b,c,d){this.bd++;var e=new H(a);b=this.je?this.je(a,b):b;a=[];d?c?(b=lb(b,function(a){return O(a)}),a=bh(this.S,e,b,d)):(b=O(b),a=Yg(this.S,e,b,d)):c?(d=lb(b,function(a){return O(a)}),a=Xg(this.S,e,d)):(d=O(b),a=Ug(this.S,new zf(Ef,e,d)));d=e;0<a.length&&(d=Nh(this,e));Hh(this.ha,d,a)};h.Ic=function(a){Kh(this,"connected",a);!1===a&&Oh(this)};h.qe=function(a){var b=this;Sb(a,function(a,d){Kh(b,d,a)})};h.Bb=function(a){Kh(this,"authenticated",a)};
function Kh(a,b,c){b=new H("/.info/"+b);c=O(c);var d=a.ie;d.Fd=d.Fd.K(b,c);c=Ug(a.md,new zf(Ef,b,c));Hh(a.ha,b,c)}h.ob=function(a,b,c,d){this.m("set",{path:a.toString(),value:b,Zg:c});var e=Mh(this);b=O(b,c);var e=uh(b,e),f=this.sd++,e=Tg(this.S,a,e,f,!0);Dh(this.ha,e);var g=this;this.ka.put(a.toString(),b.O(!0),function(b,c){var e="ok"===b;e||y("set at "+a+" failed: "+b);e=Wg(g.S,f,!e);Hh(g.ha,a,e);Ph(d,b,c)});e=Qh(this,a);Nh(this,e);Hh(this.ha,e,[])};
h.update=function(a,b,c){this.m("update",{path:a.toString(),value:b});var d=!0,e=Mh(this),f={};w(b,function(a,b){d=!1;var c=O(a);f[b]=uh(c,e)});if(d)Gb("update() called with empty data.  Don't do anything."),Ph(c,"ok");else{var g=this.sd++,k=Vg(this.S,a,f,g);Dh(this.ha,k);var l=this;this.ka.Ye(a.toString(),b,function(b,d){var e="ok"===b;e||y("update at "+a+" failed: "+b);var e=Wg(l.S,g,!e),f=a;0<e.length&&(f=Nh(l,a));Hh(l.ha,f,e);Ph(c,b,d)});b=Qh(this,a);Nh(this,b);Hh(this.ha,a,[])}};
function Oh(a){a.m("onDisconnectEvents");var b=Mh(a),c=[];tf(th(a.za,b),L,function(b,e){c=c.concat(Ug(a.S,new zf(Ef,b,e)));var d=Qh(a,b);Nh(a,d)});a.za=new qf;Hh(a.ha,L,c)}h.ud=function(a,b){var c=this;this.ka.ud(a.toString(),function(d,e){"ok"===d&&sf(c.za,a);Ph(b,d,e)})};function Rh(a,b,c,d){var e=O(c);a.ka.pe(b.toString(),e.O(!0),function(c,g){"ok"===c&&rf(a.za,b,e);Ph(d,c,g)})}function Sh(a,b,c,d,e){var f=O(c,d);a.ka.pe(b.toString(),f.O(!0),function(c,d){"ok"===c&&rf(a.za,b,f);Ph(e,c,d)})}
function Th(a,b,c,d){var e=!0,f;for(f in c)e=!1;e?(Gb("onDisconnect().update() called with empty data.  Don't do anything."),Ph(d,"ok")):a.ka.af(b.toString(),c,function(e,f){if("ok"===e)for(var g in c)if(c.hasOwnProperty(g)){var k=O(c[g]);rf(a.za,b.u(g),k)}Ph(d,e,f)})}function Uh(a,b,c){c=".info"===J(b.path)?a.md.Kb(b,c):a.S.Kb(b,c);Fh(a.ha,b.path,c)}h.xc=function(){this.bb&&this.bb.xc()};h.resume=function(){this.bb&&this.bb.resume()};
h.we=function(a){if("undefined"!==typeof console){a?(this.Id||(this.Id=new mh(this.Jd)),a=this.Id.get()):a=this.Jd.get();var b=bb(qb(a),function(a,b){return Math.max(b.length,a)},0),c;for(c in a)if(a.hasOwnProperty(c)){for(var d=a[c],e=c.length;e<b+2;e++)c+=" ";console.log(c+d)}}};h.xe=function(a){var b=this.Jd,c;p(c)||(c=1);qa(b.uc,a)||(b.uc[a]=0);b.uc[a]+=c;this.Fg.rf[a]=!0};h.m=function(a){var b="";this.bb&&(b=this.bb.id+":");Gb(b,arguments)};
function Ph(a,b,c){a&&Vb(function(){if("ok"==b)a(null);else{var d=(b||"error").toUpperCase(),e=d;c&&(e+=": "+c);e=Error(e);e.code=d;a(e)}})};function Vh(a,b,c,d,e){this.host=a.toLowerCase();this.domain=this.host.substr(this.host.indexOf(".")+1);this.Gb=b;this.Ze=c;this.yd=e||"";Ua.Sc?(this.qf=!0,this.Ha=Ua.Sc):(this.Ha=Sa.get("host:"+a)||this.host,this.qf=!0);this.lb=JSON.parse(v.get("failHosts"))||[]}Vh.prototype.Ue=function(){return"wilddogio.com"!==this.domain&&"wilddogio-demo.com"!==this.domain};
function Re(a,b){Ua.Sc||(null==b?(a.Ha=a.host,"s-"===a.Ha.substr(0,2)&&Sa.remove("host:"+a.host)):b!==a.Ha&&0<b.indexOf(".wilddogio.com")&&(a.Ha=b,"s-"===a.Ha.substr(0,2)&&Sa.set("host:"+a.host,a.Ha)))}Vh.prototype.toString=function(){var a=(this.Gb?"https://":"http://")+this.host;this.yd&&(a+="<"+this.yd+">");return a};function Wh(a,b,c,d,e){function f(){}a.m("transaction on "+b);var g=new W(a.la,a,b);g.Ab("value",f);c={path:b,update:c,N:d,status:null,order:Db(),Ee:e,nf:0,Pd:function(){g.ec("value",f)},Ud:null,Ea:null,Zc:null,$c:null,ad:null};d=a.S.ya(b,void 0)||Q;c.Zc=d;d=c.update(d.O());if(p(d)){Cd("transaction failed: Data returned ",d,c.path);c.status=1;e=xh(a.mc,b);var k=e.Ga()||[];k.push(c);yh(e,k);"object"===typeof d&&null!==d&&qa(d,".priority")?(k=t(d,".priority"),x(Ad(k),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):
k=(a.S.ya(b)||Q).F().O();e=Mh(a);d=O(d,k);e=uh(d,e);c.$c=d;c.ad=e;c.Ea=a.sd++;c=Tg(a.S,b,e,c.Ea,c.Ee);Hh(a.ha,b,c);Xh(a)}else c.Pd(),c.$c=null,c.ad=null,c.N&&(a=new U(c.Zc,new W(a.la,a,c.path),R),c.N(null,!1,a))}function Xh(a,b){var c=b||a.mc;b||Yh(a,c);if(null!==c.Ga()){var d=Zh(a,c);x(0<d.length,"Sending zero length transaction queue");cb(d,function(a){return 1===a.status})&&$h(a,c.path(),d)}else c.fd()&&c.W(function(b){Xh(a,b)})}
function $h(a,b,c){for(var d=ab(c,function(a){return a.Ea}),e=a.S.ya(b,d)||Q,d=e,e=e.hash(),f=0;f<c.length;f++){var g=c[f];x(1===g.status,"tryToSendTransactionQueue_: items in queue should all be run.");g.status=2;g.nf++;var k=I(b,g.path),d=d.K(k,g.$c)}var d=d.O(!0),l=a.la;a.ka.put(b.toString(),d,function(d){a.m("transaction put response",{path:b.toString(),status:d});var e=[];if("ok"===d){d=[];for(f=0;f<c.length;f++){c[f].status=3;e=e.concat(Wg(a.S,c[f].Ea));if(c[f].N){var g=c[f].ad,k=new W(l,a,
c[f].path);d.push(r(c[f].N,null,null,!0,new U(g,k,R)))}c[f].Pd()}Yh(a,xh(a.mc,b));Xh(a);Hh(a.ha,b,e);for(f=0;f<d.length;f++)Vb(d[f])}else{if("datastale"===d)for(f=0;f<c.length;f++)c[f].status=4===c[f].status?5:1;else for(y("transaction at "+b.toString()+" failed: "+d),f=0;f<c.length;f++)c[f].status=5,c[f].Ud=d;Nh(a,b)}},e)}function Nh(a,b){var c=ai(a,b),d=c.path(),c=Zh(a,c);bi(a,c,d);return d}
function bi(a,b,c){if(0!==b.length){for(var d=[],e=[],f=ab(b,function(a){return a.Ea}),g=0;g<b.length;g++){var k=b[g],l=I(c,k.path),m=!1,P;x(null!==l,"rerunTransactionsUnderNode_: relativePath should not be null.");if(5===k.status)m=!0,P=k.Ud,e=e.concat(Wg(a.S,k.Ea,!0));else if(1===k.status)if(25<=k.nf)m=!0,P="maxretry",e=e.concat(Wg(a.S,k.Ea,!0));else{var B=a.S.ya(k.path,f)||Q;k.Zc=B;var da=b[g].update(B.O());p(da)?(Cd("transaction failed: Data returned ",da,k.path),l=O(da),"object"===typeof da&&
null!=da&&qa(da,".priority")||(l=l.ga(B.F())),B=k.Ea,da=Mh(a),da=uh(l,da),k.$c=l,k.ad=da,k.Ea=a.sd++,fb(f,B),e=e.concat(Tg(a.S,k.path,da,k.Ea,k.Ee)),e=e.concat(Wg(a.S,B,!0))):(m=!0,P="nodata",e=e.concat(Wg(a.S,k.Ea,!0)))}Hh(a.ha,c,e);e=[];m&&(b[g].status=3,setTimeout(b[g].Pd,Math.floor(0)),b[g].N&&("nodata"===P?(k=new W(a.la,a,b[g].path),d.push(r(b[g].N,null,null,!1,new U(b[g].Zc,k,R)))):d.push(r(b[g].N,null,Error(P),!1,null))))}Yh(a,a.mc);for(g=0;g<d.length;g++)Vb(d[g]);Xh(a)}}
function ai(a,b){for(var c,d=a.mc;null!==(c=J(b))&&null===d.Ga();)d=xh(d,c),b=K(b);return d}function Zh(a,b){var c=[];ci(a,b,c);c.sort(function(a,b){return a.order-b.order});return c}function ci(a,b,c){var d=b.Ga();if(null!==d)for(var e=0;e<d.length;e++)c.push(d[e]);b.W(function(b){ci(a,b,c)})}function Yh(a,b){var c=b.Ga();if(c){for(var d=0,e=0;e<c.length;e++)3!==c[e].status&&(c[d]=c[e],d++);c.length=d;yh(b,0<c.length?c:null)}b.W(function(b){Yh(a,b)})}
function Qh(a,b){var c=ai(a,b).path(),d=xh(a.mc,b);Bh(d,function(b){di(a,b)});di(a,d);Ah(d,function(b){di(a,b)});return c}
function di(a,b){var c=b.Ga();if(null!==c){for(var d=[],e=[],f=-1,g=0;g<c.length;g++)4!==c[g].status&&(2===c[g].status?(x(f===g-1,"All SENT items should be at beginning of queue."),f=g,c[g].status=4,c[g].Ud="set"):(x(1===c[g].status,"Unexpected transaction status in abort"),c[g].Pd(),e=e.concat(Wg(a.S,c[g].Ea,!0)),c[g].N&&d.push(r(c[g].N,null,Error("set"),!1,null))));-1===f?yh(b,null):c.length=f+1;Hh(a.ha,b.path(),e);for(g=0;g<d.length;g++)Vb(d[g])}};function ei(){this.Wa={};this.Qg=!1}ba(ei);ei.prototype.xc=function(a){for(var b in this.Wa[a.name])this.Wa[a.name].hasOwnProperty(b)&&this.Wa[a.name][b].xc()};ei.prototype.resume=function(a){for(var b in this.Wa[a.name])this.Wa[a.name].hasOwnProperty(b)&&this.Wa[a.name][b].resume()};function fi(a){var b=this;this.jb=a;this.Md="*";Da()?this.Gc=this.jd=wa():(this.Gc=window.opener,this.jd=window);if(!b.Gc)throw"Unable to find relay frame";xa(this.jd,"message",r(this.vd,this));xa(this.jd,"message",r(this.$e,this));try{gi(this,{a:"ready"})}catch(c){xa(this.Gc,"load",function(){gi(b,{a:"ready"})})}xa(window,"unload",r(this.ig,this))}function gi(a,b){b=u(b);Da()?a.Gc.doPost(b,a.Md):a.Gc.postMessage(b,a.Md)}
fi.prototype.vd=function(a){var b=this,c;try{c=La(a.data)}catch(d){}c&&"request"===c.a&&(ya(window,this.vd),this.Md=a.origin,this.jb&&setTimeout(function(){b.jb(b.Md,c.d,function(a,c){b.Df=!c;b.jb=void 0;gi(b,{a:"response",d:a,forceKeepWindowOpen:c})})},0))};fi.prototype.ig=function(){try{ya(this.jd,this.$e)}catch(a){}this.jb&&(gi(this,{a:"error",d:"unknown closed window"}),this.jb=void 0);try{window.close()}catch(a){}};fi.prototype.$e=function(a){if(this.Df&&"die"===a.data)try{window.close()}catch(b){}};var X={Uf:function(){ma.jf.Sg.Tf();ma.jf.wf.Xg()}};X.forceLongPolling=X.Uf;X.Vf=function(){ma.jf.wf.Tf()};X.forceWebSockets=X.Vf;X.vg=function(a,b){a.D.bb.ue=b};X.setSecurityDebugCallback=X.vg;X.we=function(a,b){a.D.we(b)};X.stats=X.we;X.xe=function(a,b){a.D.xe(b)};X.statsIncrementCounter=X.xe;X.bd=function(a){return a.D.bd};X.dataUpdateCount=X.bd;X.$f=function(a,b){a.D.je=b};X.interceptServerData=X.$f;X.gg=function(a){new fi(a)};X.onPopupOpen=X.gg;X.tg=function(a){na=a};
X.setAuthenticationServer=X.tg;function Y(a,b){this.Pc=a;this.ua=b}Y.prototype.cancel=function(a){F("Wilddog.onDisconnect().cancel",0,1,arguments.length);G("Wilddog.onDisconnect().cancel",1,a,!0);var b=new C;this.Pc.ud(this.ua,D(b,a));return b.o};Y.prototype.cancel=Y.prototype.cancel;Y.prototype.cancel=Y.prototype.cancel;
Y.prototype.remove=function(a){F("Wilddog.onDisconnect().remove",0,1,arguments.length);Kd("Wilddog.onDisconnect().remove",this.ua);G("Wilddog.onDisconnect().remove",1,a,!0);var b=new C;Rh(this.Pc,this.ua,null,D(b,a));return b.o};Y.prototype.remove=Y.prototype.remove;Y.prototype.remove=Y.prototype.remove;
Y.prototype.set=function(a,b){F("Wilddog.onDisconnect().set",1,2,arguments.length);Kd("Wilddog.onDisconnect().set",this.ua);Bd("Wilddog.onDisconnect().set",a,this.ua,!1);G("Wilddog.onDisconnect().set",2,b,!0);var c=new C;Rh(this.Pc,this.ua,a,D(c,b));return c.o};Y.prototype.set=Y.prototype.set;Y.prototype.set=Y.prototype.set;
Y.prototype.ob=function(a,b,c){F("Wilddog.onDisconnect().setWithPriority",2,3,arguments.length);Kd("Wilddog.onDisconnect().setWithPriority",this.ua);Bd("Wilddog.onDisconnect().setWithPriority",a,this.ua,!1);Gd("Wilddog.onDisconnect().setWithPriority",2,b);G("Wilddog.onDisconnect().setWithPriority",3,c,!0);var d=new C;Sh(this.Pc,this.ua,a,b,D(d,c));return d.o};Y.prototype.setWithPriority=Y.prototype.ob;Y.prototype.setWithPriority=Y.prototype.ob;
Y.prototype.update=function(a,b){F("Wilddog.onDisconnect().update",1,2,arguments.length);Kd("Wilddog.onDisconnect().update",this.ua);if(ea(a)){for(var c={},d=0;d<a.length;++d)c[""+d]=a[d];a=c;y("Passing an Array to Wilddog.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Fd("Wilddog.onDisconnect().update",a,this.ua);G("Wilddog.onDisconnect().update",2,b,!0);c=new C;
Th(this.Pc,this.ua,a,D(c,b));return c.o};Y.prototype.update=Y.prototype.update;Y.prototype.update=Y.prototype.update;function wg(a){this.g=a}h=wg.prototype;h.K=function(a,b,c,d,e){x(a.zc(this.g),"A node must be indexed if only a child is updated");d=a.P(b);if(d.da(c))return a;null!=e&&(c.f()?a.La(b)?hi(e,new V("child_removed",d,b)):x(a.R(),"A child remove without an old child only makes sense on a leaf node"):d.f()?hi(e,new V("child_added",c,b)):hi(e,new V("child_changed",c,b,d)));return a.R()&&c.f()?a:a.T(b,c).pb(this.g)};
h.xa=function(a,b,c){null!=c&&(a.R()||a.W(R,function(a,e){b.La(a)||hi(c,new V("child_removed",e,a))}),b.R()||b.W(R,function(b,e){if(a.La(b)){var d=a.P(b);d.da(e)||hi(c,new V("child_changed",e,b,d))}else hi(c,new V("child_added",e,b))}));return b.pb(this.g)};h.ga=function(a,b){return a.f()?Q:a.ga(b)};h.Ka=function(){return!1};h.Tb=function(){return this};function yg(a){this.he=new wg(a.g);this.g=a.g;var b;a.pa?(b=ii(a),b=a.g.Ec(ji(a),b)):b=De;this.Rc=b;a.ra?(b=ki(a),a=a.g.Ec(li(a),b)):a=a.g.Fc();this.wc=a}h=yg.prototype;h.matches=function(a){return 0>=this.g.compare(this.Rc,a)&&0>=this.g.compare(a,this.wc)};h.K=function(a,b,c,d,e){this.matches(new N(b,c))||(c=Q);return this.he.K(a,b,c,d,e)};h.xa=function(a,b,c){b.R()&&(b=Q);var d=b.pb(this.g),d=d.ga(Q),e=this;b.W(R,function(a,b){e.matches(new N(a,b))||(d=d.T(a,Q))});return this.he.xa(a,d,c)};
h.ga=function(a){return a};h.Ka=function(){return!0};h.Tb=function(){return this.he};function xg(a){this.va=new yg(a);this.g=a.g;x(a.oa,"Only valid if limit has been set");this.ea=a.ea;this.Fb=!mi(a)}h=xg.prototype;h.K=function(a,b,c,d,e){this.va.matches(new N(b,c))||(c=Q);return a.P(b).da(c)?a:a.zb()<this.ea?this.va.Tb().K(a,b,c,d,e):ni(this,a,b,c,d,e)};
h.xa=function(a,b,c){var d;if(b.R()||b.f())d=Q.pb(this.g);else if(2*this.ea<b.zb()&&b.zc(this.g)){d=Q.pb(this.g);b=this.Fb?b.Yb(this.va.wc,this.g):b.Wb(this.va.Rc,this.g);for(var e=0;0<b.Ta.length&&e<this.ea;){var f=S(b),g;if(g=this.Fb?0>=this.g.compare(this.va.Rc,f):0>=this.g.compare(f,this.va.wc))d=d.T(f.name,f.node),e++;else break}}else{d=b.pb(this.g);d=d.ga(Q);var k,l,m;if(this.Fb){b=d.Re(this.g);k=this.va.wc;l=this.va.Rc;var P=Rd(this.g);m=function(a,b){return P(b,a)}}else b=d.Vb(this.g),k=this.va.Rc,
l=this.va.wc,m=Rd(this.g);for(var e=0,B=!1;0<b.Ta.length;)f=S(b),!B&&0>=m(k,f)&&(B=!0),(g=B&&e<this.ea&&0>=m(f,l))?e++:d=d.T(f.name,Q)}return this.va.Tb().xa(a,d,c)};h.ga=function(a){return a};h.Ka=function(){return!0};h.Tb=function(){return this.va.Tb()};
function ni(a,b,c,d,e,f){var g;if(a.Fb){var k=Rd(a.g);g=function(a,b){return k(b,a)}}else g=Rd(a.g);x(b.zb()==a.ea,"");var l=new N(c,d),m=a.Fb?Be(b,a.g):Ce(b,a.g),P=a.va.matches(l);if(b.La(c)){var B=b.P(c),m=e.de(a.g,m,a.Fb);null!=m&&m.name==c&&(m=e.de(a.g,m,a.Fb));e=null==m?1:g(m,l);if(P&&!d.f()&&0<=e)return null!=f&&hi(f,new V("child_changed",d,c,B)),b.T(c,d);null!=f&&hi(f,new V("child_removed",B,c));b=b.T(c,Q);return null!=m&&a.va.matches(m)?(null!=f&&hi(f,new V("child_added",m.node,m.name)),b.T(m.name,
m.node)):b}return d.f()?b:P&&0<=g(m,l)?(null!=f&&(hi(f,new V("child_removed",m.node,m.name)),hi(f,new V("child_added",d,c))),b.T(c,d).T(m.name,Q)):b};function ng(){this.kb={}}
function hi(a,b){var c=b.type,d=b.$a;x("child_added"==c||"child_changed"==c||"child_removed"==c,"Only child changes supported for tracking");x(".priority"!==d,"Only non-priority child changes can be tracked.");var e=t(a.kb,d);if(e){var f=e.type;if("child_added"==c&&"child_removed"==f)a.kb[d]=new V("child_changed",b.Na,d,e.Na);else if("child_removed"==c&&"child_added"==f)delete a.kb[d];else if("child_removed"==c&&"child_changed"==f)a.kb[d]=new V("child_removed",e.oe,d);else if("child_changed"==c&&
"child_added"==f)a.kb[d]=new V("child_added",b.Na,d);else if("child_changed"==c&&"child_changed"==f)a.kb[d]=new V("child_changed",b.Na,d,e.oe);else throw Eb("Illegal combination of changes: "+b+" occurred after "+e);}else a.kb[d]=b};function oi(){this.Pb=this.ra=this.Hb=this.pa=this.oa=!1;this.ea=0;this.Jb="";this.cc=null;this.xb="";this.$b=null;this.vb="";this.g=R}var pi=new oi;function mi(a){return""===a.Jb?a.pa:"l"===a.Jb}function ji(a){x(a.pa,"Only valid if start has been set");return a.cc}function ii(a){x(a.pa,"Only valid if start has been set");return a.Hb?a.xb:"[MIN_NAME]"}function li(a){x(a.ra,"Only valid if end has been set");return a.$b}
function ki(a){x(a.ra,"Only valid if end has been set");return a.Pb?a.vb:"[MAX_NAME]"}function qi(a){var b=new oi;b.oa=a.oa;b.ea=a.ea;b.pa=a.pa;b.cc=a.cc;b.Hb=a.Hb;b.xb=a.xb;b.ra=a.ra;b.$b=a.$b;b.Pb=a.Pb;b.vb=a.vb;b.g=a.g;return b}h=oi.prototype;h.ne=function(a){var b=qi(this);b.oa=!0;b.ea=a;b.Jb="";return b};h.od=function(a){var b=qi(this);b.oa=!0;b.ea=a;b.Jb="l";return b};h.pd=function(a){var b=qi(this);b.oa=!0;b.ea=a;b.Jb="r";return b};
h.Qc=function(a,b){var c=qi(this);c.pa=!0;p(a)||(a=null);c.cc=a;null!=b?(c.Hb=!0,c.xb=b):(c.Hb=!1,c.xb="");return c};h.vc=function(a,b){var c=qi(this);c.ra=!0;p(a)||(a=null);c.$b=a;p(b)?(c.Pb=!0,c.vb=b):(c.bh=!1,c.vb="");return c};function ri(a,b){var c=qi(a);c.g=b;return c}function Ye(a){var b={};a.pa&&(b.sp=a.cc,a.Hb&&(b.sn=a.xb));a.ra&&(b.ep=a.$b,a.Pb&&(b.en=a.vb));if(a.oa){b.l=a.ea;var c=a.Jb;""===c&&(c=mi(a)?"l":"r");b.vf=c}a.g!==R&&(b.i=a.g.toString());return b}
function kf(a){return!(a.pa||a.ra||a.oa)}function lf(a){var b={};if(kf(a)&&a.g==R)return b;var c;a.g===R?c="$priority":a.g===$d?c="$value":a.g===Xd?c="$key":(x(a.g instanceof Sd,"Unrecognized index type!"),c=a.g.toString());b.orderBy=u(c);a.pa&&(b.startAt=u(a.cc),a.Hb&&(b.startAt+=","+u(a.xb)));a.ra&&(b.endAt=u(a.$b),a.Pb&&(b.endAt+=","+u(a.vb)));a.oa&&(mi(a)?b.limitToFirst=a.ea:b.limitToLast=a.ea);return b}h.toString=function(){return u(Ye(this))};function Z(a,b,c,d){this.D=a;this.path=b;this.B=c;this.hc=d}
function si(a){var b=null,c=null;a.pa&&(b=ji(a));a.ra&&(c=li(a));if(a.g===Xd){if(a.pa){if("[MIN_NAME]"!=ii(a))throw Error("Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().");if("string"!==typeof b)throw Error("Query: When ordering by key, the argument passed to startAt(), endAt(),or equalTo() must be a string.");}if(a.ra){if("[MAX_NAME]"!=ki(a))throw Error("Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().");if("string"!==
typeof c)throw Error("Query: When ordering by key, the argument passed to startAt(), endAt(),or equalTo() must be a string.");}}else if(a.g===R){if(null!=b&&!Ad(b)||null!=c&&!Ad(c))throw Error("Query: When ordering by priority, the first argument passed to startAt(), endAt(), or equalTo() must be a valid priority value (null, a number, or a string).");}else if(x(a.g instanceof Sd||a.g===$d,"unknown index type."),null!=b&&"object"===typeof b||null!=c&&"object"===typeof c)throw Error("Query: First argument passed to startAt(), endAt(), or equalTo() cannot be an object.");
}function ti(a){if(a.pa&&a.ra&&a.oa&&(!a.oa||""===a.Jb))throw Error("Query: Can't combine startAt(), endAt(), and limit(). Use limitToFirst() or limitToLast() instead.");}function ui(a,b){if(!0===a.hc)throw Error(b+": You can't combine multiple orderBy calls.");}Z.prototype.jc=function(a){F("Query.ref",0,1,arguments.length);return new W(this.app,this.D,a?this.path.u(a):this.path)};Z.prototype.ref=Z.prototype.jc;
Z.prototype.Ab=function(a,b,c,d){F("Query.on",2,4,arguments.length);Hd("Query.on",a,!1);G("Query.on",2,b,!1);var e=vi("Query.on",c,d);if("value"===a)Uh(this.D,this,new cg(b,e.cancel||null,e.context||null));else{var f={};f[a]=b;Uh(this.D,this,new dg(f,e.cancel,e.context))}return b};Z.prototype.on=Z.prototype.Ab;
Z.prototype.ec=function(a,b,c){F("Query.off",0,3,arguments.length);Hd("Query.off",a,!0);G("Query.off",2,b,!0);pd("Query.off",3,c);var d=null,e=null;"value"===a?d=new cg(b||null,null,c||null):a&&(b&&(e={},e[a]=b),d=new dg(e,null,c||null));e=this.D;d=".info"===J(this.path)?e.md.nb(this,d):e.S.nb(this,d);Fh(e.ha,this.path,d)};Z.prototype.off=Z.prototype.ec;
Z.prototype.cf=function(a,b){function c(k){f&&(f=!1,e.ec(a,c),b&&b.call(d.context,k),g.resolve(k))}F("Query.once",1,4,arguments.length);Hd("Query.once",a,!1);G("Query.once",2,b,!0);var d=vi("Query.once",arguments[2],arguments[3]),e=this,f=!0,g=new C;Hc(g.o);this.Ab(a,c,function(b){e.ec(a,c);d.cancel&&d.cancel.call(d.context,b);g.reject(b)});return g.o};Z.prototype.once=Z.prototype.cf;Z.prototype.once=Z.prototype.cf;
Z.prototype.ne=function(a){y("Query.limit() being deprecated. Please use Query.limitToFirst() or Query.limitToLast() instead.");F("Query.limit",1,1,arguments.length);if(!fa(a)||Math.floor(a)!==a||0>=a)throw Error("Query.limit: First argument must be a positive integer.");if(this.B.oa)throw Error("Query.limit: Limit was already set (by another call to limit, limitToFirst, orlimitToLast.");var b=this.B.ne(a);ti(b);return new Z(this.D,this.path,b,this.hc)};Z.prototype.limit=Z.prototype.ne;
Z.prototype.od=function(a){F("Query.limitToFirst",1,1,arguments.length);if(!fa(a)||Math.floor(a)!==a||0>=a)throw Error("Query.limitToFirst: First argument must be a positive integer.");if(this.B.oa)throw Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new Z(this.D,this.path,this.B.od(a),this.hc)};Z.prototype.limitToFirst=Z.prototype.od;Z.prototype.limitToFirst=Z.prototype.od;
Z.prototype.pd=function(a){F("Query.limitToLast",1,1,arguments.length);if(!fa(a)||Math.floor(a)!==a||0>=a)throw Error("Query.limitToLast: First argument must be a positive integer.");if(this.B.oa)throw Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new Z(this.D,this.path,this.B.pd(a),this.hc)};Z.prototype.limitToLast=Z.prototype.pd;Z.prototype.limitToLast=Z.prototype.pd;
Z.prototype.df=function(a){F("Query.orderByChild",1,1,arguments.length);if("$key"===a)throw Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.');if("$priority"===a)throw Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.');if("$value"===a)throw Error('Query.orderByChild: "$value" is invalid.  Use Query.orderByValue() instead.');Id("Query.orderByChild",1,a,!1);ui(this,"Query.orderByChild");var b=ri(this.B,new Sd(a));si(b);return new Z(this.D,
this.path,b,!0)};Z.prototype.orderByChild=Z.prototype.df;Z.prototype.orderByChild=Z.prototype.df;Z.prototype.ef=function(){F("Query.orderByKey",0,0,arguments.length);ui(this,"Query.orderByKey");var a=ri(this.B,Xd);si(a);return new Z(this.D,this.path,a,!0)};Z.prototype.orderByKey=Z.prototype.ef;Z.prototype.orderByKey=Z.prototype.ef;Z.prototype.ff=function(){F("Query.orderByPriority",0,0,arguments.length);ui(this,"Query.orderByPriority");var a=ri(this.B,R);si(a);return new Z(this.D,this.path,a,!0)};
Z.prototype.orderByPriority=Z.prototype.ff;Z.prototype.orderByPriority=Z.prototype.ff;Z.prototype.gf=function(){F("Query.orderByValue",0,0,arguments.length);ui(this,"Query.orderByValue");var a=ri(this.B,$d);si(a);return new Z(this.D,this.path,a,!0)};Z.prototype.orderByValue=Z.prototype.gf;Z.prototype.orderByValue=Z.prototype.gf;
Z.prototype.Qc=function(a,b){F("Query.startAt",0,2,arguments.length);Bd("Query.startAt",a,this.path,!0);Id("Query.startAt",2,b,!0);var c=this.B.Qc(a,b);ti(c);si(c);if(this.B.pa)throw Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).");p(a)||(b=a=null);return new Z(this.D,this.path,c,this.hc)};Z.prototype.startAt=Z.prototype.Qc;Z.prototype.startAt=Z.prototype.Qc;
Z.prototype.vc=function(a,b){F("Query.endAt",0,2,arguments.length);Bd("Query.endAt",a,this.path,!0);Id("Query.endAt",2,b,!0);var c=this.B.vc(a,b);ti(c);si(c);if(this.B.ra)throw Error("Query.endAt: Ending point was already set (by another call to endAt or equalTo).");return new Z(this.D,this.path,c,this.hc)};Z.prototype.endAt=Z.prototype.vc;Z.prototype.endAt=Z.prototype.vc;
Z.prototype.Ke=function(a,b){F("Query.equalTo",1,2,arguments.length);Bd("Query.equalTo",a,this.path,!1);Id("Query.equalTo",2,b,!0);if(this.B.pa)throw Error("Query.equalTo: Starting point was already set (by another call to endAt or equalTo).");if(this.B.ra)throw Error("Query.equalTo: Ending point was already set (by another call to endAt or equalTo).");return this.Qc(a,b).vc(a,b)};Z.prototype.equalTo=Z.prototype.Ke;Z.prototype.equalTo=Z.prototype.Ke;
Z.prototype.toString=function(){F("Query.toString",0,0,arguments.length);for(var a=this.path,b="",c=a.ba;c<a.A.length;c++)""!==a.A[c]&&(b+="/"+encodeURIComponent(String(a.A[c])));return this.D.toString()+(b||"/")};Z.prototype.toString=Z.prototype.toString;function We(a){a=Rb(Ye(a.B));return"{}"===a?"default":a}
function vi(a,b,c){var d={cancel:null,context:null};if(b&&c)d.cancel=b,G(a,3,d.cancel,!0),d.context=c,pd(a,4,d.context);else if(b)if("object"===typeof b&&null!==b)d.context=b;else if("function"===typeof b)d.cancel=b;else throw Error(od(a,3,!0)+" must either be a cancel callback or a context object.");return d};function wi(a,b){this.committed=a;this.snapshot=b};var xi=function(){var a=0,b=[];return function(c){var d=c===a;a=c;for(var e=Array(8),f=7;0<=f;f--)e[f]="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz".charAt(c%64),c=Math.floor(c/64);x(0===c,"Cannot push at time == 0");c=e.join("");if(d){for(f=11;0<=f&&63===b[f];f--)b[f]=0;b[f]++}else for(f=0;12>f;f++)b[f]=Math.floor(64*Math.random());for(f=0;12>f;f++)c+="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz".charAt(b[f]);x(20===c.length,"nextPushId: Length should be 20.");
return c}}();function W(a,b,c){this.app=a;if(!b&&!c){b=a.options.syncURL;if(!b)throw Error("Could not find 'syncURL' in options.");a=Ba(b);b=a.Gg;"wilddog"===a.domain&&Nb(a.host+" is no longer supported. Please use <YOUR WILDDOG>.wilddogio.com instead");b||Nb("Cannot parse Wilddog url. Please use https://<YOUR WILDDOG>.wilddogio.com");a.Gb||"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&y("Insecure Wilddog access from a secure page. Please use https.");
b=new Vh(a.host,a.Gb,b);a=new H(a.Oc);c=ei.Ub();var d=this.app,e=b.toString();c.Wa[d.name]||(c.Wa[d.name]={});var f=t(c.Wa[d.name],e);f||(f=new Ih(d,b,c.Qg),c.Wa[d.name][e]=f);b=f;c=a}Z.call(this,b,c,pi,!1)}la(W,Z);W.prototype.name=function(){y("Wilddog.name() being deprecated. Please use Wilddog.key() instead.");F("Wilddog.name",0,0,arguments.length);return this.key()};W.prototype.name=W.prototype.name;W.prototype.key=function(){F("Wilddog.key",0,0,arguments.length);return this.path.f()?null:rd(this.path)};
W.prototype.key=W.prototype.key;W.prototype.u=function(a){F("Wilddog.child",1,1,arguments.length);if(fa(a))a=String(a);else if(!(a instanceof H))if(null===J(this.path)){var b=a;b&&(b=b.replace(/^\/*\.info(\/|$)/,"/"));Jd("Wilddog.child",b)}else Jd("Wilddog.child",a);return new W(this.app,this.D,this.path.u(a))};W.prototype.child=W.prototype.u;W.prototype.parent=function(){F("Wilddog.parent",0,0,arguments.length);var a=this.path.parent();return null===a?null:new W(this.app,this.D,a)};
W.prototype.parent=W.prototype.parent;W.prototype.root=function(){F("Wilddog.ref",0,0,arguments.length);for(var a=this;null!==a.parent();)a=a.parent();return a};W.prototype.root=W.prototype.root;W.prototype.set=function(a,b){F("Wilddog.set",1,2,arguments.length);Kd("Wilddog.set",this.path);Bd("Wilddog.set",a,this.path,!1);G("Wilddog.set",2,b,!0);var c=new C;this.D.ob(this.path,a,null,D(c,b));return c.o};W.prototype.set=W.prototype.set;
W.prototype.update=function(a,b){F("Wilddog.update",1,2,arguments.length);Kd("Wilddog.update",this.path);if(ea(a)){for(var c={},d=0;d<a.length;++d)c[""+d]=a[d];a=c;y("Passing an Array to Wilddog.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Fd("Wilddog.update",a,this.path);G("Wilddog.update",2,b,!0);c=new C;this.D.update(this.path,a,D(c,b));return c.o};W.prototype.update=W.prototype.update;
W.prototype.ob=function(a,b,c){F("Wilddog.setWithPriority",2,3,arguments.length);Kd("Wilddog.setWithPriority",this.path);Bd("Wilddog.setWithPriority",a,this.path,!1);Gd("Wilddog.setWithPriority",2,b);G("Wilddog.setWithPriority",3,c,!0);if(".length"===this.key()||".keys"===this.key())throw"Wilddog.setWithPriority failed: "+this.key()+" is a read-only object.";var d=new C;this.D.ob(this.path,a,b,D(d,c));return d.o};W.prototype.setWithPriority=W.prototype.ob;
W.prototype.remove=function(a){F("Wilddog.remove",0,1,arguments.length);Kd("Wilddog.remove",this.path);G("Wilddog.remove",1,a,!0);this.set(null,a)};W.prototype.remove=W.prototype.remove;
W.prototype.transaction=function(a,b,c){F("Wilddog.transaction",1,3,arguments.length);Kd("Wilddog.transaction",this.path);G("Wilddog.transaction",1,a,!1);G("Wilddog.transaction",2,b,!0);if(p(c)&&"boolean"!=typeof c)throw Error(od("Wilddog.transaction",3,!0)+"must be a boolean.");if(".length"===this.key()||".keys"===this.key())throw"Wilddog.transaction failed: "+this.key()+" is a read-only object.";"undefined"===typeof c&&(c=!0);var d=new C;ga(b)&&Hc(d.o);Wh(this.D,this.path,a,function(a,c,g){a?d.reject(a):
d.resolve(new wi(c,g));ga(b)&&b(a,c,g)},c);return d.o};W.prototype.transaction=W.prototype.transaction;W.prototype.ug=function(a,b){F("Wilddog.setPriority",1,2,arguments.length);Kd("Wilddog.setPriority",this.path);Gd("Wilddog.setPriority",1,a);G("Wilddog.setPriority",2,b,!0);var c=new C;this.D.ob(this.path.u(".priority"),a,null,D(c,b));return c.o};W.prototype.setPriority=W.prototype.ug;
W.prototype.push=function(a,b){F("Wilddog.push",0,2,arguments.length);Kd("Wilddog.push",this.path);Bd("Wilddog.push",a,this.path,!0);G("Wilddog.push",2,b,!0);var c=Lh(this.D),d=xi(c),c=this.u(d);if(null!=a){var e=this,f=c.set(a,b).then(function(){return e.u(d)});c.then=r(f.then,f);c["catch"]=r(f.then,f,void 0);ga(b)&&Hc(f)}return c};W.prototype.push=W.prototype.push;W.prototype.onDisconnect=function(){Kd("Wilddog.onDisconnect",this.path);return new Y(this.D,this.path)};W.prototype.onDisconnect=W.prototype.onDisconnect;
function yi(){F("Wilddog.goOffline",0,0,arguments.length);ei.Ub().xc(this.app)}ka("module$exports$wd$sync$Sync.goOffline",yi);function zi(){F("Wilddog.goOnline",0,0,arguments.length);ei.Ub().resume(this.app)}ka("module$exports$wd$sync$Sync.goOnline",zi);
function Ai(a,b){x(!b||!0===a||!1===a,"Can't turn on custom loggers persistently.");!0===a?("undefined"!==typeof console&&("function"===typeof console.log?Jb=r(console.log,console):"object"===typeof console.log&&(Jb=function(a){console.log(a)})),b&&v.set("logging_enabled",!0)):a?Jb=a:(Jb=null,v.remove("logging_enabled"))}ka("module$exports$wd$sync$Sync.enableLogging",Ai);var Bi={TIMESTAMP:{".sv":"timestamp"}};ka("module$exports$wd$sync$Sync.ServerValue",Bi);var Ci=CLIENT_VERSION;
ka("module$exports$wd$sync$Sync.SDK_VERSION",Ci);ka("module$exports$wd$sync$Sync.INTERNAL",X);ka("module$exports$wd$sync$Sync.Context",ei);W.prototype.Xf=yi;W.prototype.goOffline=W.prototype.Xf;W.prototype.Yf=zi;W.prototype.goOnline=W.prototype.Yf;W.prototype.Je=Ai;W.prototype.enableLogging=W.prototype.Je;W.prototype.yf=Bi;W.prototype.ServerValue=W.prototype.yf;W.prototype.Be=Ci;W.prototype.SDK_VERSION=W.prototype.Be;W.prototype.xf=X;W.prototype.INTERNAL=W.prototype.xf;ka("wd.Sync_",W);Md.Td("sync",function(a){if(null==a)throw Error("application not initialized!Please call wilddog.initializeApp first");return new W(a)});Md.Td("auth",function(a){if(null==a)throw Error("application not initialized!Please call wilddog.initializeApp first");null==a.De&&(a.De=new M(a));return a.De});
(function(a){a.auth=a.auth?a.auth:{};[{id:"password",name:"Wilddog",rb:"phoneOrEmail",Ya:"password"},{id:"password",name:"Email",rb:"email",Ya:"password"},{id:"qq",name:"QQ",rb:"accessToken",Ya:"openId"},{id:"weibo",name:"Weibo",rb:"accessToken",Ya:"openId"},{id:"weixin",name:"Weixin",rb:"accessToken",Ya:"openId"},{id:"weixinmp",name:"Weixinmp",rb:"accessToken",Ya:"openId"}].forEach(function(b){a.auth[b.name+"AuthProvider"]=function(){this.id=b.id;this.addScope=function(a){this.scope=a}};"Wilddog"==
b.name?(a.auth.WilddogAuthProvider.emailCredential=function(a,d){var c={};c.provider=b.id;c.email=a;c[b.Ya]=d;return c},a.auth.WilddogAuthProvider.phoneCredential=function(a,d){var c={};c.provider=b.id;c.phone=a;c[b.Ya]=d;return c}):a.auth[b.name+"AuthProvider"].credential="Email"==b.name?function(a,d){y("wilddog.auth.EmailAuthProvider being deprecated. Please usewilddog.auth.WilddogAuthProvider instead.");var c={};c.provider=b.id;c[b.rb]=a;c[b.Ya]=d;return c}:function(a,d){var c={};c.provider=b.id;
c[b.rb]=a;c[b.Ya]=d;return c}})})(Md);if("WEB"==CLIENT_TYPE)"object"==typeof module&&module.exports&&(module.exports=Md),"function"==typeof define&&define.amd&&define("wilddog",[],function(){return Md}),window?window.wilddog=Md:WorkerGlobalScope&&self&&(self.wilddog=Md);else if("NODE"==CLIENT_TYPE||"WX"==CLIENT_TYPE||"RN"==CLIENT_TYPE)module.exports=Md;
};ns.wrapper(ns.global,ns.goog,ns.wd)})({global,goog:{},wd:{}})
